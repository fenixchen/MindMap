<map version="1.0.1">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node COLOR="#000000" CREATED="1510037727647" ID="ID_1035049656" MODIFIED="1510043364332" TEXT="Linux USB Stack">
<font NAME="SimHei" SIZE="20"/>
<hook NAME="accessories/plugins/AutomaticLayout.properties"/>
<node COLOR="#0033ff" CREATED="1510037847877" FOLDED="true" ID="ID_721586480" MODIFIED="1510038900752" POSITION="right" TEXT="USB and Linux: Introduction">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-1"/>
<node COLOR="#00b439" CREATED="1510037917520" ID="ID_205354524" MODIFIED="1510037921075" TEXT="1996">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
</node>
<node COLOR="#00b439" CREATED="1510037944340" ID="ID_1355173394" MODIFIED="1510037950920" TEXT="Allow port expansion">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
</node>
<node COLOR="#00b439" CREATED="1510037977336" FOLDED="true" ID="ID_729273125" MODIFIED="1510043364271" TEXT="Speed">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510037979328" ID="ID_844809964" MODIFIED="1510038030494" TEXT="Low Speed(10-100Kbps)">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510037983807" ID="ID_1020126737" MODIFIED="1510038037581" TEXT="Full Speed(500k-10Mbps)">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510037987190" ID="ID_710556989" MODIFIED="1510038051331" TEXT="High Speed(25M-400Mbps)">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510038056647" ID="ID_1669991219" MODIFIED="1510038062530" TEXT="OTG(On-The-Go)">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
</node>
<node COLOR="#00b439" CREATED="1510038085122" FOLDED="true" ID="ID_1571441433" MODIFIED="1510043364272" TEXT="Hardware Layer">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510038092113" FOLDED="true" ID="ID_1235387387" MODIFIED="1510043364272" TEXT="Physical Layer">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510038112191" ID="ID_1463640451" MODIFIED="1510038126074" TEXT="Electrical characteristics"/>
<node COLOR="#111111" CREATED="1510038127078" ID="ID_1952297206" MODIFIED="1510038133296" TEXT="Speed detection"/>
<node COLOR="#111111" CREATED="1510038134780" ID="ID_452154248" MODIFIED="1510038136480" TEXT="Timing"/>
<node COLOR="#111111" CREATED="1510038136875" ID="ID_145179626" MODIFIED="1510038138136" TEXT="Power"/>
</node>
<node COLOR="#990000" CREATED="1510038096409" ID="ID_1202242282" MODIFIED="1510038100589" TEXT="Link Layer">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038101016" FOLDED="true" ID="ID_372079460" MODIFIED="1510043364272" TEXT="USB Protocol">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510038181326" ID="ID_1218026695" MODIFIED="1510038187601" TEXT="Bandwith management"/>
<node COLOR="#111111" CREATED="1510038187885" ID="ID_1643625013" MODIFIED="1510038190305" TEXT="Error Handling"/>
<node COLOR="#111111" CREATED="1510038190580" ID="ID_1053162116" MODIFIED="1510038196369" TEXT="Packet Management"/>
</node>
<node COLOR="#990000" CREATED="1510038238470" ID="ID_504092569" LINK="USB%20Hardware%20configuration.png" MODIFIED="1510038252468" TEXT="Configuration">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510038294743" FOLDED="true" ID="ID_987326164" LINK="USB%20Transcceiver.png" MODIFIED="1510043364272" TEXT="Transceiver">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510038302102" ID="ID_1398812007" MODIFIED="1510038310362" TEXT="TX/RX sginals">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038321980" ID="ID_609009873" MODIFIED="1510038324856" TEXT="Connection Detection">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038332914" ID="ID_1311929844" MODIFIED="1510038353295" TEXT="Provide analog electrical signalling requirement">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038437725" ID="ID_1023079355" MODIFIED="1510038443449" TEXT="Convert voltage">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510038491726" FOLDED="true" ID="ID_639155994" MODIFIED="1510043364273" TEXT="Standalone USB Controller">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510038503621" ID="ID_1146231808" MODIFIED="1510038525943" TEXT="integrated curcuit of USB hardware">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038526410" ID="ID_1417794936" MODIFIED="1510038539093" TEXT="Transceiver">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038530850" ID="ID_537009779" MODIFIED="1510038536389" TEXT="Digital portion">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510038599953" ID="ID_629358687" MODIFIED="1510038606501" TEXT="Integrated USB Controller">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
</node>
<node COLOR="#00b439" CREATED="1510038673559" FOLDED="true" ID="ID_570772506" MODIFIED="1510043364273" TEXT="Linux USB">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510038683062" ID="ID_1368298960" MODIFIED="1510038684715" TEXT="Host stack">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038685190" ID="ID_1653207495" MODIFIED="1510038690978" TEXT="Device drivers">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038692045" ID="ID_405610118" MODIFIED="1510038700345" TEXT="Gadget">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510038902899" FOLDED="true" ID="ID_225358213" MODIFIED="1510043364316" POSITION="right" TEXT="USB: An Overview">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-2"/>
<node COLOR="#00b439" CREATED="1510038920216" FOLDED="true" ID="ID_532387835" MODIFIED="1510043364273" TEXT="Master-Slave communication model">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510038934743" ID="ID_1227309693" MODIFIED="1510038941043" TEXT="Host - Master">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038941310" ID="ID_1174327281" MODIFIED="1510038944069" TEXT="Device - Slave">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038949101" ID="ID_1162530495" MODIFIED="1510038954793" TEXT="Max 127 devices">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510038986992" FOLDED="true" ID="ID_1891689557" LINK="USB%20bus%20topology.png" MODIFIED="1510043364273" TEXT="Topology">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510039009246" ID="ID_394290990" MODIFIED="1510039010458" TEXT="Host">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510039010853" ID="ID_1498751469" MODIFIED="1510039016249" TEXT="Hub - Root hub">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510039016508" ID="ID_269471682" MODIFIED="1510039017905" TEXT="Funcs">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510039024787" ID="ID_626485772" MODIFIED="1510039031135" TEXT="Invisible for end user">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510039083140" FOLDED="true" ID="ID_368956274" LINK="Internal%20of%20USB%20host%20and%20USB%20device.png" MODIFIED="1510043364306" TEXT="USB System Architecture">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510039128542" FOLDED="true" ID="ID_1074511359" MODIFIED="1510043364274" TEXT="USB System">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510039144548" ID="ID_1220596435" MODIFIED="1510039271459" TEXT="USB Host">
<arrowlink DESTINATION="ID_488089565" ENDARROW="Default" ENDINCLINATION="160;0;" ID="Arrow_ID_1474326634" STARTARROW="None" STARTINCLINATION="160;0;"/>
</node>
<node COLOR="#111111" CREATED="1510039145564" ID="ID_1905798900" MODIFIED="1510040063324" TEXT="USB Device">
<arrowlink DESTINATION="ID_1444894166" ENDARROW="Default" ENDINCLINATION="461;0;" ID="Arrow_ID_166585303" STARTARROW="None" STARTINCLINATION="461;0;"/>
</node>
<node COLOR="#111111" CREATED="1510039146764" ID="ID_1808335309" MODIFIED="1510039262178" TEXT="USB Interconnect"/>
</node>
<node COLOR="#990000" CREATED="1510039187655" FOLDED="true" ID="ID_834431713" MODIFIED="1510043364274" TEXT="Layers">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510039194574" ID="ID_1157480675" MODIFIED="1510039209682" TEXT="USB Functional Layer"/>
<node COLOR="#111111" CREATED="1510039210788" ID="ID_381113724" MODIFIED="1510039214248" TEXT="USB Device Layer"/>
<node COLOR="#111111" CREATED="1510039203557" ID="ID_560721030" MODIFIED="1510039218639" TEXT="USB Bus Layer"/>
</node>
<node COLOR="#990000" CREATED="1510039264581" FOLDED="true" ID="ID_488089565" LINK="USB%20host%20layers.png" MODIFIED="1510043364277" TEXT="USB Host">
<linktarget COLOR="#b0b0b0" DESTINATION="ID_488089565" ENDARROW="Default" ENDINCLINATION="160;0;" ID="Arrow_ID_1474326634" SOURCE="ID_1220596435" STARTARROW="None" STARTINCLINATION="160;0;"/>
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510039275404" ID="ID_16988072" MODIFIED="1510039286743" TEXT="Host driven"/>
<node COLOR="#111111" CREATED="1510039287098" FOLDED="true" ID="ID_1241271560" MODIFIED="1510043364276" TEXT="Layers">
<node COLOR="#111111" CREATED="1510039289282" ID="ID_1486525367" MODIFIED="1510039909828" TEXT="Client software - Application">
<arrowlink COLOR="#b0b0b0" DESTINATION="ID_1932616800" ENDARROW="Default" ENDINCLINATION="215;0;" ID="Arrow_ID_1498312983" STARTARROW="None" STARTINCLINATION="215;0;"/>
</node>
<node COLOR="#111111" CREATED="1510039295650" FOLDED="true" ID="ID_1767453039" MODIFIED="1510043364275" TEXT="USB system software">
<node COLOR="#111111" CREATED="1510039561983" ID="ID_1689036716" MODIFIED="1510039572027" TEXT="Implemented above host controller"/>
<node COLOR="#111111" CREATED="1510039576270" ID="ID_1909098084" MODIFIED="1510039594440" TEXT="Interface between client software and host controller"/>
<node COLOR="#111111" CREATED="1510039602634" FOLDED="true" ID="ID_1322527178" MODIFIED="1510043364275" TEXT="Two major blocks">
<node COLOR="#111111" CREATED="1510039624399" FOLDED="true" ID="ID_1932616800" MODIFIED="1510043094187" TEXT="USBD - USB Driver">
<arrowlink DESTINATION="ID_503369349" ENDARROW="Default" ENDINCLINATION="78;0;" ID="Arrow_ID_1747792677" STARTARROW="None" STARTINCLINATION="78;0;"/>
<linktarget COLOR="#b0b0b0" DESTINATION="ID_1932616800" ENDARROW="Default" ENDINCLINATION="215;0;" ID="Arrow_ID_1498312983" SOURCE="ID_1486525367" STARTARROW="None" STARTINCLINATION="215;0;"/>
<node COLOR="#111111" CREATED="1510039800225" ID="ID_1457016312" MODIFIED="1510039808773" TEXT="Handler device enumeration"/>
<node COLOR="#111111" CREATED="1510039808985" ID="ID_51478477" MODIFIED="1510039835377" TEXT="Manage IRP(Input/Output Request Packets) to and from host"/>
</node>
<node COLOR="#111111" CREATED="1510039613233" FOLDED="true" ID="ID_503369349" MODIFIED="1510043094187" TEXT="HCD - Host Controller Driver">
<arrowlink DESTINATION="ID_1001616408" ENDARROW="Default" ENDINCLINATION="329;0;" ID="Arrow_ID_1190257825" STARTARROW="None" STARTINCLINATION="329;0;"/>
<linktarget COLOR="#b0b0b0" DESTINATION="ID_503369349" ENDARROW="Default" ENDINCLINATION="78;0;" ID="Arrow_ID_1747792677" SOURCE="ID_1932616800" STARTARROW="None" STARTINCLINATION="78;0;"/>
<node COLOR="#111111" CREATED="1510039694799" ID="ID_616588595" MODIFIED="1510039770234" TEXT="HAL of host controller"/>
<node COLOR="#111111" CREATED="1510039717068" ID="ID_239219988" MODIFIED="1510039731910" TEXT="Allow USBD support different host controller"/>
</node>
</node>
</node>
<node COLOR="#111111" CREATED="1510039300968" FOLDED="true" ID="ID_1001616408" MODIFIED="1510043364275" TEXT="USB Host controller">
<linktarget COLOR="#b0b0b0" DESTINATION="ID_1001616408" ENDARROW="Default" ENDINCLINATION="329;0;" ID="Arrow_ID_1190257825" SOURCE="ID_503369349" STARTARROW="None" STARTINCLINATION="329;0;"/>
<node COLOR="#111111" CREATED="1510039916155" ID="ID_1504174434" MODIFIED="1510039944460" TEXT="Hardware Implementation"/>
<node COLOR="#111111" CREATED="1510039947127" ID="ID_1693108726" MODIFIED="1510039966793" TEXT="Translate the USB bus activeites to transactions and vice versa"/>
<node COLOR="#111111" CREATED="1510039985674" FOLDED="true" ID="ID_658888642" MODIFIED="1510043094189" TEXT="Report status of transaction to System Software">
<node COLOR="#111111" CREATED="1510039997000" ID="ID_1850590782" MODIFIED="1510039998013" TEXT="Done"/>
<node COLOR="#111111" CREATED="1510039998312" ID="ID_1960341575" MODIFIED="1510040000573" TEXT="Pending"/>
<node COLOR="#111111" CREATED="1510040000797" ID="ID_1865254261" MODIFIED="1510040003684" TEXT="Halted"/>
</node>
<node COLOR="#111111" CREATED="1510040034996" ID="ID_1005895003" MODIFIED="1510040039032" TEXT="Bus management"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510039322054" FOLDED="true" ID="ID_1027965519" MODIFIED="1510043364276" TEXT="Functions">
<node COLOR="#111111" CREATED="1510039324021" ID="ID_2562071" MODIFIED="1510039337104" TEXT="Detection and removal of device"/>
<node COLOR="#111111" CREATED="1510039338716" ID="ID_1716926109" MODIFIED="1510039350950" TEXT="Control and Data Flow"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510040051290" FOLDED="true" ID="ID_1444894166" MODIFIED="1510043364278" TEXT="USB Device">
<linktarget COLOR="#b0b0b0" DESTINATION="ID_1444894166" ENDARROW="Default" ENDINCLINATION="461;0;" ID="Arrow_ID_166585303" SOURCE="ID_1905798900" STARTARROW="None" STARTINCLINATION="461;0;"/>
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510040100211" ID="ID_488657339" MODIFIED="1510040122101" TEXT="To end user provided addtional capability"/>
<node COLOR="#111111" CREATED="1510040135911" ID="ID_1338075331" MODIFIED="1510040159680" TEXT="USB hub is a device to provides additional usb attachment point"/>
<node COLOR="#111111" CREATED="1510040167891" ID="ID_1509199323" MODIFIED="1510040238150" TEXT="Self powered or bus powered"/>
<node COLOR="#111111" CREATED="1510040251800" FOLDED="true" ID="ID_10876517" LINK="USB%20Device%20Layers.png" MODIFIED="1510043364278" TEXT="Layers">
<node COLOR="#111111" CREATED="1510040269399" ID="ID_1736289585" MODIFIED="1510040271226" TEXT="Function"/>
<node COLOR="#111111" CREATED="1510040308873" FOLDED="true" ID="ID_1533755322" MODIFIED="1510043364277" TEXT="USB Logical device">
<node COLOR="#111111" CREATED="1510040330118" ID="ID_1118462007" MODIFIED="1510040331443" TEXT="Collection of endpointes"/>
<node COLOR="#111111" CREATED="1510040331862" ID="ID_254482286" MODIFIED="1510040337722" TEXT="default Endpoint Zero"/>
</node>
<node COLOR="#111111" CREATED="1510040348956" FOLDED="true" ID="ID_1582236036" MODIFIED="1510043364278" TEXT="USB Bus Interface">
<node COLOR="#111111" CREATED="1510040357899" ID="ID_368335650" MODIFIED="1510040365702" TEXT="Hardware Implementation"/>
<node COLOR="#111111" CREATED="1510040373009" ID="ID_602728836" MODIFIED="1510040376581" TEXT="USB Device Controller"/>
<node COLOR="#111111" CREATED="1510040380672" ID="ID_1434597869" MODIFIED="1510040394859" TEXT="Phy Layer + Link Layer + Protocol Layer"/>
</node>
</node>
</node>
<node COLOR="#990000" CREATED="1510040741794" FOLDED="true" ID="ID_445803802" MODIFIED="1510043364286" TEXT="Communication Flow">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510040776926" ID="ID_341428338" MODIFIED="1510040781650" TEXT="Logical interconnects"/>
<node COLOR="#111111" CREATED="1510040781973" FOLDED="true" ID="ID_181827047" MODIFIED="1510043364279" TEXT="Endpoints">
<node COLOR="#111111" CREATED="1510040789348" ID="ID_472653290" MODIFIED="1510040804071" TEXT="Uniquely ID of a USB Device"/>
<node COLOR="#111111" CREATED="1510040829911" ID="ID_258044185" MODIFIED="1510040860336" TEXT="Host assign it a unique address as DEVICE ADDRESS"/>
<node COLOR="#111111" CREATED="1510040873794" ID="ID_46276915" MODIFIED="1510040879310" TEXT="Endpoint number"/>
<node COLOR="#111111" CREATED="1510040887272" ID="ID_503389352" MODIFIED="1510040912025" TEXT="Unique by (Device Address, Endpoint Address, Endpoint Direction)"/>
<node COLOR="#111111" CREATED="1510040929539" FOLDED="true" ID="ID_1477911996" MODIFIED="1510043364279" TEXT="EP0 is special and must implement">
<node COLOR="#111111" CREATED="1510040950880" ID="ID_844830064" MODIFIED="1510040954380" TEXT="Initialize"/>
<node COLOR="#111111" CREATED="1510040954680" ID="ID_1763836827" MODIFIED="1510040961731" TEXT="gather information"/>
</node>
<node COLOR="#111111" CREATED="1510040985940" FOLDED="true" ID="ID_367924482" MODIFIED="1510043364279" TEXT="Description">
<node COLOR="#111111" CREATED="1510040999714" ID="ID_278305784" MODIFIED="1510041009749" TEXT="Bus access freq"/>
<node COLOR="#111111" CREATED="1510041010089" ID="ID_1924036124" MODIFIED="1510041017316" TEXT="Bandwidth"/>
<node COLOR="#111111" CREATED="1510041013808" ID="ID_1510640216" MODIFIED="1510041021092" TEXT="Endpoint number"/>
<node COLOR="#111111" CREATED="1510041021311" ID="ID_416887628" MODIFIED="1510041033090" TEXT="Error-handling behavior"/>
<node COLOR="#111111" CREATED="1510041033446" ID="ID_859521955" MODIFIED="1510041050280" TEXT="Maximum packet size for TX/RX"/>
<node COLOR="#111111" CREATED="1510041050547" ID="ID_1594276776" MODIFIED="1510041058959" TEXT="Transfer type"/>
<node COLOR="#111111" CREATED="1510041059658" ID="ID_149223942" MODIFIED="1510041061335" TEXT="Direction"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510041069153" FOLDED="true" ID="ID_230247961" MODIFIED="1510043364285" TEXT="Pipes">
<node COLOR="#111111" CREATED="1510041092670" ID="ID_1473971695" MODIFIED="1510041108465" TEXT="Logical representation between endpoint and host SW"/>
<node COLOR="#111111" CREATED="1510041113875" FOLDED="true" ID="ID_507996513" MODIFIED="1510043364284" TEXT="Two types">
<node COLOR="#111111" CREATED="1510041117659" ID="ID_1306702191" MODIFIED="1510041147436" TEXT="Stream Pipe - no USB-defined format"/>
<node COLOR="#111111" CREATED="1510041123738" ID="ID_726271398" MODIFIED="1510041157226" TEXT="Message Pipe - some USB-defined structure"/>
</node>
<node COLOR="#111111" CREATED="1510041210015" FOLDED="true" ID="ID_1515222390" MODIFIED="1510043364284" TEXT="Default Control Pipe">
<node COLOR="#111111" CREATED="1510041241883" ID="ID_1787332483" MODIFIED="1510041253294" TEXT="Associated with EP0"/>
<node COLOR="#111111" CREATED="1510041253554" ID="ID_1424109542" MODIFIED="1510041264573" TEXT="Available once powered and reset"/>
<node COLOR="#111111" CREATED="1510041267528" ID="ID_1276103287" MODIFIED="1510041283699" TEXT="Host SW use it to identify and configure device"/>
</node>
</node>
</node>
<node COLOR="#990000" CREATED="1510041354933" FOLDED="true" ID="ID_828089558" MODIFIED="1510043364290" TEXT="Enumeration">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510041376154" FOLDED="true" ID="ID_1919211108" MODIFIED="1510043364286" TEXT="Process of">
<node COLOR="#111111" CREATED="1510041379291" ID="ID_243317546" MODIFIED="1510041383654" TEXT="Identifying the device"/>
<node COLOR="#111111" CREATED="1510041383945" ID="ID_1375740223" MODIFIED="1510041391782" TEXT="Setting a unique address"/>
</node>
<node COLOR="#111111" CREATED="1510041398112" FOLDED="true" ID="ID_1962596189" MODIFIED="1510043364287" TEXT="Handled by">
<node COLOR="#111111" CREATED="1510041418333" ID="ID_307881374" MODIFIED="1510041428000" TEXT="System software on host"/>
<node COLOR="#111111" CREATED="1510041428460" ID="ID_1962725740" MODIFIED="1510041437327" TEXT="USB logical layer on device"/>
</node>
<node COLOR="#111111" CREATED="1510041459688" ID="ID_1155988643" MODIFIED="1510041480322" TEXT="Starts when device is attached to host and gets power"/>
<node COLOR="#111111" CREATED="1510041483469" FOLDED="true" ID="ID_1754236276" MODIFIED="1510043364287" TEXT="Steps">
<node COLOR="#111111" CREATED="1510041486996" ID="ID_218670649" MODIFIED="1510043259409" TEXT="Attach device to host, receive an event indicating a change in pipe&apos;s status"/>
<node COLOR="#111111" CREATED="1510041522360" ID="ID_441593514" MODIFIED="1510041788595" TEXT="Device is in POWERED state, attached port is disabled"/>
<node COLOR="#111111" CREATED="1510041545989" ID="ID_1413074261" MODIFIED="1510043269688" TEXT="Host query about the change in bus"/>
<node COLOR="#111111" CREATED="1510041556884" ID="ID_922941754" MODIFIED="1510041725835" TEXT="Determine new device is attached, Wait for 100ms for device become stable"/>
<node COLOR="#111111" CREATED="1510041727582" ID="ID_1934387527" MODIFIED="1510041912632" TEXT="Device gets reset and in a DEFAULT state, get 100mA power from VBUS pin">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041752603" ID="ID_722241795" MODIFIED="1510041767389" TEXT="Host assign a unique address to the USB device"/>
<node COLOR="#111111" CREATED="1510041770976" ID="ID_1007685486" MODIFIED="1510041780484" TEXT="Device move to ADDRESS state"/>
<node COLOR="#111111" CREATED="1510041803948" ID="ID_889845597" MODIFIED="1510041825302" TEXT="Host communicate with device in the default control pipe and read DESC"/>
<node COLOR="#111111" CREATED="1510041827905" ID="ID_661313859" MODIFIED="1510041843412" TEXT="Host reads device configuration information"/>
<node COLOR="#111111" CREATED="1510041845967" ID="ID_1839792525" MODIFIED="1510041859962" TEXT="Host selects configuration"/>
<node COLOR="#111111" CREATED="1510041860325" ID="ID_464401241" MODIFIED="1510041873984" TEXT="Device move to CONFIGURED state and ready for use"/>
</node>
<node COLOR="#111111" CREATED="1510041941027" FOLDED="true" ID="ID_973491513" LINK="USB%20Device%20States%20Transition.png" MODIFIED="1510043364287" TEXT="State transition">
<node COLOR="#111111" CREATED="1510041946195" ID="ID_1487441497" MODIFIED="1510041950462" TEXT="Attached"/>
<node COLOR="#111111" CREATED="1510041950706" ID="ID_1548470770" MODIFIED="1510041952382" TEXT="Powered"/>
<node COLOR="#111111" CREATED="1510041952698" ID="ID_1811126410" MODIFIED="1510041954774" TEXT="Default"/>
<node COLOR="#111111" CREATED="1510041955025" ID="ID_1549958646" MODIFIED="1510041957773" TEXT="Addressed"/>
<node COLOR="#111111" CREATED="1510041958017" ID="ID_794250314" MODIFIED="1510041965372" TEXT="Configured"/>
</node>
<node COLOR="#111111" CREATED="1510042028856" FOLDED="true" ID="ID_398653197" LINK="USB%20Descriptor.png" MODIFIED="1510043364289" TEXT="Descriptors">
<node COLOR="#111111" CREATED="1510042044014" ID="ID_48141203" MODIFIED="1510042047738" TEXT="Structured data"/>
<node COLOR="#111111" CREATED="1510042048029" ID="ID_1382461335" MODIFIED="1510042066544" TEXT="Describes attributes"/>
<node COLOR="#111111" CREATED="1510042067819" ID="ID_1724723293" MODIFIED="1510042077558" TEXT="Provides information about Device to Host"/>
<node COLOR="#111111" CREATED="1510042113989" FOLDED="true" ID="ID_208321827" MODIFIED="1510043364289" TEXT="Types">
<node COLOR="#111111" CREATED="1510042117509" FOLDED="true" ID="ID_1217106896" MODIFIED="1510043364288" TEXT="Device Descriptor">
<node COLOR="#111111" CREATED="1510042150538" ID="ID_1159282413" MODIFIED="1510042162987" TEXT="Information about Device"/>
<node COLOR="#111111" CREATED="1510042164855" ID="ID_163133627" MODIFIED="1510042170162" TEXT="Device Speed"/>
<node COLOR="#111111" CREATED="1510042171822" ID="ID_1427000670" MODIFIED="1510042174298" TEXT="USB Version"/>
<node COLOR="#111111" CREATED="1510042174597" ID="ID_933946671" MODIFIED="1510042179025" TEXT="Vendor details"/>
<node COLOR="#111111" CREATED="1510042179901" ID="ID_1189938927" MODIFIED="1510042187400" TEXT="Number of configurations"/>
</node>
<node COLOR="#111111" CREATED="1510042130163" FOLDED="true" ID="ID_1843976447" MODIFIED="1510043364288" TEXT="Configuration  Descriptor">
<node COLOR="#111111" CREATED="1510042194547" ID="ID_1172880059" MODIFIED="1510042216549" TEXT="A particular configution"/>
<node COLOR="#111111" CREATED="1510042217584" ID="ID_1121210383" MODIFIED="1510042224734" TEXT="Powering mechanism"/>
<node COLOR="#111111" CREATED="1510042225247" ID="ID_1077905575" MODIFIED="1510042231259" TEXT="Power requirements"/>
<node COLOR="#111111" CREATED="1510042231662" ID="ID_1550763812" MODIFIED="1510042239658" TEXT="Interface requirements"/>
</node>
<node COLOR="#111111" CREATED="1510042134779" FOLDED="true" ID="ID_1651110175" MODIFIED="1510043364288" TEXT="Interface Descriptor">
<node COLOR="#111111" CREATED="1510042242445" ID="ID_221275253" MODIFIED="1510042257032" TEXT="A configuration&apos;s particular interface"/>
<node COLOR="#111111" CREATED="1510042258427" ID="ID_1651016546" MODIFIED="1510042275845" TEXT="Class of device and protocol"/>
</node>
<node COLOR="#111111" CREATED="1510042137362" FOLDED="true" ID="ID_366844910" MODIFIED="1510043364288" TEXT="EP Descriptor">
<node COLOR="#111111" CREATED="1510042279408" ID="ID_367539419" MODIFIED="1510042288211" TEXT="Information about a particular endpoint"/>
<node COLOR="#111111" CREATED="1510042289999" ID="ID_1156388125" MODIFIED="1510042311377" TEXT="Transfer type supported"/>
<node COLOR="#111111" CREATED="1510042311764" ID="ID_971162847" MODIFIED="1510042314040" TEXT="Timing "/>
<node COLOR="#111111" CREATED="1510042314300" ID="ID_534094015" MODIFIED="1510042316488" TEXT="Address"/>
</node>
</node>
</node>
</node>
<node COLOR="#990000" CREATED="1510042325490" FOLDED="true" ID="ID_655094812" MODIFIED="1510043364304" TEXT="USB Transfers">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510042348032" FOLDED="true" ID="ID_891847595" MODIFIED="1510043364291" TEXT="Definies">
<node COLOR="#111111" CREATED="1510042351599" ID="ID_1840491184" MODIFIED="1510042359779" TEXT="Direction of Communication Flow"/>
<node COLOR="#111111" CREATED="1510042359998" ID="ID_1131025951" MODIFIED="1510042370017" TEXT="Constraints in the Packet Size"/>
<node COLOR="#111111" CREATED="1510042370261" ID="ID_1272066957" MODIFIED="1510042377608" TEXT="Bus Access Constraints"/>
<node COLOR="#111111" CREATED="1510042379276" ID="ID_543224816" MODIFIED="1510042394230" TEXT="Latency Constraints"/>
<node COLOR="#111111" CREATED="1510042394602" ID="ID_1393838044" MODIFIED="1510042402653" TEXT="Required data sequence"/>
<node COLOR="#111111" CREATED="1510042403001" ID="ID_791805088" MODIFIED="1510042406597" TEXT="Error Handling"/>
</node>
<node COLOR="#111111" CREATED="1510042410984" FOLDED="true" ID="ID_585357242" MODIFIED="1510043364303" TEXT="Types">
<node COLOR="#111111" CREATED="1510042413375" FOLDED="true" ID="ID_42693867" MODIFIED="1510043364292" TEXT="Control Transfer">
<node COLOR="#111111" CREATED="1510042422622" ID="ID_1676642588" MODIFIED="1510042426674" TEXT="MAX: 64B"/>
<node COLOR="#111111" CREATED="1510042440460" ID="ID_503493956" MODIFIED="1510042458614" TEXT="Retrieve information and configure device"/>
<node COLOR="#111111" CREATED="1510042433645" ID="ID_1756949111" MODIFIED="1510042438017" TEXT="Nonperiodic"/>
<node COLOR="#111111" CREATED="1510042467025" ID="ID_1044144842" MODIFIED="1510042474310" TEXT="Best effort to deliver"/>
<node COLOR="#111111" CREATED="1510042478751" FOLDED="true" ID="ID_1821859313" MODIFIED="1510043364292" TEXT="Occurs">
<node COLOR="#111111" CREATED="1510042488054" ID="ID_541160163" MODIFIED="1510042494929" TEXT="Seup transaction"/>
<node COLOR="#111111" CREATED="1510042497989" ID="ID_887859984" MODIFIED="1510042505873" TEXT="Optional data transaction"/>
<node COLOR="#111111" CREATED="1510042508363" ID="ID_1125400950" MODIFIED="1510042512767" TEXT="Status transaction"/>
</node>
<node COLOR="#111111" CREATED="1510042522074" ID="ID_32971667" MODIFIED="1510042528285" TEXT="In Message Pipes"/>
</node>
<node COLOR="#111111" CREATED="1510042534040" FOLDED="true" ID="ID_263918437" MODIFIED="1510043364294" TEXT="Bulk Transfer">
<node COLOR="#111111" CREATED="1510042578482" ID="ID_875710843" MODIFIED="1510042582310" TEXT="Max: 512B"/>
<node COLOR="#111111" CREATED="1510042586698" ID="ID_1701696040" MODIFIED="1510042592117" TEXT="Non-Periodic"/>
<node COLOR="#111111" CREATED="1510042549614" ID="ID_616213540" MODIFIED="1510042557306" TEXT="Transfer large data"/>
<node COLOR="#111111" CREATED="1510042558597" ID="ID_1581935195" MODIFIED="1510042567081" TEXT="No strict time requirement"/>
<node COLOR="#111111" CREATED="1510042605296" ID="ID_561336624" MODIFIED="1510042612443" TEXT="In stream PIPE"/>
<node COLOR="#111111" CREATED="1510042625333" ID="ID_1607373054" MODIFIED="1510042638807" TEXT="Guaranteed data transfer"/>
<node COLOR="#111111" CREATED="1510042639067" ID="ID_360906254" MODIFIED="1510042649422" TEXT="No guaranteed delivery time"/>
<node COLOR="#111111" CREATED="1510042654737" ID="ID_699721192" MODIFIED="1510042664692" TEXT="Retry data"/>
<node COLOR="#111111" CREATED="1510042669351" ID="ID_1900289350" MODIFIED="1510042675347" TEXT="Format is not defied"/>
</node>
<node COLOR="#111111" CREATED="1510042676854" FOLDED="true" ID="ID_1714156120" MODIFIED="1510043364294" TEXT="Interrupt Transfer">
<node COLOR="#111111" CREATED="1510042684205" ID="ID_1041999732" MODIFIED="1510042686849" TEXT="Small data"/>
<node COLOR="#111111" CREATED="1510042687085" ID="ID_1072121273" MODIFIED="1510042690225" TEXT="Non-Periodic"/>
<node COLOR="#111111" CREATED="1510042692756" ID="ID_1880587689" MODIFIED="1510042695458" TEXT="Max: 1024B"/>
<node COLOR="#111111" CREATED="1510042704371" ID="ID_1864130233" MODIFIED="1510042708167" TEXT="Limited latency"/>
<node COLOR="#111111" CREATED="1510042714473" ID="ID_427195544" MODIFIED="1510042716670" TEXT="Stream PIPE"/>
<node COLOR="#111111" CREATED="1510042724976" ID="ID_844703695" MODIFIED="1510042734131" TEXT="Guanteed delivery of data"/>
<node COLOR="#111111" CREATED="1510042736878" ID="ID_1545149705" MODIFIED="1510042740210" TEXT="Retry data"/>
</node>
<node COLOR="#111111" CREATED="1510042741398" FOLDED="true" ID="ID_479048485" MODIFIED="1510043364302" TEXT="Isochronous Transfet">
<node COLOR="#111111" CREATED="1510042753364" ID="ID_1410869870" MODIFIED="1510042764943" TEXT="Web camera or audio transfer"/>
<node COLOR="#111111" CREATED="1510042767659" ID="ID_852992304" MODIFIED="1510042773318" TEXT="Periodic transfer"/>
<node COLOR="#111111" CREATED="1510042780593" ID="ID_1846071187" MODIFIED="1510042783477" TEXT="On-time delivery"/>
<node COLOR="#111111" CREATED="1510042787544" ID="ID_1665432939" MODIFIED="1510042789908" TEXT="Max: 1024B"/>
<node COLOR="#111111" CREATED="1510042796847" ID="ID_299134873" MODIFIED="1510042827919" TEXT="Allcating dedicated portion of USB bandwidth"/>
<node COLOR="#111111" CREATED="1510042834850" ID="ID_176947042" MODIFIED="1510042843446" TEXT="Potential data losses"/>
<node COLOR="#111111" CREATED="1510042845921" ID="ID_426371880" MODIFIED="1510042847989" TEXT="Stream PIPE"/>
<node COLOR="#111111" CREATED="1510042854080" ID="ID_933137251" MODIFIED="1510042859004" TEXT="No Retry"/>
</node>
</node>
</node>
</node>
<node COLOR="#00b439" CREATED="1510042883854" FOLDED="true" ID="ID_545047374" MODIFIED="1510043364315" TEXT="TERMS">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510042891315" FOLDED="true" ID="ID_782806338" MODIFIED="1510043364314" TEXT="Short Packet">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510042910713" ID="ID_7655963" MODIFIED="1510042952128" TEXT="Packet whose payload is shorter than maximum size or ZLP(zero length Packet)"/>
<node COLOR="#111111" CREATED="1510042939677" ID="ID_1390548525" MODIFIED="1510042949288" TEXT="Could indicate the end of a transfet"/>
</node>
<node COLOR="#990000" CREATED="1510042954195" FOLDED="true" ID="ID_1221947691" MODIFIED="1510043364315" TEXT="ZLP">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510042960338" ID="ID_1441011224" MODIFIED="1510042963974" TEXT="Zero Length Packet"/>
<node COLOR="#111111" CREATED="1510042967113" ID="ID_1624614633" MODIFIED="1510042972845" TEXT="Does not contain data"/>
<node COLOR="#111111" CREATED="1510043001157" ID="ID_1439794710" MODIFIED="1510043009369" TEXT="Indicate the end of transfer"/>
</node>
<node COLOR="#990000" CREATED="1510042994558" FOLDED="true" ID="ID_644205377" MODIFIED="1510043364315" TEXT="STALL">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510043012116" ID="ID_1853479191" MODIFIED="1510043044764" TEXT="Indicate a function is unable to transmit or receive data or control pipe is not supported"/>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510043381710" FOLDED="true" ID="ID_1147014145" MODIFIED="1510044458106" POSITION="right" TEXT="Overview of the Linux USB Subsystem">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-3"/>
<node COLOR="#00b439" CREATED="1510043436926" ID="ID_551144035" MODIFIED="1510043445449" TEXT="Directories">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510043446061" ID="ID_1890790403" MODIFIED="1510043447121" TEXT="core">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043453964" ID="ID_1916017475" MODIFIED="1510043459056" TEXT="host">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510043462563" ID="ID_726410579" MODIFIED="1510043464007" TEXT="ohci"/>
<node COLOR="#111111" CREATED="1510043464403" ID="ID_249137090" MODIFIED="1510043465615" TEXT="ehci"/>
</node>
<node COLOR="#990000" CREATED="1510043475209" ID="ID_1525772979" MODIFIED="1510043477365" TEXT="gadget">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043484752" ID="ID_360803733" MODIFIED="1510043487236" TEXT="otg">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043490175" ID="ID_1477258950" MODIFIED="1510043492260" TEXT="class">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043499238" ID="ID_1560678884" MODIFIED="1510043501546" TEXT="storage">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043506037" ID="ID_1903798690" MODIFIED="1510043507178" TEXT="image">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043510971" ID="ID_341640280" MODIFIED="1510043512017" TEXT="atm">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043515116" ID="ID_1750222050" MODIFIED="1510043516164" TEXT="serial">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043517572" ID="ID_1067750073" MODIFIED="1510043519800" TEXT="misc">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043520276" ID="ID_439368794" MODIFIED="1510043523432" TEXT="mon">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510043554767" ID="ID_1584057240" MODIFIED="1510043565650" TEXT="Host Subsystem">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510044017933" ID="ID_480646216" MODIFIED="1510044022497" TEXT="Functions">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510043943422" ID="ID_1596746258" MODIFIED="1510044025632" TEXT="Drivers for host controller">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510043952573" ID="ID_435365339" MODIFIED="1510044025633" TEXT="Driver modules that implement USB protocol">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510043971955" ID="ID_1148339148" MODIFIED="1510044025634" TEXT="Functional Drivers">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510043987721" ID="ID_1237443799" MODIFIED="1510044025634" TEXT="Fil System">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510043989705" ID="ID_1999070667" MODIFIED="1510044025634" TEXT="Debugging">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510044028787" ID="ID_1801387081" MODIFIED="1510044032479" TEXT="USB HCD Driver">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510044043434" ID="ID_1626198932" MODIFIED="1510044074914" TEXT="EHCI - USB 2.0 High Speed"/>
<node COLOR="#111111" CREATED="1510044044737" ID="ID_1392512256" MODIFIED="1510044115781" TEXT="OHCI - USB 2.0 Low Speed"/>
<node COLOR="#111111" CREATED="1510044046529" ID="ID_79054311" MODIFIED="1510044143737" TEXT="UHCI - Intel full and low speed"/>
</node>
<node COLOR="#990000" CREATED="1510044154012" ID="ID_1702110941" MODIFIED="1510044156800" TEXT="USB Class Driver">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510044173969" ID="ID_1801123495" MODIFIED="1510044179213" TEXT="Mass Storage Class">
<node COLOR="#111111" CREATED="1510044211732" ID="ID_986119830" MODIFIED="1510044217336" TEXT="SCSI drivers"/>
</node>
<node COLOR="#111111" CREATED="1510044246416" ID="ID_1113578657" MODIFIED="1510044248620" TEXT="Serial Class"/>
<node COLOR="#111111" CREATED="1510044258446" ID="ID_1827979648" MODIFIED="1510044262530" TEXT="CDC Ethernet"/>
</node>
<node COLOR="#990000" CREATED="1510044284011" ID="ID_1794495628" MODIFIED="1510044292182" TEXT="Debug Infrastucture">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044292642" ID="ID_1392381988" MODIFIED="1510044295246" TEXT="File Systems">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510044295650" ID="ID_1396760278" MODIFIED="1510044312916" TEXT="extends internal to user space"/>
</node>
<node COLOR="#990000" CREATED="1510044318687" ID="ID_1771145980" MODIFIED="1510044320963" TEXT="Power Management">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044326526" ID="ID_1906808169" MODIFIED="1510044327450" TEXT="Test">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510044332349" ID="ID_1618219128" MODIFIED="1510044449995" TEXT="Gadget Subsystem">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510044358074" ID="ID_252316897" MODIFIED="1510044366885" TEXT="Device Driver Layer">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044367177" ID="ID_377907808" MODIFIED="1510044372412" TEXT="Class Driver Layer">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510044466052" FOLDED="true" ID="ID_823420524" MODIFIED="1510046983180" POSITION="right" TEXT="Linux USB Host Driver">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-4"/>
<node COLOR="#00b439" CREATED="1510044513014" ID="ID_291149248" MODIFIED="1510044515562" TEXT="Layers">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510044516102" ID="ID_444408327" MODIFIED="1510044520986" TEXT="USB Interface">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044521357" ID="ID_1933721477" MODIFIED="1510044535080" TEXT="System Software">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044536203" ID="ID_160265299" MODIFIED="1510044538527" TEXT="Client Software">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510044576942" ID="ID_1879628444" LINK="Typical%20USB%20Host%20Stack.png" MODIFIED="1510044836858" TEXT="Generic Host Stack">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510044637063" ID="ID_1549054620" MODIFIED="1510044662081" TEXT="Host Software">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044663795" ID="ID_459297658" MODIFIED="1510044673566" TEXT="USB Driver(USBD)">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044684505" ID="ID_1104969871" MODIFIED="1510044693964" TEXT="USBDI(USB Driver Interface)">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044716053" ID="ID_406823158" MODIFIED="1510044728968" TEXT="HCDI(Host Controller Driver Interface)">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510044736962" ID="ID_628313525" MODIFIED="1510044746165" TEXT="Interface btween HCD and System Software"/>
</node>
<node COLOR="#990000" CREATED="1510044783892" ID="ID_1223323306" MODIFIED="1510044785160" TEXT="HCD">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510044790091" ID="ID_1828607296" MODIFIED="1510044793175" TEXT="EHCI"/>
<node COLOR="#111111" CREATED="1510044793395" ID="ID_1319623803" MODIFIED="1510044795247" TEXT="OHCI"/>
<node COLOR="#111111" CREATED="1510044797818" ID="ID_1300763678" MODIFIED="1510044805502" TEXT="Custom USB host controller"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510044825207" ID="ID_931457303" LINK="Linux%20USB%20Host%20Stack.png" MODIFIED="1510045081845" TEXT="Linux Host Stack">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510044853299" ID="ID_1134181084" MODIFIED="1510044856423" TEXT="usbcore">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510044911316" ID="ID_1531282248" MODIFIED="1510044928750" TEXT="Device Management">
<node COLOR="#111111" CREATED="1510044996697" ID="ID_1046177639" MODIFIED="1510045009244" TEXT="manage devices connected to host"/>
<node COLOR="#111111" CREATED="1510045015823" ID="ID_1230397352" MODIFIED="1510045023826" TEXT="share information via VFS"/>
<node COLOR="#111111" CREATED="1510045029917" ID="ID_349535059" MODIFIED="1510045037960" TEXT="device notification"/>
</node>
<node COLOR="#111111" CREATED="1510044921467" ID="ID_801756167" MODIFIED="1510044924663" TEXT="Power Management">
<node COLOR="#111111" CREATED="1510045109275" ID="ID_1273009374" MODIFIED="1510045113007" TEXT="save power"/>
<node COLOR="#111111" CREATED="1510045113251" ID="ID_299874769" MODIFIED="1510045115647" TEXT="remote wakeup"/>
</node>
<node COLOR="#111111" CREATED="1510044929378" ID="ID_1700751824" MODIFIED="1510044933814" TEXT="USB hub driver">
<node COLOR="#111111" CREATED="1510045131888" ID="ID_1289161233" MODIFIED="1510045136732" TEXT="reset the device"/>
<node COLOR="#111111" CREATED="1510045136991" ID="ID_37016400" MODIFIED="1510045150010" TEXT="announcing new devices to other modules"/>
</node>
<node COLOR="#111111" CREATED="1510044934057" ID="ID_1008932777" MODIFIED="1510044938485" TEXT="USB host driver">
<node COLOR="#111111" CREATED="1510045155821" ID="ID_608901665" MODIFIED="1510045161977" TEXT="USB transfers"/>
<node COLOR="#111111" CREATED="1510045165996" ID="ID_1335038222" MODIFIED="1510045203707" TEXT="Manage URB(USB Request Block) transfer from class drivers to HCDs"/>
</node>
<node COLOR="#111111" CREATED="1510044969253" ID="ID_416803998" MODIFIED="1510044972545" TEXT="HCD interfaces">
<node COLOR="#111111" CREATED="1510045229804" ID="ID_1014368170" MODIFIED="1510045241311" TEXT="URB transfer to HCD"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510044856827" ID="ID_700687871" MODIFIED="1510045257805" TEXT="Linux USB HCD">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510045260976" ID="ID_912078825" MODIFIED="1510045267460" TEXT="driver for USB host controllers"/>
<node COLOR="#111111" CREATED="1510045273414" ID="ID_498871024" MODIFIED="1510045287457" TEXT="based on EHCI or OHCI"/>
<node COLOR="#111111" CREATED="1510045287884" ID="ID_692953076" MODIFIED="1510045304575" TEXT="Implements abstraction between HW and usbcore"/>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510045372370" ID="ID_424876503" MODIFIED="1510047077464" POSITION="right" TEXT="USB Device Notification">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-5"/>
<node COLOR="#00b439" CREATED="1510045749914" ID="ID_1002504153" MODIFIED="1510045872503" TEXT="Communication method">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510045763976" ID="ID_660966088" MODIFIED="1510045780419" TEXT="Synchronous">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510045787573" ID="ID_1235782171" MODIFIED="1510045797824" TEXT="Request-reply/Polling"/>
<node COLOR="#111111" CREATED="1510045798060" ID="ID_1062314891" MODIFIED="1510045808783" TEXT="Reduce the performance"/>
<node COLOR="#111111" CREATED="1510045809219" ID="ID_1586030005" MODIFIED="1510045819966" TEXT="Waste cycles"/>
</node>
<node COLOR="#990000" CREATED="1510045774703" ID="ID_40981050" MODIFIED="1510045786178" TEXT="Asynchronous">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510045823985" ID="ID_139797178" MODIFIED="1510045904403" TEXT="Publish-subscribe methods"/>
<node COLOR="#111111" CREATED="1510045840991" ID="ID_1334011408" MODIFIED="1510045854489" TEXT="Effective alternatives"/>
<node COLOR="#111111" CREATED="1510045860860" ID="ID_1878563420" MODIFIED="1510045880340" TEXT="Linux USE">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
<node COLOR="#00b439" CREATED="1510045890425" ID="ID_154658185" MODIFIED="1510045897580" TEXT="Publish-Subscribe">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510045915101" ID="ID_1613555926" MODIFIED="1510045928312" TEXT="Client register a callback function">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510045928684" ID="ID_1082336429" MODIFIED="1510045951069" TEXT="Server inform client whenever an event of interest occurs through callbacks">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510045964663" ID="ID_296876870" MODIFIED="1510046186401" TEXT="Notifier chain">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510046010713" ID="ID_1778911775" MODIFIED="1510046016901" TEXT="Provided by Linux Kernel">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510046033862" ID="ID_1373805322" MODIFIED="1510046045361" TEXT="Indication addition or removal of a device">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510046089055" ID="ID_1125093604" MODIFIED="1510046098858" TEXT="Callbacks are invoked">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046099574" ID="ID_665936154" MODIFIED="1510046108889" TEXT="Process context"/>
<node COLOR="#111111" CREATED="1510046101398" ID="ID_1186380974" MODIFIED="1510046106449" TEXT="interrupt context"/>
</node>
<node COLOR="#990000" CREATED="1510046128266" ID="ID_1903667786" MODIFIED="1510046142493" TEXT="Classified">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046143057" ID="ID_701014335" MODIFIED="1510046144933" TEXT="Atomic"/>
<node COLOR="#111111" CREATED="1510046145144" ID="ID_178289877" MODIFIED="1510046201146" TEXT="Blocking - Linux-USB uses">
<arrowlink DESTINATION="ID_1459532765" ENDARROW="Default" ENDINCLINATION="221;0;" ID="Arrow_ID_1596668683" STARTARROW="None" STARTINCLINATION="221;0;"/>
</node>
<node COLOR="#111111" CREATED="1510046147320" ID="ID_400246955" MODIFIED="1510046148620" TEXT="Raw"/>
<node COLOR="#111111" CREATED="1510046148928" ID="ID_925252011" MODIFIED="1510046160267" TEXT="Sleepable Read-Copy Update(SRCU)"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510046192563" ID="ID_1459532765" MODIFIED="1510046201145" TEXT="Blocking Notifier Chain">
<edge STYLE="bezier" WIDTH="thin"/>
<linktarget COLOR="#b0b0b0" DESTINATION="ID_1459532765" ENDARROW="Default" ENDINCLINATION="221;0;" ID="Arrow_ID_1596668683" SOURCE="ID_178289877" STARTARROW="None" STARTINCLINATION="221;0;"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510046206833" ID="ID_1297037660" MODIFIED="1510046216140" TEXT="Runs in the process context">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510046225326" ID="ID_1259531809" MODIFIED="1510046227490" TEXT="Can be blocked">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510046242956" ID="ID_1691061888" MODIFIED="1510046250167" TEXT="NOT highly time critical">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510046272504" ID="ID_1804384355" MODIFIED="1510046286019" TEXT="struct notifier_block">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046289046" ID="ID_75769720" MODIFIED="1510046298841" TEXT="int (*nofifier_call)(...)"/>
<node COLOR="#111111" CREATED="1510046300781" ID="ID_9834966" MODIFIED="1510046301689" TEXT="next"/>
<node COLOR="#111111" CREATED="1510046302285" ID="ID_1411618435" MODIFIED="1510046304305" TEXT="proority"/>
</node>
<node COLOR="#990000" CREATED="1510046309292" ID="ID_604773099" MODIFIED="1510046316263" TEXT="struct blocking_notifier_head">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046317738" ID="ID_721924383" MODIFIED="1510046320847" TEXT="rwsem"/>
<node COLOR="#111111" CREATED="1510046330497" ID="ID_628723225" MODIFIED="1510046332157" TEXT="struct notifier_block *head"/>
</node>
<node COLOR="#990000" CREATED="1510046347887" ID="ID_220616623" MODIFIED="1510046349619" TEXT="block_notifier_chain_register()">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510046359861" ID="ID_628667924" MODIFIED="1510046363185" TEXT="blocking_notifier_chain_unregister()">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510046414742" ID="ID_283889690" LINK="Linux%20USB%20Notification.png" MODIFIED="1510046464390" TEXT="Linux USB Notification">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510046585377" ID="ID_704969317" MODIFIED="1510046586589" TEXT="APIs">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046553541" ID="ID_1171965047" MODIFIED="1510046590036" TEXT="usb_register_notify()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046559044" ID="ID_1644352942" MODIFIED="1510046590037" TEXT="usb_unregister_notify()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046565587" ID="ID_1649158333" MODIFIED="1510046590037" TEXT="usb_notify_add_device()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046570946" ID="ID_813740312" MODIFIED="1510046590038" TEXT="usb_notify_remove_device()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046577274" ID="ID_886831411" MODIFIED="1510046590038" TEXT="usb_notify_add_bus()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046582689" ID="ID_704121747" MODIFIED="1510046590039" TEXT="usb_notify_remove_bus()">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510046599183" ID="ID_304064830" MODIFIED="1510046601259" TEXT="Events">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046615005" ID="ID_794156476" MODIFIED="1510046615609" TEXT="USB_DEVICE_ADD"/>
<node COLOR="#111111" CREATED="1510046616157" ID="ID_292143750" MODIFIED="1510046618185" TEXT="USB_DEVICE_REMOVE"/>
<node COLOR="#111111" CREATED="1510046619252" ID="ID_1445111473" MODIFIED="1510046622088" TEXT="USB_BUS_ADD"/>
<node COLOR="#111111" CREATED="1510046622372" ID="ID_46103952" MODIFIED="1510046627696" TEXT="USB_BUS_REMOVE"/>
</node>
<node COLOR="#990000" CREATED="1510046767754" ID="ID_912665829" MODIFIED="1510046769326" TEXT="Steps">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046771761" ID="ID_1047209668" MODIFIED="1510046797378" TEXT="usb_register_notify() called by subscribers"/>
<node COLOR="#111111" CREATED="1510046798630" ID="ID_1303659069" MODIFIED="1510046807681" TEXT="device is added to system"/>
<node COLOR="#111111" CREATED="1510046807933" ID="ID_688257660" MODIFIED="1510046849372" TEXT="usb_notify_add_device() called by usb-generic framework"/>
<node COLOR="#111111" CREATED="1510046854047" ID="ID_1030470395" MODIFIED="1510046876736" TEXT="traverses the usb_notification_list to pass information"/>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510046984702" ID="ID_1350733588" MODIFIED="1510046993521" POSITION="right" TEXT="Device File System">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-6"/>
<node COLOR="#00b439" CREATED="1510047012235" ID="ID_92763633" LINK="VFS.png" MODIFIED="1510047074945" TEXT="VFS">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510047014843" ID="ID_1028087486" MODIFIED="1510047018838" TEXT="Virtual File System">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510047019538" ID="ID_403201433" MODIFIED="1510047030117" TEXT="Provide file system interface to user space app">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510047035184" ID="ID_1341453079" MODIFIED="1510047044171" TEXT="Allow app to access kernel internals">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510047171119" ID="ID_1316534966" MODIFIED="1510047181674" TEXT="Data structures">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510047182133" ID="ID_483777711" MODIFIED="1510047201119" TEXT="Dentries"/>
<node COLOR="#111111" CREATED="1510047187133" ID="ID_1748190359" MODIFIED="1510047199319" TEXT="Files"/>
<node COLOR="#111111" CREATED="1510047188604" ID="ID_780771007" MODIFIED="1510047197480" TEXT="Inodes"/>
<node COLOR="#111111" CREATED="1510047190716" ID="ID_760318767" MODIFIED="1510047195501" TEXT="Super blocks"/>
</node>
</node>
</node>
</node>
</map>
