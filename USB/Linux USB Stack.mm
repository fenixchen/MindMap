<map version="1.0.1">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node COLOR="#000000" CREATED="1510037727647" ID="ID_1035049656" MODIFIED="1510303348578" TEXT="Linux USB Stack">
<font NAME="SimHei" SIZE="20"/>
<hook NAME="accessories/plugins/AutomaticLayout.properties"/>
<node COLOR="#0033ff" CREATED="1510037847877" FOLDED="true" ID="ID_721586480" MODIFIED="1510303348520" POSITION="right" TEXT="USB and Linux: Introduction">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-1"/>
<node COLOR="#00b439" CREATED="1510037917520" ID="ID_205354524" MODIFIED="1510037921075" TEXT="1996">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
</node>
<node COLOR="#00b439" CREATED="1510037944340" ID="ID_1355173394" MODIFIED="1510037950920" TEXT="Allow port expansion">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
</node>
<node COLOR="#00b439" CREATED="1510037977336" FOLDED="true" ID="ID_729273125" MODIFIED="1510296288681" TEXT="Speed">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510037979328" ID="ID_844809964" MODIFIED="1510038030494" TEXT="Low Speed(10-100Kbps)">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510037983807" ID="ID_1020126737" MODIFIED="1510038037581" TEXT="Full Speed(500k-10Mbps)">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510037987190" ID="ID_710556989" MODIFIED="1510038051331" TEXT="High Speed(25M-400Mbps)">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510038056647" ID="ID_1669991219" MODIFIED="1510038062530" TEXT="OTG(On-The-Go)">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
</node>
<node COLOR="#00b439" CREATED="1510038085122" FOLDED="true" ID="ID_1571441433" MODIFIED="1510296288681" TEXT="Hardware Layer">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510038092113" FOLDED="true" ID="ID_1235387387" MODIFIED="1510296288623" TEXT="Physical Layer">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510038112191" ID="ID_1463640451" MODIFIED="1510060280320" TEXT="Electrical characteristics">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510038127078" ID="ID_1952297206" MODIFIED="1510060280335" TEXT="Speed detection">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510038134780" ID="ID_452154248" MODIFIED="1510060280335" TEXT="Timing">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510038136875" ID="ID_145179626" MODIFIED="1510060280335" TEXT="Power">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510038096409" ID="ID_1202242282" MODIFIED="1510038100589" TEXT="Link Layer">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038101016" FOLDED="true" ID="ID_372079460" MODIFIED="1510296288624" TEXT="USB Protocol">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510038181326" ID="ID_1218026695" MODIFIED="1510060280335" TEXT="Bandwith management">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510038187885" ID="ID_1643625013" MODIFIED="1510060280335" TEXT="Error Handling">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510038190580" ID="ID_1053162116" MODIFIED="1510060280335" TEXT="Packet Management">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510038238470" ID="ID_504092569" LINK="USB%20Hardware%20configuration.png" MODIFIED="1510038252468" TEXT="Configuration">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510038294743" FOLDED="true" ID="ID_987326164" LINK="USB%20Transcceiver.png" MODIFIED="1510296288682" TEXT="Transceiver">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510038302102" ID="ID_1398812007" MODIFIED="1510038310362" TEXT="TX/RX sginals">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038321980" ID="ID_609009873" MODIFIED="1510038324856" TEXT="Connection Detection">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038332914" ID="ID_1311929844" MODIFIED="1510038353295" TEXT="Provide analog electrical signalling requirement">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038437725" ID="ID_1023079355" MODIFIED="1510038443449" TEXT="Convert voltage">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510038491726" FOLDED="true" ID="ID_639155994" MODIFIED="1510296288683" TEXT="Standalone USB Controller">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510038503621" ID="ID_1146231808" MODIFIED="1510038525943" TEXT="integrated curcuit of USB hardware">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038526410" ID="ID_1417794936" MODIFIED="1510038539093" TEXT="Transceiver">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038530850" ID="ID_537009779" MODIFIED="1510038536389" TEXT="Digital portion">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510038599953" ID="ID_629358687" MODIFIED="1510038606501" TEXT="Integrated USB Controller">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
</node>
<node COLOR="#00b439" CREATED="1510038673559" FOLDED="true" ID="ID_570772506" MODIFIED="1510296288683" TEXT="Linux USB">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510038683062" ID="ID_1368298960" MODIFIED="1510038684715" TEXT="Host stack">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038685190" ID="ID_1653207495" MODIFIED="1510038690978" TEXT="Device drivers">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038692045" ID="ID_405610118" MODIFIED="1510038700345" TEXT="Gadget">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510038902899" FOLDED="true" ID="ID_225358213" MODIFIED="1510303348522" POSITION="right" TEXT="USB: An Overview">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-2"/>
<node COLOR="#00b439" CREATED="1510038920216" FOLDED="true" ID="ID_532387835" MODIFIED="1510296288684" TEXT="Master-Slave communication model">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510038934743" ID="ID_1227309693" MODIFIED="1510038941043" TEXT="Host - Master">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038941310" ID="ID_1174327281" MODIFIED="1510038944069" TEXT="Device - Slave">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038949101" ID="ID_1162530495" MODIFIED="1510038954793" TEXT="Max 127 devices">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510038986992" FOLDED="true" ID="ID_1891689557" LINK="USB%20bus%20topology.png" MODIFIED="1510296288684" TEXT="Topology">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510039009246" ID="ID_394290990" MODIFIED="1510039010458" TEXT="Host">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510039010853" ID="ID_1498751469" MODIFIED="1510039016249" TEXT="Hub - Root hub">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510039016508" ID="ID_269471682" MODIFIED="1510039017905" TEXT="Funcs">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510039024787" ID="ID_626485772" MODIFIED="1510039031135" TEXT="Invisible for end user">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510039083140" FOLDED="true" ID="ID_368956274" LINK="Internal%20of%20USB%20host%20and%20USB%20device.png" MODIFIED="1510296288685" TEXT="USB System Architecture">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510039128542" FOLDED="true" ID="ID_1074511359" MODIFIED="1510296288624" TEXT="USB System">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510039144548" ID="ID_1220596435" MODIFIED="1510060280335" TEXT="USB Host">
<arrowlink DESTINATION="ID_488089565" ENDARROW="Default" ENDINCLINATION="160;0;" ID="Arrow_ID_1474326634" STARTARROW="None" STARTINCLINATION="160;0;"/>
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039145564" ID="ID_1905798900" MODIFIED="1510060280335" TEXT="USB Device">
<arrowlink DESTINATION="ID_1444894166" ENDARROW="Default" ENDINCLINATION="461;0;" ID="Arrow_ID_166585303" STARTARROW="None" STARTINCLINATION="461;0;"/>
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039146764" ID="ID_1808335309" MODIFIED="1510060280335" TEXT="USB Interconnect">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510039187655" FOLDED="true" ID="ID_834431713" MODIFIED="1510296288624" TEXT="Layers">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510039194574" ID="ID_1157480675" MODIFIED="1510060280335" TEXT="USB Functional Layer">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039210788" ID="ID_381113724" MODIFIED="1510060280351" TEXT="USB Device Layer">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039203557" ID="ID_560721030" MODIFIED="1510060280351" TEXT="USB Bus Layer">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510039264581" FOLDED="true" ID="ID_488089565" LINK="USB%20host%20layers.png" MODIFIED="1510296288625" TEXT="USB Host">
<linktarget COLOR="#b0b0b0" DESTINATION="ID_488089565" ENDARROW="Default" ENDINCLINATION="160;0;" ID="Arrow_ID_1474326634" SOURCE="ID_1220596435" STARTARROW="None" STARTINCLINATION="160;0;"/>
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510039275404" ID="ID_16988072" MODIFIED="1510060280352" TEXT="Host driven">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039287098" FOLDED="true" ID="ID_1241271560" MODIFIED="1510110485941" TEXT="Layers">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510039289282" ID="ID_1486525367" MODIFIED="1510060280353" TEXT="Client software - Application">
<arrowlink COLOR="#b0b0b0" DESTINATION="ID_1932616800" ENDARROW="Default" ENDINCLINATION="215;0;" ID="Arrow_ID_1498312983" STARTARROW="None" STARTINCLINATION="215;0;"/>
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039295650" FOLDED="true" ID="ID_1767453039" MODIFIED="1510110485940" TEXT="USB system software">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510039561983" ID="ID_1689036716" MODIFIED="1510060280353" TEXT="Implemented above host controller">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039576270" ID="ID_1909098084" MODIFIED="1510060280353" TEXT="Interface between client software and host controller">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039602634" FOLDED="true" ID="ID_1322527178" MODIFIED="1510110485940" TEXT="Two major blocks">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510039624399" FOLDED="true" ID="ID_1932616800" MODIFIED="1510110485940" TEXT="USBD - USB Driver">
<arrowlink DESTINATION="ID_503369349" ENDARROW="Default" ENDINCLINATION="78;0;" ID="Arrow_ID_1747792677" STARTARROW="None" STARTINCLINATION="78;0;"/>
<linktarget COLOR="#b0b0b0" DESTINATION="ID_1932616800" ENDARROW="Default" ENDINCLINATION="215;0;" ID="Arrow_ID_1498312983" SOURCE="ID_1486525367" STARTARROW="None" STARTINCLINATION="215;0;"/>
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510039800225" ID="ID_1457016312" MODIFIED="1510060280353" TEXT="Handler device enumeration">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039808985" ID="ID_51478477" MODIFIED="1510060280353" TEXT="Manage IRP(Input/Output Request Packets) to and from host">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510039613233" FOLDED="true" ID="ID_503369349" MODIFIED="1510110485940" TEXT="HCD - Host Controller Driver">
<arrowlink DESTINATION="ID_1001616408" ENDARROW="Default" ENDINCLINATION="329;0;" ID="Arrow_ID_1190257825" STARTARROW="None" STARTINCLINATION="329;0;"/>
<linktarget COLOR="#b0b0b0" DESTINATION="ID_503369349" ENDARROW="Default" ENDINCLINATION="78;0;" ID="Arrow_ID_1747792677" SOURCE="ID_1932616800" STARTARROW="None" STARTINCLINATION="78;0;"/>
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510039694799" ID="ID_616588595" MODIFIED="1510060280353" TEXT="HAL of host controller">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039717068" ID="ID_239219988" MODIFIED="1510060280353" TEXT="Allow USBD support different host controller">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
</node>
<node COLOR="#111111" CREATED="1510039300968" FOLDED="true" ID="ID_1001616408" MODIFIED="1510110485941" TEXT="USB Host controller">
<linktarget COLOR="#b0b0b0" DESTINATION="ID_1001616408" ENDARROW="Default" ENDINCLINATION="329;0;" ID="Arrow_ID_1190257825" SOURCE="ID_503369349" STARTARROW="None" STARTINCLINATION="329;0;"/>
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510039916155" ID="ID_1504174434" MODIFIED="1510060280353" TEXT="Hardware Implementation">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039947127" ID="ID_1693108726" MODIFIED="1510060280353" TEXT="Translate the USB bus activeites to transactions and vice versa">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039985674" FOLDED="true" ID="ID_658888642" MODIFIED="1510110485941" TEXT="Report status of transaction to System Software">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510039997000" ID="ID_1850590782" MODIFIED="1510060280353" TEXT="Done">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039998312" ID="ID_1960341575" MODIFIED="1510060280353" TEXT="Pending">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040000797" ID="ID_1865254261" MODIFIED="1510060280353" TEXT="Halted">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510040034996" ID="ID_1005895003" MODIFIED="1510060280353" TEXT="Bus management">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
<node COLOR="#111111" CREATED="1510039322054" FOLDED="true" ID="ID_1027965519" MODIFIED="1510110485942" TEXT="Functions">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510039324021" ID="ID_2562071" MODIFIED="1510060280368" TEXT="Detection and removal of device">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039338716" ID="ID_1716926109" MODIFIED="1510060280368" TEXT="Control and Data Flow">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
<node COLOR="#990000" CREATED="1510040051290" FOLDED="true" ID="ID_1444894166" MODIFIED="1510296288626" TEXT="USB Device">
<linktarget COLOR="#b0b0b0" DESTINATION="ID_1444894166" ENDARROW="Default" ENDINCLINATION="461;0;" ID="Arrow_ID_166585303" SOURCE="ID_1905798900" STARTARROW="None" STARTINCLINATION="461;0;"/>
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510040100211" ID="ID_488657339" MODIFIED="1510060280368" TEXT="To end user provided addtional capability">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040135911" ID="ID_1338075331" MODIFIED="1510060280368" TEXT="USB hub is a device to provides additional usb attachment point">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040167891" ID="ID_1509199323" MODIFIED="1510060280368" TEXT="Self powered or bus powered">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040251800" FOLDED="true" ID="ID_10876517" LINK="USB%20Device%20Layers.png" MODIFIED="1510110485943" TEXT="Layers">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510040269399" ID="ID_1736289585" MODIFIED="1510060280368" TEXT="Function">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040308873" FOLDED="true" ID="ID_1533755322" MODIFIED="1510110485943" TEXT="USB Logical device">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510040330118" ID="ID_1118462007" MODIFIED="1510060280368" TEXT="Collection of endpointes">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040331862" ID="ID_254482286" MODIFIED="1510060280368" TEXT="default Endpoint Zero">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510040348956" FOLDED="true" ID="ID_1582236036" MODIFIED="1510110485943" TEXT="USB Bus Interface">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510040357899" ID="ID_368335650" MODIFIED="1510060280368" TEXT="Hardware Implementation">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040373009" ID="ID_602728836" MODIFIED="1510060280368" TEXT="USB Device Controller">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040380672" ID="ID_1434597869" MODIFIED="1510060280368" TEXT="Phy Layer + Link Layer + Protocol Layer">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
</node>
<node COLOR="#990000" CREATED="1510040741794" FOLDED="true" ID="ID_445803802" MODIFIED="1510296288627" TEXT="Communication Flow">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510040776926" ID="ID_341428338" MODIFIED="1510060280368" TEXT="Logical interconnects">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040781973" FOLDED="true" ID="ID_181827047" MODIFIED="1510110485945" TEXT="Endpoints">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510040789348" ID="ID_472653290" MODIFIED="1510060280384" TEXT="Uniquely ID of a USB Device">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040829911" ID="ID_258044185" MODIFIED="1510060280384" TEXT="Host assign it a unique address as DEVICE ADDRESS">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040873794" ID="ID_46276915" MODIFIED="1510060280384" TEXT="Endpoint number">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040887272" ID="ID_503389352" MODIFIED="1510060280384" TEXT="Unique by (Device Address, Endpoint Address, Endpoint Direction)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040929539" FOLDED="true" ID="ID_1477911996" MODIFIED="1510110485944" TEXT="EP0 is special and must implement">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510040950880" ID="ID_844830064" MODIFIED="1510060280384" TEXT="Initialize">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040954680" ID="ID_1763836827" MODIFIED="1510060280384" TEXT="gather information">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510040985940" FOLDED="true" ID="ID_367924482" MODIFIED="1510110485945" TEXT="Description">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510040999714" ID="ID_278305784" MODIFIED="1510060280384" TEXT="Bus access freq">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041010089" ID="ID_1924036124" MODIFIED="1510060280400" TEXT="Bandwidth">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041013808" ID="ID_1510640216" MODIFIED="1510060280400" TEXT="Endpoint number">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041021311" ID="ID_416887628" MODIFIED="1510060280400" TEXT="Error-handling behavior">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041033446" ID="ID_859521955" MODIFIED="1510060280400" TEXT="Maximum packet size for TX/RX">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041050547" ID="ID_1594276776" MODIFIED="1510060280400" TEXT="Transfer type">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041059658" ID="ID_149223942" MODIFIED="1510060280400" TEXT="Direction">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
<node COLOR="#111111" CREATED="1510041069153" FOLDED="true" ID="ID_230247961" MODIFIED="1510110485946" TEXT="Pipes">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510041092670" ID="ID_1473971695" MODIFIED="1510060280400" TEXT="Logical representation between endpoint and host SW">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041113875" FOLDED="true" ID="ID_507996513" MODIFIED="1510110485946" TEXT="Two types">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510041117659" ID="ID_1306702191" MODIFIED="1510060280400" TEXT="Stream Pipe - no USB-defined format">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041123738" ID="ID_726271398" MODIFIED="1510060280400" TEXT="Message Pipe - some USB-defined structure">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510041210015" FOLDED="true" ID="ID_1515222390" MODIFIED="1510110485946" TEXT="Default Control Pipe">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510041241883" ID="ID_1787332483" MODIFIED="1510060280400" TEXT="Associated with EP0">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041253554" ID="ID_1424109542" MODIFIED="1510060280400" TEXT="Available once powered and reset">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041267528" ID="ID_1276103287" MODIFIED="1510060280400" TEXT="Host SW use it to identify and configure device">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
</node>
<node COLOR="#990000" CREATED="1510041354933" FOLDED="true" ID="ID_828089558" MODIFIED="1510296288629" TEXT="Enumeration">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510041376154" FOLDED="true" ID="ID_1919211108" MODIFIED="1510110485947" TEXT="Process of">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510041379291" ID="ID_243317546" MODIFIED="1510060280416" TEXT="Identifying the device">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041383945" ID="ID_1375740223" MODIFIED="1510060280416" TEXT="Setting a unique address">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510041398112" FOLDED="true" ID="ID_1962596189" MODIFIED="1510110485947" TEXT="Handled by">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510041418333" ID="ID_307881374" MODIFIED="1510060280416" TEXT="System software on host">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041428460" ID="ID_1962725740" MODIFIED="1510060280416" TEXT="USB logical layer on device">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510041459688" ID="ID_1155988643" MODIFIED="1510060280416" TEXT="Starts when device is attached to host and gets power">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041483469" FOLDED="true" ID="ID_1754236276" MODIFIED="1510110485948" TEXT="Steps">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510041486996" ID="ID_218670649" MODIFIED="1510060280416" TEXT="Attach device to host, receive an event indicating a change in pipe&apos;s status">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041522360" ID="ID_441593514" MODIFIED="1510060280416" TEXT="Device is in POWERED state, attached port is disabled">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041545989" ID="ID_1413074261" MODIFIED="1510060280416" TEXT="Host query about the change in bus">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041556884" ID="ID_922941754" MODIFIED="1510060280416" TEXT="Determine new device is attached, Wait for 100ms for device become stable">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041727582" ID="ID_1934387527" MODIFIED="1510041912632" TEXT="Device gets reset and in a DEFAULT state, get 100mA power from VBUS pin">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041752603" ID="ID_722241795" MODIFIED="1510060280416" TEXT="Host assign a unique address to the USB device">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041770976" ID="ID_1007685486" MODIFIED="1510060280416" TEXT="Device move to ADDRESS state">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041803948" ID="ID_889845597" MODIFIED="1510060280416" TEXT="Host communicate with device in the default control pipe and read DESC">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041827905" ID="ID_661313859" MODIFIED="1510060280416" TEXT="Host reads device configuration information">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041845967" ID="ID_1839792525" MODIFIED="1510060280416" TEXT="Host selects configuration">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041860325" ID="ID_464401241" MODIFIED="1510060280416" TEXT="Device move to CONFIGURED state and ready for use">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510041941027" FOLDED="true" ID="ID_973491513" LINK="USB%20Device%20States%20Transition.png" MODIFIED="1510110485948" TEXT="State transition">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510041946195" ID="ID_1487441497" MODIFIED="1510060280416" TEXT="Attached">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041950706" ID="ID_1548470770" MODIFIED="1510060280416" TEXT="Powered">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041952698" ID="ID_1811126410" MODIFIED="1510060280416" TEXT="Default">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041955025" ID="ID_1549958646" MODIFIED="1510060280432" TEXT="Addressed">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041958017" ID="ID_794250314" MODIFIED="1510060280432" TEXT="Configured">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510042028856" FOLDED="true" ID="ID_398653197" LINK="USB%20Descriptor.png" MODIFIED="1510110485950" TEXT="Descriptors">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042044014" ID="ID_48141203" MODIFIED="1510060280432" TEXT="Structured data">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042048029" ID="ID_1382461335" MODIFIED="1510060280432" TEXT="Describes attributes">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042067819" ID="ID_1724723293" MODIFIED="1510060280432" TEXT="Provides information about Device to Host">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042113989" FOLDED="true" ID="ID_208321827" MODIFIED="1510110485949" TEXT="Types">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042117509" FOLDED="true" ID="ID_1217106896" MODIFIED="1510110485949" TEXT="Device Descriptor">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042150538" ID="ID_1159282413" MODIFIED="1510060280432" TEXT="Information about Device">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042164855" ID="ID_163133627" MODIFIED="1510060280432" TEXT="Device Speed">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042171822" ID="ID_1427000670" MODIFIED="1510060280432" TEXT="USB Version">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042174597" ID="ID_933946671" MODIFIED="1510060280432" TEXT="Vendor details">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042179901" ID="ID_1189938927" MODIFIED="1510060280432" TEXT="Number of configurations">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510042130163" FOLDED="true" ID="ID_1843976447" MODIFIED="1510110485949" TEXT="Configuration  Descriptor">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042194547" ID="ID_1172880059" MODIFIED="1510060280432" TEXT="A particular configution">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042217584" ID="ID_1121210383" MODIFIED="1510060280432" TEXT="Powering mechanism">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042225247" ID="ID_1077905575" MODIFIED="1510060280432" TEXT="Power requirements">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042231662" ID="ID_1550763812" MODIFIED="1510060280432" TEXT="Interface requirements">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510042134779" FOLDED="true" ID="ID_1651110175" MODIFIED="1510110485949" TEXT="Interface Descriptor">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042242445" ID="ID_221275253" MODIFIED="1510060280432" TEXT="A configuration&apos;s particular interface">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042258427" ID="ID_1651016546" MODIFIED="1510060280432" TEXT="Class of device and protocol">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510042137362" FOLDED="true" ID="ID_366844910" MODIFIED="1510110485949" TEXT="EP Descriptor">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042279408" ID="ID_367539419" MODIFIED="1510060280432" TEXT="Information about a particular endpoint">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042289999" ID="ID_1156388125" MODIFIED="1510060280432" TEXT="Transfer type supported">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042311764" ID="ID_971162847" MODIFIED="1510060280432" TEXT="Timing ">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042314300" ID="ID_534094015" MODIFIED="1510060280447" TEXT="Address">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
</node>
</node>
<node COLOR="#990000" CREATED="1510042325490" FOLDED="true" ID="ID_655094812" MODIFIED="1510296288632" TEXT="USB Transfers">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510042348032" FOLDED="true" ID="ID_891847595" MODIFIED="1510110485953" TEXT="Definies">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042351599" ID="ID_1840491184" MODIFIED="1510060280447" TEXT="Direction of Communication Flow">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042359998" ID="ID_1131025951" MODIFIED="1510060280447" TEXT="Constraints in the Packet Size">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042370261" ID="ID_1272066957" MODIFIED="1510060280447" TEXT="Bus Access Constraints">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042379276" ID="ID_543224816" MODIFIED="1510060280447" TEXT="Latency Constraints">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042394602" ID="ID_1393838044" MODIFIED="1510060280447" TEXT="Required data sequence">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042403001" ID="ID_791805088" MODIFIED="1510060280447" TEXT="Error Handling">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510042410984" FOLDED="true" ID="ID_585357242" MODIFIED="1510110485955" TEXT="Types">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042413375" FOLDED="true" ID="ID_42693867" MODIFIED="1510110485953" TEXT="Control Transfer">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042422622" ID="ID_1676642588" MODIFIED="1510060280447" TEXT="MAX: 64B">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042440460" ID="ID_503493956" MODIFIED="1510060280447" TEXT="Retrieve information and configure device">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042433645" ID="ID_1756949111" MODIFIED="1510060280447" TEXT="Nonperiodic">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042467025" ID="ID_1044144842" MODIFIED="1510060280447" TEXT="Best effort to deliver">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042478751" FOLDED="true" ID="ID_1821859313" MODIFIED="1510110485953" TEXT="Occurs">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042488054" ID="ID_541160163" MODIFIED="1510060280447" TEXT="Seup transaction">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042497989" ID="ID_887859984" MODIFIED="1510060280447" TEXT="Optional data transaction">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042508363" ID="ID_1125400950" MODIFIED="1510060280447" TEXT="Status transaction">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510042522074" ID="ID_32971667" MODIFIED="1510060280463" TEXT="In Message Pipes">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510042534040" FOLDED="true" ID="ID_263918437" MODIFIED="1510110485954" TEXT="Bulk Transfer">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042578482" ID="ID_875710843" MODIFIED="1510060280464" TEXT="Max: 512B">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042586698" ID="ID_1701696040" MODIFIED="1510060280465" TEXT="Non-Periodic">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042549614" ID="ID_616213540" MODIFIED="1510060280465" TEXT="Transfer large data">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042558597" ID="ID_1581935195" MODIFIED="1510060280465" TEXT="No strict time requirement">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042605296" ID="ID_561336624" MODIFIED="1510060280465" TEXT="In stream PIPE">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042625333" ID="ID_1607373054" MODIFIED="1510060280465" TEXT="Guaranteed data transfer">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042639067" ID="ID_360906254" MODIFIED="1510060280465" TEXT="No guaranteed delivery time">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042654737" ID="ID_699721192" MODIFIED="1510060280465" TEXT="Retry data">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042669351" ID="ID_1900289350" MODIFIED="1510060280465" TEXT="Format is not defied">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510042676854" FOLDED="true" ID="ID_1714156120" MODIFIED="1510110485954" TEXT="Interrupt Transfer">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042684205" ID="ID_1041999732" MODIFIED="1510060280465" TEXT="Small data">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042687085" ID="ID_1072121273" MODIFIED="1510060280465" TEXT="Non-Periodic">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042692756" ID="ID_1880587689" MODIFIED="1510060280465" TEXT="Max: 1024B">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042704371" ID="ID_1864130233" MODIFIED="1510060280465" TEXT="Limited latency">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042714473" ID="ID_427195544" MODIFIED="1510060280465" TEXT="Stream PIPE">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042724976" ID="ID_844703695" MODIFIED="1510060280465" TEXT="Guanteed delivery of data">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042736878" ID="ID_1545149705" MODIFIED="1510060280465" TEXT="Retry data">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510042741398" FOLDED="true" ID="ID_479048485" MODIFIED="1510110485955" TEXT="Isochronous Transfet">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042753364" ID="ID_1410869870" MODIFIED="1510060280465" TEXT="Web camera or audio transfer">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042767659" ID="ID_852992304" MODIFIED="1510060280465" TEXT="Periodic transfer">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042780593" ID="ID_1846071187" MODIFIED="1510060280465" TEXT="On-time delivery">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042787544" ID="ID_1665432939" MODIFIED="1510060280465" TEXT="Max: 1024B">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042796847" ID="ID_299134873" MODIFIED="1510060280465" TEXT="Allcating dedicated portion of USB bandwidth">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042834850" ID="ID_176947042" MODIFIED="1510060280465" TEXT="Potential data losses">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042845921" ID="ID_426371880" MODIFIED="1510060280465" TEXT="Stream PIPE">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042854080" ID="ID_933137251" MODIFIED="1510060280465" TEXT="No Retry">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
</node>
</node>
<node COLOR="#00b439" CREATED="1510042883854" FOLDED="true" ID="ID_545047374" MODIFIED="1510296288694" TEXT="TERMS">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510042891315" FOLDED="true" ID="ID_782806338" MODIFIED="1510296288635" TEXT="Short Packet">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510042910713" ID="ID_7655963" MODIFIED="1510060280481" TEXT="Packet whose payload is shorter than maximum size or ZLP(zero length Packet)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042939677" ID="ID_1390548525" MODIFIED="1510060280481" TEXT="Could indicate the end of a transfet">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510042954195" FOLDED="true" ID="ID_1221947691" MODIFIED="1510296288635" TEXT="ZLP">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510042960338" ID="ID_1441011224" MODIFIED="1510060280481" TEXT="Zero Length Packet">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042967113" ID="ID_1624614633" MODIFIED="1510060280481" TEXT="Does not contain data">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510043001157" ID="ID_1439794710" MODIFIED="1510060280481" TEXT="Indicate the end of transfer">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510042994558" FOLDED="true" ID="ID_644205377" MODIFIED="1510296288636" TEXT="STALL">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510043012116" ID="ID_1853479191" MODIFIED="1510060280481" TEXT="Indicate a function is unable to transmit or receive data or control pipe is not supported">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510043381710" FOLDED="true" ID="ID_1147014145" MODIFIED="1510303348542" POSITION="right" TEXT="Overview of the Linux USB Subsystem">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-3"/>
<node COLOR="#00b439" CREATED="1510043436926" FOLDED="true" ID="ID_551144035" MODIFIED="1510296288695" TEXT="Directories">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510043446061" ID="ID_1890790403" MODIFIED="1510043447121" TEXT="core">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043453964" FOLDED="true" ID="ID_1916017475" MODIFIED="1510296288636" TEXT="host">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510043462563" ID="ID_726410579" MODIFIED="1510060280481" TEXT="ohci">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510043464403" ID="ID_249137090" MODIFIED="1510060280481" TEXT="ehci">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510043475209" ID="ID_1525772979" MODIFIED="1510043477365" TEXT="gadget">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043484752" ID="ID_360803733" MODIFIED="1510043487236" TEXT="otg">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043490175" ID="ID_1477258950" MODIFIED="1510043492260" TEXT="class">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043499238" ID="ID_1560678884" MODIFIED="1510043501546" TEXT="storage">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043506037" ID="ID_1903798690" MODIFIED="1510043507178" TEXT="image">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043510971" ID="ID_341640280" MODIFIED="1510043512017" TEXT="atm">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043515116" ID="ID_1750222050" MODIFIED="1510043516164" TEXT="serial">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043517572" ID="ID_1067750073" MODIFIED="1510043519800" TEXT="misc">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043520276" ID="ID_439368794" MODIFIED="1510043523432" TEXT="mon">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510043554767" FOLDED="true" ID="ID_1584057240" MODIFIED="1510296288700" TEXT="Host Subsystem">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510044017933" FOLDED="true" ID="ID_480646216" MODIFIED="1510296288637" TEXT="Functions">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510043943422" ID="ID_1596746258" MODIFIED="1510044025632" TEXT="Drivers for host controller">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510043952573" ID="ID_435365339" MODIFIED="1510044025633" TEXT="Driver modules that implement USB protocol">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510043971955" ID="ID_1148339148" MODIFIED="1510044025634" TEXT="Functional Drivers">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510043987721" ID="ID_1237443799" MODIFIED="1510044025634" TEXT="Fil System">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510043989705" ID="ID_1999070667" MODIFIED="1510044025634" TEXT="Debugging">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510044028787" FOLDED="true" ID="ID_1801387081" MODIFIED="1510296288638" TEXT="USB HCD Driver">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510044043434" ID="ID_1626198932" MODIFIED="1510060280481" TEXT="EHCI - USB 2.0 High Speed">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510044044737" ID="ID_1392512256" MODIFIED="1510060280481" TEXT="OHCI - USB 2.0 Low Speed">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510044046529" ID="ID_79054311" MODIFIED="1510060280481" TEXT="UHCI - Intel full and low speed">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510044154012" FOLDED="true" ID="ID_1702110941" MODIFIED="1510296288639" TEXT="USB Class Driver">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510044173969" FOLDED="true" ID="ID_1801123495" MODIFIED="1510110485997" TEXT="Mass Storage Class">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510044211732" ID="ID_986119830" MODIFIED="1510060280481" TEXT="SCSI drivers">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510044246416" ID="ID_1113578657" MODIFIED="1510060280481" TEXT="Serial Class">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510044258446" ID="ID_1827979648" MODIFIED="1510060280481" TEXT="CDC Ethernet">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510044284011" ID="ID_1794495628" MODIFIED="1510044292182" TEXT="Debug Infrastucture">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044292642" FOLDED="true" ID="ID_1392381988" MODIFIED="1510296288639" TEXT="File Systems">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510044295650" ID="ID_1396760278" MODIFIED="1510060280481" TEXT="extends internal to user space">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510044318687" ID="ID_1771145980" MODIFIED="1510044320963" TEXT="Power Management">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044326526" ID="ID_1906808169" MODIFIED="1510044327450" TEXT="Test">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510044332349" FOLDED="true" ID="ID_1618219128" MODIFIED="1510296288701" TEXT="Gadget Subsystem">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510044358074" ID="ID_252316897" MODIFIED="1510044366885" TEXT="Device Driver Layer">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044367177" ID="ID_377907808" MODIFIED="1510044372412" TEXT="Class Driver Layer">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510044466052" FOLDED="true" ID="ID_823420524" MODIFIED="1510303348544" POSITION="right" TEXT="Linux USB Host Driver">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-4"/>
<node COLOR="#00b439" CREATED="1510044513014" FOLDED="true" ID="ID_291149248" MODIFIED="1510296288702" TEXT="Layers">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510044516102" ID="ID_444408327" MODIFIED="1510044520986" TEXT="USB Interface">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044521357" ID="ID_1933721477" MODIFIED="1510044535080" TEXT="System Software">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044536203" ID="ID_160265299" MODIFIED="1510044538527" TEXT="Client Software">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510044576942" FOLDED="true" ID="ID_1879628444" LINK="Typical%20USB%20Host%20Stack.png" MODIFIED="1510296288702" TEXT="Generic Host Stack">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510044637063" ID="ID_1549054620" MODIFIED="1510044662081" TEXT="Host Software">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044663795" ID="ID_459297658" MODIFIED="1510044673566" TEXT="USB Driver(USBD)">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044684505" ID="ID_1104969871" MODIFIED="1510044693964" TEXT="USBDI(USB Driver Interface)">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044716053" FOLDED="true" ID="ID_406823158" MODIFIED="1510296288640" TEXT="HCDI(Host Controller Driver Interface)">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510044736962" ID="ID_628313525" MODIFIED="1510060280481" TEXT="Interface btween HCD and System Software">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510044783892" FOLDED="true" ID="ID_1223323306" MODIFIED="1510296288640" TEXT="HCD">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510044790091" ID="ID_1828607296" MODIFIED="1510060280481" TEXT="EHCI">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510044793395" ID="ID_1319623803" MODIFIED="1510060280481" TEXT="OHCI">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510044797818" ID="ID_1300763678" MODIFIED="1510060280481" TEXT="Custom USB host controller">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
<node COLOR="#00b439" CREATED="1510044825207" FOLDED="true" ID="ID_931457303" LINK="Linux%20USB%20Host%20Stack.png" MODIFIED="1510296288703" TEXT="Linux Host Stack">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510044853299" FOLDED="true" ID="ID_1134181084" MODIFIED="1510296288640" TEXT="usbcore">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510044911316" FOLDED="true" ID="ID_1531282248" MODIFIED="1510110486004" TEXT="Device Management">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510044996697" ID="ID_1046177639" MODIFIED="1510060280481" TEXT="manage devices connected to host">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045015823" ID="ID_1230397352" MODIFIED="1510060280481" TEXT="share information via VFS">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045029917" ID="ID_349535059" MODIFIED="1510060280481" TEXT="device notification">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510044921467" FOLDED="true" ID="ID_801756167" MODIFIED="1510110486004" TEXT="Power Management">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510045109275" ID="ID_1273009374" MODIFIED="1510060280481" TEXT="save power">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045113251" ID="ID_299874769" MODIFIED="1510060280481" TEXT="remote wakeup">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510044929378" FOLDED="true" ID="ID_1700751824" MODIFIED="1510110486004" TEXT="USB hub driver">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510045131888" ID="ID_1289161233" MODIFIED="1510060280481" TEXT="reset the device">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045136991" ID="ID_37016400" MODIFIED="1510060280481" TEXT="announcing new devices to other modules">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510044934057" FOLDED="true" ID="ID_1008932777" MODIFIED="1510110486004" TEXT="USB host driver">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510045155821" ID="ID_608901665" MODIFIED="1510060280481" TEXT="USB transfers">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045165996" ID="ID_1335038222" MODIFIED="1510060280481" TEXT="Manage URB(USB Request Block) transfer from class drivers to HCDs">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510044969253" FOLDED="true" ID="ID_416803998" MODIFIED="1510110486005" TEXT="HCD interfaces">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510045229804" ID="ID_1014368170" MODIFIED="1510060280496" TEXT="URB transfer to HCD">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
<node COLOR="#990000" CREATED="1510044856827" FOLDED="true" ID="ID_700687871" MODIFIED="1510296288642" TEXT="Linux USB HCD">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510045260976" ID="ID_912078825" MODIFIED="1510060280496" TEXT="driver for USB host controllers">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045273414" ID="ID_498871024" MODIFIED="1510060280496" TEXT="based on EHCI or OHCI">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045287884" ID="ID_692953076" MODIFIED="1510060280496" TEXT="Implements abstraction between HW and usbcore">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510045372370" FOLDED="true" ID="ID_424876503" MODIFIED="1510303348547" POSITION="right" TEXT="USB Device Notification">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-5"/>
<node COLOR="#00b439" CREATED="1510045749914" FOLDED="true" ID="ID_1002504153" MODIFIED="1510296288705" TEXT="Communication method">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510045763976" FOLDED="true" ID="ID_660966088" MODIFIED="1510296288642" TEXT="Synchronous">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510045787573" ID="ID_1235782171" MODIFIED="1510060280496" TEXT="Request-reply/Polling">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045798060" ID="ID_1062314891" MODIFIED="1510060280496" TEXT="Reduce the performance">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045809219" ID="ID_1586030005" MODIFIED="1510060280496" TEXT="Waste cycles">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510045774703" FOLDED="true" ID="ID_40981050" MODIFIED="1510296288642" TEXT="Asynchronous">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510045823985" ID="ID_139797178" MODIFIED="1510060280496" TEXT="Publish-subscribe methods">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045840991" ID="ID_1334011408" MODIFIED="1510060280496" TEXT="Effective alternatives">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045860860" ID="ID_1878563420" MODIFIED="1510045880340" TEXT="Linux USE">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
<node COLOR="#00b439" CREATED="1510045890425" FOLDED="true" ID="ID_154658185" MODIFIED="1510296288705" TEXT="Publish-Subscribe">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510045915101" ID="ID_1613555926" MODIFIED="1510045928312" TEXT="Client register a callback function">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510045928684" ID="ID_1082336429" MODIFIED="1510045951069" TEXT="Server inform client whenever an event of interest occurs through callbacks">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510045964663" FOLDED="true" ID="ID_296876870" MODIFIED="1510296288706" TEXT="Notifier chain">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510046010713" ID="ID_1778911775" MODIFIED="1510046016901" TEXT="Provided by Linux Kernel">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510046033862" ID="ID_1373805322" MODIFIED="1510046045361" TEXT="Indication addition or removal of a device">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510046089055" FOLDED="true" ID="ID_1125093604" MODIFIED="1510296288643" TEXT="Callbacks are invoked">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046099574" ID="ID_665936154" MODIFIED="1510060280496" TEXT="Process context">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046101398" ID="ID_1186380974" MODIFIED="1510060280496" TEXT="interrupt context">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510046128266" FOLDED="true" ID="ID_1903667786" MODIFIED="1510296288643" TEXT="Classified">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046143057" ID="ID_701014335" MODIFIED="1510060280496" TEXT="Atomic">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046145144" ID="ID_178289877" MODIFIED="1510060280496" TEXT="Blocking - Linux-USB uses">
<arrowlink DESTINATION="ID_1459532765" ENDARROW="Default" ENDINCLINATION="221;0;" ID="Arrow_ID_1596668683" STARTARROW="None" STARTINCLINATION="221;0;"/>
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046147320" ID="ID_400246955" MODIFIED="1510060280496" TEXT="Raw">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046148928" ID="ID_925252011" MODIFIED="1510060280496" TEXT="Sleepable Read-Copy Update(SRCU)">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
<node COLOR="#00b439" CREATED="1510046192563" FOLDED="true" ID="ID_1459532765" MODIFIED="1510296288707" TEXT="Blocking Notifier Chain">
<edge STYLE="bezier" WIDTH="thin"/>
<linktarget COLOR="#b0b0b0" DESTINATION="ID_1459532765" ENDARROW="Default" ENDINCLINATION="221;0;" ID="Arrow_ID_1596668683" SOURCE="ID_178289877" STARTARROW="None" STARTINCLINATION="221;0;"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510046206833" ID="ID_1297037660" MODIFIED="1510046216140" TEXT="Runs in the process context">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510046225326" ID="ID_1259531809" MODIFIED="1510046227490" TEXT="Can be blocked">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510046242956" ID="ID_1691061888" MODIFIED="1510046250167" TEXT="NOT highly time critical">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510046272504" FOLDED="true" ID="ID_1804384355" MODIFIED="1510296288644" TEXT="struct notifier_block">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046289046" ID="ID_75769720" MODIFIED="1510060280496" TEXT="int (*nofifier_call)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046300781" ID="ID_9834966" MODIFIED="1510060280496" TEXT="next">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046302285" ID="ID_1411618435" MODIFIED="1510060280496" TEXT="proority">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510046309292" FOLDED="true" ID="ID_604773099" MODIFIED="1510296288644" TEXT="struct blocking_notifier_head">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046317738" ID="ID_721924383" MODIFIED="1510060280496" TEXT="rwsem">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046330497" ID="ID_628723225" MODIFIED="1510060280496" TEXT="struct notifier_block *head">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510046347887" ID="ID_220616623" MODIFIED="1510046349619" TEXT="block_notifier_chain_register()">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510046359861" ID="ID_628667924" MODIFIED="1510046363185" TEXT="blocking_notifier_chain_unregister()">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510046414742" FOLDED="true" ID="ID_283889690" LINK="Linux%20USB%20Notification.png" MODIFIED="1510296288708" TEXT="Linux USB Notification">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510046585377" FOLDED="true" ID="ID_704969317" MODIFIED="1510296288644" TEXT="APIs">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046553541" ID="ID_1171965047" MODIFIED="1510046590036" TEXT="usb_register_notify()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046559044" ID="ID_1644352942" MODIFIED="1510046590037" TEXT="usb_unregister_notify()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046565587" ID="ID_1649158333" MODIFIED="1510046590037" TEXT="usb_notify_add_device()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046570946" ID="ID_813740312" MODIFIED="1510046590038" TEXT="usb_notify_remove_device()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046577274" ID="ID_886831411" MODIFIED="1510046590038" TEXT="usb_notify_add_bus()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046582689" ID="ID_704121747" MODIFIED="1510046590039" TEXT="usb_notify_remove_bus()">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510046599183" FOLDED="true" ID="ID_304064830" MODIFIED="1510296288645" TEXT="Events">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046615005" ID="ID_794156476" MODIFIED="1510060280512" TEXT="USB_DEVICE_ADD">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046616157" ID="ID_292143750" MODIFIED="1510060280512" TEXT="USB_DEVICE_REMOVE">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046619252" ID="ID_1445111473" MODIFIED="1510060280512" TEXT="USB_BUS_ADD">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046622372" ID="ID_46103952" MODIFIED="1510060280512" TEXT="USB_BUS_REMOVE">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510046767754" FOLDED="true" ID="ID_912665829" MODIFIED="1510296288645" TEXT="Steps">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046771761" ID="ID_1047209668" MODIFIED="1510060280512" TEXT="usb_register_notify() called by subscribers">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046798630" ID="ID_1303659069" MODIFIED="1510060280512" TEXT="device is added to system">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046807933" ID="ID_688257660" MODIFIED="1510060280512" TEXT="usb_notify_add_device() called by usb-generic framework">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046854047" ID="ID_1030470395" MODIFIED="1510060280512" TEXT="traverses the usb_notification_list to pass information">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510046984702" FOLDED="true" ID="ID_1350733588" MODIFIED="1510303348549" POSITION="right" TEXT="Device File System">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-6"/>
<node COLOR="#00b439" CREATED="1510047012235" FOLDED="true" ID="ID_92763633" LINK="VFS.png" MODIFIED="1510296288710" TEXT="VFS">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510047014843" ID="ID_1028087486" MODIFIED="1510047018838" TEXT="Virtual File System">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510047019538" ID="ID_403201433" MODIFIED="1510047030117" TEXT="Provide file system interface to user space app">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510047035184" ID="ID_1341453079" MODIFIED="1510047044171" TEXT="Allow app to access kernel internals">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510047171119" FOLDED="true" ID="ID_1316534966" MODIFIED="1510296288646" TEXT="Data structures">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510047182133" ID="ID_483777711" MODIFIED="1510060280512" TEXT="Dentries">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510047187133" ID="ID_1748190359" MODIFIED="1510060280512" TEXT="Files">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510047188604" ID="ID_780771007" MODIFIED="1510060463502" TEXT="Inodes - Index Node">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510047190716" ID="ID_760318767" MODIFIED="1510060546175" TEXT="Super blocks">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510060352165" FOLDED="true" ID="ID_906914934" MODIFIED="1510296288646" TEXT="Super Block">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510060557530" ID="ID_500474350" MODIFIED="1510060558367" TEXT="root of file system">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060579266" FOLDED="true" ID="ID_1496032148" MODIFIED="1510110486023" TEXT="struct super_block">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510060197459" FOLDED="true" ID="ID_1359016476" MODIFIED="1510110486023" TEXT="struct super_operations">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510060388954" ID="ID_225567499" MODIFIED="1510060400816" TEXT="# methods to manage an inode">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060371810" ID="ID_1460007326" MODIFIED="1510060426999" TEXT="(*alloc_inode)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060376258" ID="ID_192000299" MODIFIED="1510060435168" TEXT="(*destroy_inode)(..)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060406842" ID="ID_1320654337" MODIFIED="1510060420976" TEXT="(*dirty_inode)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060404602" ID="ID_1479057083" MODIFIED="1510060442303" TEXT="(*write_inode)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
</node>
<node COLOR="#990000" CREATED="1510060472450" FOLDED="true" ID="ID_646826890" MODIFIED="1510296288647" TEXT="Inode">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510060532018" FOLDED="true" ID="ID_289939970" MODIFIED="1510110486024" TEXT="struct inode_operations">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510060600394" ID="ID_367492804" MODIFIED="1510060606126" TEXT="(*create)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060608841" ID="ID_1647870713" MODIFIED="1510060620864" TEXT="(*loopup)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060658665" ID="ID_1647507373" MODIFIED="1510060665326" TEXT="(*link)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060665570" ID="ID_1117602703" MODIFIED="1510060667623" TEXT="(*unlink)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510060480722" ID="ID_1242403636" MODIFIED="1510060485111" TEXT="file or directory object">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060487570" ID="ID_1577731754" MODIFIED="1510060491519" TEXT="file metadata ">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060495786" ID="ID_528026830" MODIFIED="1510060496887" TEXT="length">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060497130" ID="ID_1207312437" MODIFIED="1510060497711" TEXT="time">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060499690" ID="ID_1876627668" MODIFIED="1510060503663" TEXT="ownership">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060508428" ID="ID_974256001" MODIFIED="1510060520584" TEXT="allocated by slab allocator from inode cache">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510060682138" FOLDED="true" ID="ID_505359490" MODIFIED="1510296288648" TEXT="File">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510060684498" FOLDED="true" ID="ID_684682683" MODIFIED="1510110486042" TEXT="struct file_operations">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510060710426" ID="ID_683800585" MODIFIED="1510060715743" TEXT="(*open)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060715986" ID="ID_336031703" MODIFIED="1510060725567" TEXT="(*read)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060720514" ID="ID_881866770" MODIFIED="1510060730151" TEXT="(*write)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060721778" ID="ID_1630727695" MODIFIED="1510060733231" TEXT="(*close)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510060742458" ID="ID_957830144" MODIFIED="1510060748824" TEXT="How to manage informat in a file">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510060814298" ID="ID_1110115173" MODIFIED="1510060963135" TEXT="int register_filesystem(struct file_system_type*)">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510060824850" ID="ID_1034916061" MODIFIED="1510060965600" TEXT="int unregister_filesystem(struct file_system_type*)">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510061045842" FOLDED="true" ID="ID_412243127" MODIFIED="1510296288649" TEXT="stuct file_system_type">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510061050595" ID="ID_1385555106" MODIFIED="1510061052239" TEXT="name">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510061052466" ID="ID_1593789878" MODIFIED="1510061064632" TEXT="int (*get_sb)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510061065026" ID="ID_1081727240" MODIFIED="1510061069832" TEXT="int (*kill_sb)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
<node COLOR="#00b439" CREATED="1510061081706" FOLDED="true" ID="ID_963577582" MODIFIED="1510296288713" TEXT="USB Device File System">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510061133562" ID="ID_1692838294" MODIFIED="1510061134784" TEXT="usbfs">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510061172690" FOLDED="true" ID="ID_1270050026" MODIFIED="1510296288649" TEXT="Implement files">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510061176562" ID="ID_296413784" MODIFIED="1510061205046" TEXT="inode.c - VFS framework">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510061179930" ID="ID_514041099" MODIFIED="1510061216912" TEXT="devices.c - file operations">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510061185674" ID="ID_1855311708" MODIFIED="1510061218719" TEXT="devio.c -file operations">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510061243434" FOLDED="true" ID="ID_183785754" MODIFIED="1510296288650" TEXT="USB VFS Framework - Device File System">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510061251986" FOLDED="true" ID="ID_1090300471" MODIFIED="1510110486046" TEXT="VFS">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510061293818" FOLDED="true" ID="ID_408941058" MODIFIED="1510110486046" TEXT="File Operations">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510061305874" ID="ID_1879002968" MODIFIED="1510061309982" TEXT="Device File Operations">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510061310266" ID="ID_610872553" MODIFIED="1510061315007" TEXT="Device/Bus File Operations">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510061296466" ID="ID_1120765890" MODIFIED="1510061302846" TEXT="SUper Block/Inode Operations">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510061283346" ID="ID_31935775" MODIFIED="1510061290415" TEXT="Linux USB Device File Management">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510061383562" FOLDED="true" ID="ID_632555716" MODIFIED="1510296288650" TEXT="usbfs_init()">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510061431962" ID="ID_288103088" MODIFIED="1510061452695" TEXT="register USB notification usbfs_nb">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510061444690" ID="ID_1236571663" MODIFIED="1510061772886" TEXT="usbfs_notify receive events for device/usb bus addition and removal">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510061780274" ID="ID_1936431199" MODIFIED="1510061793887" TEXT="USB file creation">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510061403362" ID="ID_1194205168" MODIFIED="1510061403886" TEXT="usbfs_cleanup">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510061858010" FOLDED="true" ID="ID_351316051" MODIFIED="1510296288651" TEXT="Init Flow of USB VFS">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510061883618" ID="ID_335756743" MODIFIED="1510061905001" TEXT="usbfs_init() called by usbcore">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510061908403" ID="ID_1538717648" MODIFIED="1510061920023" TEXT="register USB File System and notifier callback">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510061949682" ID="ID_28490143" MODIFIED="1510061978744" TEXT="triggers creation of super block objects - usb_get_sb()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510061978979" ID="ID_1308879656" MODIFIED="1510061985127" TEXT="usbfs_fill_super()">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510062024154" FOLDED="true" ID="ID_219910643" MODIFIED="1510296288651" TEXT="devices file life cycle">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510062052498" ID="ID_1157716795" MODIFIED="1510062056031" TEXT="Add bus">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062056274" ID="ID_662486971" MODIFIED="1510062079007" TEXT="usbfs_notify()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062062338" ID="ID_49218638" MODIFIED="1510062076647" TEXT="usbfs_add_bus()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062067482" ID="ID_1222063352" MODIFIED="1510062074614" TEXT="create_spedical_files()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062081731" ID="ID_1772792254" MODIFIED="1510062092919" TEXT="fs_create_file() - usbfs_device_fops">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062093179" ID="ID_158612766" MODIFIED="1510062100815" TEXT="new_inode">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062103369" ID="ID_438416353" MODIFIED="1510062116192" TEXT="inode-&gt;i_fop = &amp;usbfs_devices_fops">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062120778" ID="ID_616894613" MODIFIED="1510062124526" TEXT="--&gt;read">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062124843" ID="ID_1815843405" MODIFIED="1510062140415" TEXT="usb_device_read()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062131697" ID="ID_285692483" MODIFIED="1510062139047" TEXT="usb_device_dump()">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
<node COLOR="#00b439" CREATED="1510062174738" FOLDED="true" ID="ID_1130954871" MODIFIED="1510296288715" TEXT="Creating USB File System">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510062193834" FOLDED="true" ID="ID_1535248698" MODIFIED="1510296288652" TEXT="struct file_system_type usb_fs_type">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510062219642" ID="ID_1121551095" MODIFIED="1510103601249" TEXT=".name = &quot;usbfs&quot;">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062208274" ID="ID_882595627" MODIFIED="1510103605609" TEXT="usb_get_sb()">
<arrowlink DESTINATION="ID_1047829574" ENDARROW="Default" ENDINCLINATION="175;0;" ID="Arrow_ID_1428275103" STARTARROW="None" STARTINCLINATION="175;0;"/>
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062212642" ID="ID_39241913" MODIFIED="1510062363087" TEXT="kill_litter_super() - clean data structure when file is unmounted">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510062296674" FOLDED="true" ID="ID_182414936" MODIFIED="1510296288653" TEXT="registe_file_system(&amp;usb_fs_type)">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510103557619" FOLDED="true" ID="ID_391583634" MODIFIED="1510110486050" TEXT="called by usbfs_init()">
<node COLOR="#111111" CREATED="1510103571484" ID="ID_663313713" MODIFIED="1510103572879" TEXT="called by usb_init()"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510062381738" FOLDED="true" ID="ID_1047829574" MODIFIED="1510296288653" TEXT="usb_get_sb() is triggered">
<linktarget COLOR="#b0b0b0" DESTINATION="ID_1047829574" ENDARROW="Default" ENDINCLINATION="175;0;" ID="Arrow_ID_1428275103" SOURCE="ID_882595627" STARTARROW="None" STARTINCLINATION="175;0;"/>
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510062390698" ID="ID_1006392849" MODIFIED="1510103670045" TEXT="call get_sb_single(usbfs_fill_super)">
<arrowlink DESTINATION="ID_187111345" ENDARROW="Default" ENDINCLINATION="296;0;" ID="Arrow_ID_1216876402" STARTARROW="None" STARTINCLINATION="296;0;"/>
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510103664537" FOLDED="true" ID="ID_187111345" MODIFIED="1510296288653" TEXT="usbfs_fill_super()">
<linktarget COLOR="#b0b0b0" DESTINATION="ID_187111345" ENDARROW="Default" ENDINCLINATION="296;0;" ID="Arrow_ID_1216876402" SOURCE="ID_1006392849" STARTARROW="None" STARTINCLINATION="296;0;"/>
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510103804077" ID="ID_1437671688" MODIFIED="1510103823056" TEXT="sb-&gt;s_magic = USBDEVICE_SUPER_MAGIC;"/>
<node COLOR="#111111" CREATED="1510103768680" ID="ID_1912698047" MODIFIED="1510103954811" TEXT="sb-&gt;s_op = &amp;usbfs_ops # for root directory">
<arrowlink DESTINATION="ID_1739527563" ENDARROW="Default" ENDINCLINATION="75;0;" ID="Arrow_ID_1547943190" STARTARROW="None" STARTINCLINATION="75;0;"/>
</node>
<node COLOR="#111111" CREATED="1510103913779" ID="ID_1566228107" MODIFIED="1510103916008" TEXT="inode = usbfs_get_inode(sb, S_IFDIR | 0755, 0)"/>
</node>
<node COLOR="#990000" CREATED="1510103696988" FOLDED="true" ID="ID_1739527563" MODIFIED="1510296288661" TEXT="struct super_operations usbfs_ops">
<linktarget COLOR="#b0b0b0" DESTINATION="ID_1739527563" ENDARROW="Default" ENDINCLINATION="75;0;" ID="Arrow_ID_1547943190" SOURCE="ID_1912698047" STARTARROW="None" STARTINCLINATION="75;0;"/>
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510103710836" ID="ID_1619817732" MODIFIED="1510103735629" TEXT=".statfs = simple_statfs"/>
<node COLOR="#111111" CREATED="1510103735639" ID="ID_1117046" MODIFIED="1510103735640" TEXT=".drop_inode = generic_delete_inode"/>
<node COLOR="#111111" CREATED="1510103735634" ID="ID_1639358922" MODIFIED="1510103735639" TEXT=".remount_fs = remount"/>
<node COLOR="#111111" CREATED="1510103735630" ID="ID_1867100775" MODIFIED="1510103735633" TEXT=".show_options = usbfs_show_options"/>
</node>
<node COLOR="#990000" CREATED="1510103923580" FOLDED="true" ID="ID_14120641" MODIFIED="1510296288661" TEXT="struct inode *usbfs_get_inode(...)">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510103991073" ID="ID_332045685" MODIFIED="1510104036033" TEXT="case S_IFDIR:&#xa;inode-&gt;i_op = &amp;simple_dir_inode_operations;&#xa;inode-&gt;i_fop = &amp;simple_dir_operations;"/>
</node>
<node COLOR="#990000" CREATED="1510104081720" FOLDED="true" ID="ID_887573806" MODIFIED="1510296288661" TEXT="create_special_files()">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510104131507" FOLDED="true" ID="ID_236644690" MODIFIED="1510110486052" TEXT="Called by usbfs_add_bus()">
<node COLOR="#111111" CREATED="1510104162830" FOLDED="true" ID="ID_422378011" MODIFIED="1510110486051" TEXT="Called by usbfs_notify()">
<node COLOR="#111111" CREATED="1510104179847" ID="ID_572630601" MODIFIED="1510104194725" TEXT="usbfs_nb.notifier_call = usbfs_notify"/>
</node>
</node>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510104319369" FOLDED="true" ID="ID_1410913176" MODIFIED="1510303348559" POSITION="right" TEXT="Power Management">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-7"/>
<node COLOR="#00b439" CREATED="1510108083695" FOLDED="true" ID="ID_1844639164" MODIFIED="1510296288716" TEXT="Suspended mode">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510108258108" FOLDED="true" ID="ID_318819933" MODIFIED="1510296288662" TEXT="where">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510108265276" ID="ID_1356392121" MODIFIED="1510108267497" TEXT="globally"/>
<node COLOR="#111111" CREATED="1510108275557" ID="ID_843221151" MODIFIED="1510108279722" TEXT="interface level"/>
</node>
<node COLOR="#990000" CREATED="1510108285093" FOLDED="true" ID="ID_163716599" MODIFIED="1510296288662" TEXT="when">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510108289862" ID="ID_1864561618" MODIFIED="1510108295355" TEXT="no bus activity"/>
</node>
<node COLOR="#990000" CREATED="1510108300767" FOLDED="true" ID="ID_693292416" MODIFIED="1510296288663" TEXT="resume">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510108302935" ID="ID_868808972" MODIFIED="1510108309868" TEXT="remote wakeup"/>
<node COLOR="#111111" CREATED="1510108320120" ID="ID_555255962" MODIFIED="1510108324525" TEXT="not all device support"/>
<node COLOR="#111111" CREATED="1510108328665" ID="ID_1411712352" MODIFIED="1510108333622" TEXT="check in descriptor"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510108357835" FOLDED="true" ID="ID_272560484" MODIFIED="1510296288717" TEXT="Linux PM">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510108370076" FOLDED="true" ID="ID_893513665" MODIFIED="1510296288663" TEXT="Models">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510108371612" FOLDED="true" ID="ID_780484447" MODIFIED="1510110486061" TEXT="System sleep model">
<node COLOR="#111111" CREATED="1510108392605" ID="ID_1596740402" MODIFIED="1510108453415" TEXT="Complete system goest to low power model"/>
</node>
<node COLOR="#111111" CREATED="1510108379613" FOLDED="true" ID="ID_1127119980" MODIFIED="1510110486061" TEXT="Runtime PM model">
<node COLOR="#111111" CREATED="1510108414807" ID="ID_1784578311" MODIFIED="1510108455118" TEXT="Indifidual driver go into power save mode when system is running"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510108440121" FOLDED="true" ID="ID_21501781" MODIFIED="1510296288663" TEXT="Phases">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510108476261" ID="ID_1052135750" MODIFIED="1510108477120" TEXT="bus"/>
<node COLOR="#111111" CREATED="1510108477532" ID="ID_21998127" MODIFIED="1510108478496" TEXT="device"/>
<node COLOR="#111111" CREATED="1510108479060" ID="ID_217536605" MODIFIED="1510108480176" TEXT="class"/>
<node COLOR="#111111" CREATED="1510108489716" FOLDED="true" ID="ID_1921256841" MODIFIED="1510110486061" TEXT="suspend operation order">
<node COLOR="#111111" CREATED="1510108500734" ID="ID_473803762" MODIFIED="1510108505098" TEXT="class"/>
<node COLOR="#111111" CREATED="1510108505341" ID="ID_1735180081" MODIFIED="1510108506458" TEXT="device"/>
<node COLOR="#111111" CREATED="1510108506766" ID="ID_1153539768" MODIFIED="1510108508786" TEXT="bus"/>
</node>
<node COLOR="#111111" CREATED="1510108510118" FOLDED="true" ID="ID_9563361" MODIFIED="1510110486061" TEXT="resume operation order">
<node COLOR="#111111" CREATED="1510108519047" ID="ID_72862691" MODIFIED="1510108519835" TEXT="bus"/>
<node COLOR="#111111" CREATED="1510108520071" ID="ID_165045404" MODIFIED="1510108520988" TEXT="device"/>
<node COLOR="#111111" CREATED="1510108521247" ID="ID_724349591" MODIFIED="1510108522259" TEXT="class"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510108532168" FOLDED="true" ID="ID_1103522566" MODIFIED="1510296288664" TEXT="struct dev_pm_ops">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510108607046" ID="ID_1724037690" MODIFIED="1510108618419" TEXT="# System sleep callbacks"/>
<node COLOR="#111111" CREATED="1510108544185" ID="ID_313590400" MODIFIED="1510108558694" TEXT="int (*prepare)(struct device*)"/>
<node COLOR="#111111" CREATED="1510108563914" ID="ID_1559635465" MODIFIED="1510108567495" TEXT="int (*suspend)(struct device*)"/>
<node COLOR="#111111" CREATED="1510108567730" ID="ID_176181396" MODIFIED="1510108571439" TEXT="int (*resume)(struct device*)"/>
<node COLOR="#111111" CREATED="1510108573340" ID="ID_254489515" MODIFIED="1510108574120" TEXT="..."/>
<node COLOR="#111111" CREATED="1510108619910" ID="ID_590501639" MODIFIED="1510108627867" TEXT="# Runtime sleep callbacks"/>
<node COLOR="#111111" CREATED="1510108628927" ID="ID_1804684732" MODIFIED="1510108629876" TEXT="int (*runtime_suspend)(struct device *dev)"/>
<node COLOR="#111111" CREATED="1510108636687" ID="ID_1309457720" MODIFIED="1510108637228" TEXT="int (*runtime_resume)(struct device *dev)"/>
<node COLOR="#111111" CREATED="1510108642962" ID="ID_213692187" MODIFIED="1510108643397" TEXT="int (*runtime_idle)(struct device *dev)"/>
</node>
<node COLOR="#990000" CREATED="1510108669522" FOLDED="true" ID="ID_869706075" MODIFIED="1510296288665" TEXT="Wrapper functions">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510108673802" ID="ID_1962385162" MODIFIED="1510108678215" TEXT="int pm_runtime_suspend(struct device *dev)"/>
<node COLOR="#111111" CREATED="1510108686699" ID="ID_753353528" MODIFIED="1510108687263" TEXT="int pm_runtime_resume(struct device *dev)"/>
<node COLOR="#111111" CREATED="1510108692851" ID="ID_1388127125" MODIFIED="1510108693400" TEXT="int pm_runtime_idle(struct device *dev)"/>
<node COLOR="#111111" CREATED="1510108712990" ID="ID_1284298902" MODIFIED="1510108713426" TEXT="void pm_runtime_enable(struct device *dev)"/>
<node COLOR="#111111" CREATED="1510108718045" ID="ID_1838422269" MODIFIED="1510108718490" TEXT="void pm_runtime_disable(struct device *dev)"/>
<node COLOR="#111111" CREATED="1510108726902" ID="ID_161418742" MODIFIED="1510108728107" TEXT="int pm_runtime_set_active(struct device *dev)"/>
</node>
<node COLOR="#990000" CREATED="1510108772443" FOLDED="true" ID="ID_807664474" MODIFIED="1510296288665" TEXT="struct dev_pm_info">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510108780314" ID="ID_316288139" MODIFIED="1510108789415" TEXT="# hold key power management framework related information"/>
<node COLOR="#111111" CREATED="1510108811388" ID="ID_1984029765" MODIFIED="1510108824066" TEXT="# maintanin the device&apos;s power management states"/>
<node COLOR="#111111" CREATED="1510108841846" ID="ID_587964757" MODIFIED="1510108844763" TEXT="enum dpm_state"/>
<node COLOR="#111111" CREATED="1510108845679" ID="ID_625177472" MODIFIED="1510108849532" TEXT="enum rpm_status"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510108858752" FOLDED="true" ID="ID_682058887" MODIFIED="1510296288719" TEXT="Linux USB PM">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510109125475" FOLDED="true" ID="ID_320638472" MODIFIED="1510296288666" TEXT="Enable">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510109156774" ID="ID_782706774" MODIFIED="1510109160346" TEXT="CONFIG_USB_SUSPENDED"/>
<node COLOR="#111111" CREATED="1510109161279" ID="ID_1769977041" MODIFIED="1510109164475" TEXT="CONFIG_PM_TIMETIME"/>
<node COLOR="#111111" CREATED="1510109164870" ID="ID_606528414" MODIFIED="1510109166147" TEXT="CONFIG_SUSPEND"/>
</node>
<node COLOR="#990000" CREATED="1510109195568" FOLDED="true" ID="ID_1248974518" LINK="Linux%20USB%20Host%20PM.png" MODIFIED="1510296288666" TEXT="Linux USB Host PM">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510109406873" FOLDED="true" ID="ID_749211680" MODIFIED="1510110486066" TEXT="USB PM">
<node COLOR="#111111" CREATED="1510109412528" ID="ID_69108404" MODIFIED="1510109415270" TEXT="Device PM"/>
<node COLOR="#111111" CREATED="1510109416169" ID="ID_1133718089" MODIFIED="1510109419902" TEXT="Bus PM"/>
</node>
<node COLOR="#111111" CREATED="1510109409256" FOLDED="true" ID="ID_586509841" MODIFIED="1510110486066" TEXT="Linux PM">
<node COLOR="#111111" CREATED="1510109421161" ID="ID_983824427" MODIFIED="1510109423990" TEXT="Runtime PM"/>
<node COLOR="#111111" CREATED="1510109424289" ID="ID_685693017" MODIFIED="1510109425910" TEXT="System PM"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510109458748" FOLDED="true" ID="ID_863915667" MODIFIED="1510296288667" TEXT="struct dev_pm_ops usb_bus_pm_ops">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510109472133" ID="ID_817786202" MODIFIED="1510109482914" TEXT=".runtime_suspend = usb_runtime_suspend"/>
<node COLOR="#111111" CREATED="1510109482914" ID="ID_1695776278" MODIFIED="1510109493748" TEXT=".runtime_resume = usb_runtime_resume"/>
<node COLOR="#111111" CREATED="1510109493749" ID="ID_964799599" MODIFIED="1510109497108" TEXT=".runtime_idle = usb_runtime_idle"/>
</node>
<node COLOR="#990000" CREATED="1510109504176" FOLDED="true" ID="ID_1531124838" MODIFIED="1510296288667" TEXT="struct dev_pm_ops usb_device_pm_ops">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510109517056" ID="ID_1857546651" MODIFIED="1510109568618" TEXT=".prepare = usb_dev_prepare"/>
<node COLOR="#111111" CREATED="1510109568621" ID="ID_246816817" MODIFIED="1510109568622" TEXT=".complete = usb_dev_complete"/>
<node COLOR="#111111" CREATED="1510109568621" ID="ID_1146524294" MODIFIED="1510109568621" TEXT=".suspend = usb_dev_suspend"/>
<node COLOR="#111111" CREATED="1510109568620" ID="ID_970634602" MODIFIED="1510109568621" TEXT=".resume = usb_dev_resume"/>
<node COLOR="#111111" CREATED="1510109568620" ID="ID_1140612836" MODIFIED="1510109568620" TEXT=".freeze = usb_dev_freeze"/>
<node COLOR="#111111" CREATED="1510109568619" ID="ID_1057336360" MODIFIED="1510109568620" TEXT=".thaw = usb_dev_thaw"/>
<node COLOR="#111111" CREATED="1510109568619" ID="ID_1650619937" MODIFIED="1510109568619" TEXT=".poweroff = usb_dev_poweroff"/>
<node COLOR="#111111" CREATED="1510109568618" ID="ID_1233104671" MODIFIED="1510109568618" TEXT=".restore = usb_dev_restore,"/>
</node>
<node COLOR="#990000" CREATED="1510109705103" FOLDED="true" ID="ID_403908511" MODIFIED="1510296288668" TEXT="APIs">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510109606935" ID="ID_1939678288" MODIFIED="1510109708948" TEXT="int usb_enable_autosuspend(struct usb_device *udev)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510109619088" ID="ID_76223882" MODIFIED="1510109711387" TEXT="int usb_disable_autosuspend(struct usb_device *udev)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510109628128" ID="ID_990419076" MODIFIED="1510109711388" TEXT="int usb_autopm_get_interface(struct usb_interface *intf);">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510109643842" ID="ID_692250112" MODIFIED="1510109711389" TEXT="void usb_autopm_put_interface(struct usb_interface *intf);">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510109674604" ID="ID_1163223515" MODIFIED="1510109711390" TEXT="void usb_autopm_get_interface_no_resume(struct usb_interface *intf)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510109695886" ID="ID_1554827108" MODIFIED="1510109711392" TEXT="void usb_autopm_put_interface_no_suspend(struct usb_interface *intf)">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510109730416" FOLDED="true" ID="ID_1789551884" LINK="USB%20runtime%20PM%20Setup.png" MODIFIED="1510296288668" TEXT="Runtime PM setup">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510109777595" ID="ID_1354466760" MODIFIED="1510109800810" TEXT="Register dev_pm_ops"/>
<node COLOR="#111111" CREATED="1510109809966" ID="ID_1043833385" MODIFIED="1510109823059" TEXT="usb_probe_interface/usb_driver/claim_interface"/>
<node COLOR="#111111" CREATED="1510109823487" ID="ID_1548611868" MODIFIED="1510109842333" TEXT="pm_runtime_set_active()"/>
<node COLOR="#111111" CREATED="1510109829359" ID="ID_914262493" MODIFIED="1510109840981" TEXT="pm_runtime_enable()"/>
<node COLOR="#111111" CREATED="1510109833472" ID="ID_929014524" MODIFIED="1510109839636" TEXT="usb_autosuspend_device()"/>
</node>
<node COLOR="#990000" CREATED="1510109956993" FOLDED="true" ID="ID_1879003939" LINK="Runtime%20suspend%20device.png" MODIFIED="1510296288669" TEXT="Runtime suspend device">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510110053640" ID="ID_1492367665" MODIFIED="1510110065437" TEXT="usb_enable_autosuspend()"/>
<node COLOR="#111111" CREATED="1510110071041" ID="ID_1563169854" MODIFIED="1510110076206" TEXT="pm_schedule_suspend"/>
<node COLOR="#111111" CREATED="1510110078466" ID="ID_1205569956" MODIFIED="1510110082182" TEXT="usb_runtime_suspend"/>
<node COLOR="#111111" CREATED="1510110083226" ID="ID_482215635" MODIFIED="1510110087071" TEXT="usb_suspend_both"/>
<node COLOR="#111111" CREATED="1510110088186" ID="ID_1836953128" MODIFIED="1510110091367" TEXT="usb_suspend_interface"/>
<node COLOR="#111111" CREATED="1510110096043" ID="ID_1716929366" MODIFIED="1510110099696" TEXT="usb_suspend_device"/>
<node COLOR="#111111" CREATED="1510110101356" ID="ID_1909000589" MODIFIED="1510110103880" TEXT="usb_port_suspend"/>
<node COLOR="#111111" CREATED="1510110104604" ID="ID_638082682" MODIFIED="1510110108561" TEXT="usb_control_msg"/>
</node>
<node COLOR="#990000" CREATED="1510109993668" ID="ID_1831047915" LINK="Runtime%20resume%20device.png" MODIFIED="1510110026909" TEXT="Runtime resume device">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510110142198" FOLDED="true" ID="ID_467807481" MODIFIED="1510296288669" TEXT="System PM">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510110148319" FOLDED="true" ID="ID_728528784" MODIFIED="1510110486071" TEXT="hcd_bus_suspend()">
<node COLOR="#111111" CREATED="1510110165720" ID="ID_120920581" MODIFIED="1510110177405" TEXT="ehci_bus_suspend()"/>
</node>
<node COLOR="#111111" CREATED="1510110154623" FOLDED="true" ID="ID_1088165760" MODIFIED="1510110486071" TEXT="hcd_bus_resume()">
<node COLOR="#111111" CREATED="1510110171451" ID="ID_516744295" MODIFIED="1510110175917" TEXT="ehci_bus_resume()"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510110194186" FOLDED="true" ID="ID_1819417894" MODIFIED="1510296288670" TEXT="Setup Linux-USB PM">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510110202891" ID="ID_247851795" MODIFIED="1510110205111" TEXT="via sysfs"/>
<node COLOR="#111111" CREATED="1510110220420" FOLDED="true" ID="ID_1255269711" MODIFIED="1510110486072" TEXT="/sys/module/usbcore/parameters/autosuspend">
<node COLOR="#111111" CREATED="1510110235789" ID="ID_657865663" MODIFIED="1510110250259" TEXT="idle seconds before suspend mode"/>
</node>
<node COLOR="#111111" CREATED="1510110258167" FOLDED="true" ID="ID_1173820952" MODIFIED="1510110450786" TEXT="/sys/bus/usb/devices">
<node COLOR="#111111" CREATED="1510110269592" ID="ID_1136438297" MODIFIED="1510110303135" TEXT="wakeup - whether the device support remote wakeup"/>
<node COLOR="#111111" CREATED="1510110271248" ID="ID_1426733713" MODIFIED="1510110328120" TEXT="level - whether it can be auto suspended"/>
<node COLOR="#111111" CREATED="1510110272448" ID="ID_1762360377" MODIFIED="1510110344146" TEXT="autosuspend - number of seconds before auto suspend it"/>
</node>
<node COLOR="#111111" CREATED="1510110373119" ID="ID_644900714" MODIFIED="1510110453442" TEXT="By USBMON"/>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510110490584" FOLDED="true" ID="ID_824591938" MODIFIED="1510302584619" POSITION="right" TEXT="HUB">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-8"/>
<node COLOR="#00b439" CREATED="1510110656884" ID="ID_232720980" MODIFIED="1510110668353" TEXT="Host controller is integrated with a root hub">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
</node>
<node COLOR="#00b439" CREATED="1510110716857" FOLDED="true" ID="ID_291234476" MODIFIED="1510296288722" TEXT="virtual ROOT hub framwork">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510110737186" ID="ID_693212382" MODIFIED="1510110739303" TEXT="hub events">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510110741419" ID="ID_1797695761" MODIFIED="1510110747247" TEXT="change requests">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510110748171" ID="ID_1682535621" MODIFIED="1510110752296" TEXT="enumeration process">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510110754244" ID="ID_440442405" MODIFIED="1510110755168" TEXT="OTG">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510110755565" ID="ID_3128423" MODIFIED="1510110756264" TEXT="PM">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510110771485" FOLDED="true" ID="ID_384926070" MODIFIED="1510296288723" TEXT="USB HUB">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510110800751" FOLDED="true" ID="ID_1596983867" MODIFIED="1510296288670" TEXT="struct usb_hub_descriptor">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510110858067" ID="ID_1446636994" MODIFIED="1510110912343" TEXT="__u8  bDescLength"/>
<node COLOR="#111111" CREATED="1510110912346" ID="ID_350241797" MODIFIED="1510110912346" TEXT="__u8  bDescriptorType"/>
<node COLOR="#111111" CREATED="1510110912346" ID="ID_360947410" MODIFIED="1510110948615" TEXT="__u8  bNbrPorts # number of ports of hub"/>
<node COLOR="#111111" CREATED="1510110912345" ID="ID_118214115" MODIFIED="1510110912346" TEXT="__le16 wHubCharacteristics"/>
<node COLOR="#111111" CREATED="1510110912345" ID="ID_1274328127" MODIFIED="1510110912345" TEXT="__u8  bPwrOn2PwrGood"/>
<node COLOR="#111111" CREATED="1510110912344" ID="ID_1839856744" MODIFIED="1510110912345" TEXT="__u8  bHubContrCurrent"/>
<node COLOR="#111111" CREATED="1510110912344" ID="ID_1643080159" MODIFIED="1510110997218" TEXT="__u8 DeviceRemovable[(USB_MAXCHILDREN + 1 + 7) / 8] #whether a port has a removable device attached"/>
<node COLOR="#111111" CREATED="1510110912343" ID="ID_1646491984" MODIFIED="1510110912344" TEXT="__u8  PortPwrCtrlMask[(USB_MAXCHILDREN + 1 + 7) / 8]"/>
</node>
<node COLOR="#990000" CREATED="1510110805391" FOLDED="true" ID="ID_965968375" MODIFIED="1510296288671" TEXT="struct usb_tt">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510111038912" ID="ID_972363351" MODIFIED="1510111051374" TEXT="# Transaction Translator"/>
<node COLOR="#111111" CREATED="1510111125167" ID="ID_1587804705" MODIFIED="1510111125723" TEXT="struct usb_device&#x9;*hub;&#x9;/* upstream highspeed hub */"/>
<node COLOR="#111111" CREATED="1510111131007" ID="ID_1051964881" MODIFIED="1510111131524" TEXT="int&#x9;&#x9;&#x9;multi;&#x9;/* true means one TT per port */"/>
<node COLOR="#111111" CREATED="1510111137512" ID="ID_1709704682" MODIFIED="1510111138092" TEXT="unsigned&#x9;&#x9;think_time;&#x9;/* think time in ns */"/>
</node>
<node COLOR="#990000" CREATED="1510110810768" FOLDED="true" ID="ID_1034241286" MODIFIED="1510296288671" TEXT="struct usb_hub">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510111176219" ID="ID_1179799814" MODIFIED="1510111197449" TEXT="# internal use, manage events and requests"/>
<node COLOR="#111111" CREATED="1510111234751" ID="ID_176150816" LINK="HUB%20events%20and%20system%20Sw.png" MODIFIED="1510111249079" TEXT="relationship"/>
<node COLOR="#111111" CREATED="1510111284531" ID="ID_1986303303" MODIFIED="1510111285161" TEXT="struct list_head event_list;"/>
<node COLOR="#111111" CREATED="1510111285795" ID="ID_1615971353" MODIFIED="1510111289655" TEXT="unsigned long event_bits[1];"/>
<node COLOR="#111111" CREATED="1510111325741" ID="ID_1749840966" MODIFIED="1510111333059" TEXT="unsigned long change_bits[1]; "/>
<node COLOR="#111111" CREATED="1510111334422" ID="ID_1272725651" MODIFIED="1510111340611" TEXT="unsigned long busy_bits[1]; "/>
<node COLOR="#111111" CREATED="1510111340863" ID="ID_66208655" MODIFIED="1510111346212" TEXT="unsigned long removed_bits[1]; "/>
<node COLOR="#111111" CREATED="1510111319125" ID="ID_757883547" MODIFIED="1510111319563" TEXT="struct usb_hub_descriptor *descriptor;"/>
<node COLOR="#111111" CREATED="1510111313261" ID="ID_29720246" MODIFIED="1510111313713" TEXT="struct usb_tt tt;"/>
</node>
<node COLOR="#990000" CREATED="1510111161914" ID="ID_1484982329" MODIFIED="1510111169439" TEXT="khubd - HUB daemon">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510111380993" ID="ID_127063177" MODIFIED="1510111381590" TEXT="void usb_set_device_state(struct usb_device *udev, enum usb_device_ state new_state)">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510111391379" ID="ID_843521222" MODIFIED="1510111391967" TEXT="int usb_hub_clear_tt_buffer(struct urb *urb)">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510111407644" ID="ID_1673043886" MODIFIED="1510111408168" TEXT="int usb_reset_device(struct usb_device *udev)">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510111427063" ID="ID_784268134" MODIFIED="1510111427513" TEXT="void usb_queue_reset_device(struct usb_interface *iface)">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510111447711" FOLDED="true" ID="ID_1461669432" MODIFIED="1510296288724" TEXT="USB HUB Framework">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510111486986" FOLDED="true" ID="ID_1686688247" MODIFIED="1510296288672" TEXT="Linux USB Hub">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510111496146" FOLDED="true" ID="ID_1671562326" MODIFIED="1510125291086" TEXT="Hub Driver">
<node COLOR="#111111" CREATED="1510111621636" ID="ID_1122772862" MODIFIED="1510111630528" TEXT="probe and identifies hub devices"/>
</node>
<node COLOR="#111111" CREATED="1510111499418" ID="ID_1575172529" MODIFIED="1510111500543" TEXT="PM"/>
<node COLOR="#111111" CREATED="1510111500770" ID="ID_1681411361" MODIFIED="1510111503346" TEXT="Enumeration"/>
<node COLOR="#111111" CREATED="1510111503618" FOLDED="true" ID="ID_807866164" MODIFIED="1510125291086" TEXT="khubd">
<node COLOR="#111111" CREATED="1510111573760" ID="ID_571470025" MODIFIED="1510111587821" TEXT="management of hub events and state changes"/>
<node COLOR="#111111" CREATED="1510111595369" ID="ID_370752078" MODIFIED="1510111599374" TEXT="kernel thread"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510111644085" FOLDED="true" ID="ID_1556795177" MODIFIED="1510296288672" TEXT="struct usb_driver hub_driver">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510111651238" ID="ID_412243152" MODIFIED="1510111700749" TEXT="# Represent a hub device"/>
<node COLOR="#111111" CREATED="1510111683696" ID="ID_1333833003" MODIFIED="1510121971876" TEXT="# Used by usb_register()">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      #0&#160;&#160;usb_hub_init () at drivers/usb/core/hub.c:3400
    </p>
    <p>
      #1&#160;&#160;0xc07b8167 in usb_init () at drivers/usb/core/usb.c:1105
    </p>
    <p>
      #2&#160;&#160;0xc0101131 in do_one_initcall (fn=&lt;value optimized out&gt;) at init/main.c:721
    </p>
    <p>
      #3&#160;&#160;0xc078b35a in do_initcalls (unused=&lt;value optimized out&gt;) at init/main.c:761
    </p>
    <p>
      #4&#160;&#160;do_basic_setup (unused=&lt;value optimized out&gt;) at init/main.c:783
    </p>
    <p>
      #5&#160;&#160;kernel_init (unused=&lt;value optimized out&gt;) at init/main.c:879
    </p>
    <p>
      #6&#160;&#160;0xc0103ea7 in ?? () at arch/x86/kernel/entry_32.S:990
    </p>
  </body>
</html></richcontent>
</node>
<node COLOR="#111111" CREATED="1510111727787" ID="ID_405964575" MODIFIED="1510111789149" TEXT=".name = &quot;hub&quot;"/>
<node COLOR="#111111" CREATED="1510111789159" ID="ID_519167320" MODIFIED="1510123360724" TEXT=" .probe = hub_probe">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3">(gdb) bt </font>
    </p>
    <p>
      <font size="3">#0&#160;&#160;hub_probe (intf=0xc70bda00, id=0xc0772780) at drivers/usb/core/hub.c:1180 </font>
    </p>
    <p>
      <font size="3">#1&#160;&#160;0xc0434f10 in usb_probe_interface (dev=0xc70bda1c) at drivers/usb/core/driver.c:250 </font>
    </p>
    <p>
      <font size="3">#2&#160;&#160;0xc03cf3af in really_probe (drv=0xc0772714, dev=0xc70bda1c) at drivers/base/dd.c:125 </font>
    </p>
    <p>
      <font size="3">#3&#160;&#160;driver_probe_device (drv=0xc0772714, dev=0xc70bda1c) at drivers/base/dd.c:208 </font>
    </p>
    <p>
      <font size="3">#4&#160;&#160;0xc03cf579 in __device_attach (drv=0xc0772714, data=0xc70bda1c) at drivers/base/dd.c:221 </font>
    </p>
    <p>
      <font size="3">#5&#160;&#160;0xc03ce6d3 in bus_for_each_drv (bus=&lt;value optimized out&gt;, start=&lt;value optimized out&gt;, data=0xc70bda1c, fn=0xc03cf530 &lt;__devic </font>
    </p>
    <p>
      <font size="3">e_attach&gt;) at drivers/base/bus.c:407 </font>
    </p>
    <p>
      <font size="3">#6&#160;&#160;0xc03cf642 in device_attach (dev=0xc70bda1c) at drivers/base/dd.c:253 </font>
    </p>
    <p>
      <font size="3">#7&#160;&#160;0xc03ce515 in bus_probe_device (dev=0xc70bda00) at drivers/base/bus.c:514 </font>
    </p>
    <p>
      <font size="3">#8&#160;&#160;0xc03cd06e in device_add (dev=0xc70bda1c) at drivers/base/core.c:961 </font>
    </p>
    <p>
      <font size="3">#9&#160;&#160;0xc0433847 in usb_set_configuration (dev=&lt;value optimized out&gt;, configuration=&lt;value optimized out&gt;) at drivers/usb/core/messag </font>
    </p>
    <p>
      <font size="3">e.c:1820 </font>
    </p>
    <p>
      <font size="3">#10 0xc043c17e in generic_probe (udev=0xc70c2400) at drivers/usb/core/generic.c:168 </font>
    </p>
    <p>
      <font size="3">#11 0xc0433b74 in usb_probe_device (dev=&lt;value optimized out&gt;) at drivers/usb/core/driver.c:169 </font>
    </p>
    <p>
      <font size="3">#12 0xc03cf3af in really_probe (drv=0xc0772f54, dev=0xc70c2464) at drivers/base/dd.c:125 </font>
    </p>
    <p>
      <font size="3">#13 driver_probe_device (drv=0xc0772f54, dev=0xc70c2464) at drivers/base/dd.c:208 </font>
    </p>
    <p>
      <font size="3">#14 0xc03cf579 in __device_attach (drv=0xc0772f54, data=0xc70c2464) at drivers/base/dd.c:221 </font>
    </p>
    <p>
      <font size="3">#15 0xc03ce6d3 in bus_for_each_drv (bus=&lt;value optimized out&gt;, start=&lt;value optimized out&gt;, data=0xc70c2464, fn=0xc03cf530 &lt;__devic </font>
    </p>
    <p>
      <font size="3">e_attach&gt;) at drivers/base/bus.c:407 </font>
    </p>
    <p>
      <font size="3">#16 0xc03cf642 in device_attach (dev=0xc70c2464) at drivers/base/dd.c:253 </font>
    </p>
    <p>
      <font size="3">#17 0xc03ce515 in bus_probe_device (dev=0xc70bda00) at drivers/base/bus.c:514 </font>
    </p>
    <p>
      <font size="3">#18 0xc03cd06e in device_add (dev=0xc70c2464) at drivers/base/core.c:961 </font>
    </p>
    <p>
      <font size="3">#19 0xc0429dd8 in usb_new_device (udev=0xc70c2400) at drivers/usb/core/hub.c:1780 </font>
    </p>
    <p>
      <font size="3">#20 0xc042fca9 in register_root_hub (hcd=0xc70c2000) at drivers/usb/core/hcd.c:976 </font>
    </p>
    <p>
      <font size="3">#21 0xc0430185 in usb_add_hcd (hcd=0xc70c2000, irqnum=11, irqflags=128) at drivers/usb/core/hcd.c:2131 </font>
    </p>
    <p>
      <font size="3">#22 0xc043d74b in usb_hcd_pci_probe (dev=0xc78d0000, id=0xc05b6ea0) at drivers/usb/core/hcd-pci.c:134 </font>
    </p>
    <p>
      <font size="3">#23 0xc0350563 in local_pci_probe (_ddi=&lt;value optimized out&gt;) at drivers/pci/pci-driver.c:292 </font>
    </p>
    <p>
      <font size="3">#24 0xc0351368 in pci_call_probe (dev=&lt;value optimized out&gt;) at drivers/pci/pci-driver.c:317 </font>
    </p>
    <p>
      <font size="3">#25 __pci_device_probe (dev=&lt;value optimized out&gt;) at drivers/pci/pci-driver.c:340 </font>
    </p>
    <p>
      <font size="3">#26 pci_device_probe (dev=&lt;value optimized out&gt;) at drivers/pci/pci-driver.c:358 </font>
    </p>
    <p>
      <font size="3">#27 0xc03cf3af in really_probe (drv=0xc0773050, dev=0xc78d0058) at drivers/base/dd.c:125 </font>
    </p>
    <p>
      <font size="3">#28 driver_probe_device (drv=0xc0773050, dev=0xc78d0058) at drivers/base/dd.c:208 </font>
    </p>
    <p>
      <font size="3">#29 0xc03cf521 in __driver_attach (dev=0xc78d0058, data=&lt;value optimized out&gt;) at drivers/base/dd.c:282 </font>
    </p>
    <p>
      <font size="3">#30 0xc03ce993 in bus_for_each_dev (bus=&lt;value optimized out&gt;, start=&lt;value optimized out&gt;, data=0xc0773050, fn=0xc03cf4a0 &lt;__drive </font>
    </p>
    <p>
      <font size="3">r_attach&gt;) at drivers/base/bus.c:298 </font>
    </p>
    <p>
      <font size="3">#31 0xc03cf24e in driver_attach (drv=0xc07726e0) at drivers/base/dd.c:301 </font>
    </p>
    <p>
      <font size="3">#32 0xc03cec15 in bus_add_driver (drv=0xc0773050) at drivers/base/bus.c:674 </font>
    </p>
    <p>
      <font size="3">#33 0xc03cf81a in driver_register (drv=0xc0773050) at drivers/base/driver.c:242 </font>
    </p>
    <p>
      <font size="3">#34 0xc03515a5 in __pci_register_driver (drv=0xc0773020, owner=0xc0772780, mod_name=0xc07726e0 &quot;^\226n\300&quot;) at drivers/pci/pci-dri </font>
    </p>
    <p>
      <font size="3">ver.c:985 </font>
    </p>
    <p>
      <font size="3">#35 0xc07b8522 in ehci_hcd_init () at drivers/usb/host/ehci-hcd.c:1184 </font>
    </p>
    <p>
      <font size="3">#36 0xc0101131 in do_one_initcall (fn=&lt;value optimized out&gt;) at init/main.c:721 </font>
    </p>
    <p>
      <font size="3">#37 0xc078b35a in do_initcalls (unused=&lt;value optimized out&gt;) at init/main.c:761 </font>
    </p>
    <p>
      <font size="3">#38 do_basic_setup (unused=&lt;value optimized out&gt;) at init/main.c:783 </font>
    </p>
    <p>
      <font size="3">#39 kernel_init (unused=&lt;value optimized out&gt;) at init/main.c:879 </font>
    </p>
    <p>
      <font size="3">#40 0xc0103ea7 in ?? () at arch/x86/kernel/entry_32.S:990</font>
    </p>
  </body>
</html></richcontent>
</node>
<node COLOR="#111111" CREATED="1510111789159" ID="ID_1456567063" MODIFIED="1510111789159" TEXT=" .disconnect = hub_disconnect"/>
<node COLOR="#111111" CREATED="1510111789158" ID="ID_886923837" MODIFIED="1510111789158" TEXT=" .suspend = hub_suspend"/>
<node COLOR="#111111" CREATED="1510111789157" ID="ID_1113635780" MODIFIED="1510111789158" TEXT=" .resume = hub_resume"/>
<node COLOR="#111111" CREATED="1510111789153" ID="ID_1468880157" MODIFIED="1510111789156" TEXT=" .reset_resume = hub_reset_resume"/>
<node COLOR="#111111" CREATED="1510111789153" ID="ID_1076396018" MODIFIED="1510111789153" TEXT=" .pre_reset = hub_pre_reset"/>
<node COLOR="#111111" CREATED="1510111789152" ID="ID_859305455" MODIFIED="1510111789152" TEXT=" .post_reset = hub_post_reset"/>
<node COLOR="#111111" CREATED="1510111789151" ID="ID_486601721" MODIFIED="1510111789151" TEXT=" .ioctl = hub_ioctl"/>
<node COLOR="#111111" CREATED="1510111789150" ID="ID_1937558664" MODIFIED="1510111789151" TEXT=" .id_table = hub_id_table"/>
<node COLOR="#111111" CREATED="1510111789149" ID="ID_1950254558" MODIFIED="1510111789150" TEXT=" .supports_autosuspend = 1"/>
</node>
<node COLOR="#990000" CREATED="1510120422908" FOLDED="true" ID="ID_1985190199" LINK="Hub%20Init.png" MODIFIED="1510296288673" TEXT="Initialization Sequence">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510120437990" ID="ID_1305374528" MODIFIED="1510120446891" TEXT="Hub driver init"/>
<node COLOR="#111111" CREATED="1510120450159" ID="ID_1451634509" MODIFIED="1510120454027" TEXT="usb_hub_init"/>
<node COLOR="#111111" CREATED="1510120454431" ID="ID_1979360427" MODIFIED="1510120457691" TEXT="usb_register"/>
<node COLOR="#111111" CREATED="1510120460143" ID="ID_857389876" MODIFIED="1510120467100" TEXT="hub_thread"/>
</node>
<node COLOR="#990000" CREATED="1510120493490" FOLDED="true" ID="ID_1066746352" LINK="Hub%20Reset.png" MODIFIED="1510296288673" TEXT="Reset Sequence">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510120528197" ID="ID_967613163" MODIFIED="1510120533477" TEXT="usb_reset_device()"/>
<node COLOR="#111111" CREATED="1510120535837" ID="ID_1267269944" MODIFIED="1510120541986" TEXT="usb_autoresume_device()"/>
<node COLOR="#111111" CREATED="1510120544317" ID="ID_1804598156" MODIFIED="1510120558708" TEXT="drv-&gt;pre_reset() # hub_driver"/>
<node COLOR="#111111" CREATED="1510120564231" ID="ID_1083733940" MODIFIED="1510120600470" TEXT="usb_reset_and_verify_device()"/>
<node COLOR="#111111" CREATED="1510120572111" ID="ID_1859695351" MODIFIED="1510120584037" TEXT="usb_ep0_reinit()"/>
<node COLOR="#111111" CREATED="1510120579120" ID="ID_1040635911" MODIFIED="1510120581837" TEXT="hub_port_init()"/>
<node COLOR="#111111" CREATED="1510120586089" ID="ID_1877445596" MODIFIED="1510120590653" TEXT="drv-&gt;post_reset()"/>
<node COLOR="#111111" CREATED="1510120592425" ID="ID_1479722082" MODIFIED="1510120598574" TEXT="usb_autosuspend_device()"/>
</node>
<node COLOR="#990000" CREATED="1510120656967" FOLDED="true" ID="ID_1981567299" LINK="Hub%20enumeration.png" MODIFIED="1510296288674" TEXT="Enumeration Sequence">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510120706873" ID="ID_1434188419" MODIFIED="1510122366845" TEXT="hub_port_connect_change()">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      #0&#160;&#160;hub_port_connect_change (hub=0xc70bdc00, port1=1, portstatus=1281, portchange=0) at drivers/usb/core/hub.c:2913
    </p>
    <p>
      #1&#160;&#160;0xc042c7df in hub_events () at drivers/usb/core/hub.c:3316
    </p>
    <p>
      #2&#160;&#160;0xc042c938 in hub_thread (__unused=0x0) at drivers/usb/core/hub.c:3364
    </p>
    <p>
      #3&#160;&#160;0xc0164854 in kthread (_create=0xc7859f44) at kernel/kthread.c:78
    </p>
    <p>
      #4&#160;&#160;0xc0103ea7 in ?? () at arch/x86/kernel/entry_32.S:990
    </p>
  </body>
</html></richcontent>
</node>
<node COLOR="#111111" CREATED="1510120714602" ID="ID_1270945463" MODIFIED="1510120732041" TEXT="usb_set_device_state() USB_STATE_POWERED"/>
<node COLOR="#111111" CREATED="1510120733036" ID="ID_936433378" MODIFIED="1510120737072" TEXT="hub_port_init()"/>
<node COLOR="#111111" CREATED="1510120739287" ID="ID_1942737591" MODIFIED="1510120742928" TEXT="hub_port_reset()"/>
<node COLOR="#111111" CREATED="1510120743756" ID="ID_803869744" MODIFIED="1510120747017" TEXT="hub_set_address()"/>
<node COLOR="#111111" CREATED="1510120747468" ID="ID_699294069" MODIFIED="1510120759770" TEXT="usb_control_msg() USB_REQ_SET_ADDRESS"/>
<node COLOR="#111111" CREATED="1510120760534" ID="ID_452186540" MODIFIED="1510120774963" TEXT="usb_set_device_state() USB_STATE_ADDRESS"/>
<node COLOR="#111111" CREATED="1510120776855" ID="ID_936558732" MODIFIED="1510120780324" TEXT="usb_new_device()"/>
<node COLOR="#111111" CREATED="1510120781903" ID="ID_906384559" MODIFIED="1510120785524" TEXT="device_add()"/>
<node COLOR="#111111" CREATED="1510120786983" ID="ID_1842189255" MODIFIED="1510120791244" TEXT="usb_create_ep_devs()"/>
<node COLOR="#111111" CREATED="1510120791528" ID="ID_143698143" MODIFIED="1510120799333" TEXT="usb_set_configuration()"/>
<node COLOR="#111111" CREATED="1510120800224" ID="ID_77121873" MODIFIED="1510120810237" TEXT="usb_set_device_state() USB_STATE_CONFIGURED"/>
</node>
<node COLOR="#990000" CREATED="1510120836283" FOLDED="true" ID="ID_275446834" MODIFIED="1510296288675" TEXT="khubd">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510120863973" ID="ID_885613065" MODIFIED="1510120866594" TEXT="# handle events"/>
<node COLOR="#111111" CREATED="1510120898616" FOLDED="true" ID="ID_1480503220" MODIFIED="1510125291088" TEXT="activity flow">
<node COLOR="#111111" CREATED="1510120903976" ID="ID_514253740" MODIFIED="1510120907332" TEXT="hub_thread"/>
<node COLOR="#111111" CREATED="1510120907768" ID="ID_320568795" MODIFIED="1510120910870" TEXT="khubd_wait"/>
<node COLOR="#111111" CREATED="1510120911377" ID="ID_1150189167" MODIFIED="1510120914565" TEXT="hub_activity"/>
<node COLOR="#111111" CREATED="1510120914817" ID="ID_155973290" MODIFIED="1510120923206" TEXT="kick_khubd"/>
<node COLOR="#111111" CREATED="1510120923714" ID="ID_383493051" MODIFIED="1510120926126" TEXT="hub_events"/>
</node>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510125209680" FOLDED="true" ID="ID_150377584" MODIFIED="1510301422126" POSITION="right" TEXT="Geniric Driver">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-9"/>
<node COLOR="#00b439" CREATED="1510125298268" FOLDED="true" ID="ID_1845648597" LINK="usbcore-generic%20framework.png" MODIFIED="1510296288729" TEXT="usbcore-generic framework">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510125372218" ID="ID_743718710" MODIFIED="1510125377950" TEXT="USB Device Drivers">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510125381298" FOLDED="true" ID="ID_1667739431" MODIFIED="1510296288675" TEXT="usbcore">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510125389787" ID="ID_1581248456" MODIFIED="1510125393543" TEXT="usbcore-generic"/>
<node COLOR="#111111" CREATED="1510125393883" ID="ID_759001709" MODIFIED="1510125398960" TEXT="HCD Interface"/>
<node COLOR="#111111" CREATED="1510125403692" ID="ID_622095191" MODIFIED="1510125410793" TEXT="Others(Power,Device  File System)"/>
</node>
<node COLOR="#990000" CREATED="1510125383963" ID="ID_630536902" MODIFIED="1510125388295" TEXT="Host Controller Driver">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510125417429" FOLDED="true" ID="ID_1914461122" MODIFIED="1510303348563" TEXT="USB Generic Driver">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510125429398" FOLDED="true" ID="ID_13827824" MODIFIED="1510296288675" TEXT="Responsibilty">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510125437422" ID="ID_1815830581" MODIFIED="1510125454476" TEXT="Managing the device"/>
<node COLOR="#111111" CREATED="1510125445559" ID="ID_1311828797" MODIFIED="1510125456452" TEXT="Managing device drivers"/>
<node COLOR="#111111" CREATED="1510125458992" ID="ID_780740084" MODIFIED="1510125465573" TEXT="Managing Flow of Information"/>
</node>
<node COLOR="#990000" CREATED="1510125501907" FOLDED="true" ID="ID_1920312482" MODIFIED="1510296288675" TEXT="struct usb_device_driver">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510125545462" ID="ID_1783951783" MODIFIED="1510125956649" TEXT="# A USB device driver">
<font BOLD="true" NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510125608427" ID="ID_988313314" MODIFIED="1510125932295" TEXT="struct usb_device_driver usb_generic_driver;"/>
<node COLOR="#111111" CREATED="1510125624380" ID="ID_954214613" MODIFIED="1510125643754" TEXT="const char *name"/>
<node COLOR="#111111" CREATED="1510126125657" ID="ID_609182638" MODIFIED="1510126127814" TEXT="# wehther a particular driver is ready to associate and manage a USB device"/>
<node COLOR="#111111" CREATED="1510125637693" ID="ID_626553727" MODIFIED="1510126276236" TEXT="int (*probe) (struct usb_device *udev);">
<font BOLD="true" NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510125660071" ID="ID_1109693319" MODIFIED="1510126278709" TEXT="void (*disconnect) (struct usb_device *udev);">
<font BOLD="true" NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510125670263" ID="ID_1323637066" MODIFIED="1510125670924" TEXT="int (*suspend) (struct usb_device *udev, pm_message_t message)"/>
<node COLOR="#111111" CREATED="1510125675632" ID="ID_596549326" MODIFIED="1510125678812" TEXT="int (*resume) (struct usb_device *udev, pm_message_t message)"/>
</node>
<node COLOR="#990000" CREATED="1510125509948" FOLDED="true" ID="ID_1478545514" MODIFIED="1510296288676" TEXT="struct usb_driver">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510125946812" ID="ID_314853246" MODIFIED="1510125953416" TEXT="# USB interface driver">
<font BOLD="true" NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510125962909" ID="ID_1699569610" MODIFIED="1510125965730" TEXT="const char *name"/>
<node COLOR="#111111" CREATED="1510126136450" ID="ID_1410298081" MODIFIED="1510126163848" TEXT="# Identifies and associates the interface of a USB device with the USB driver"/>
<node COLOR="#111111" CREATED="1510125966045" ID="ID_1306013107" MODIFIED="1510126273940" TEXT="int (*probe) (struct usb_interface *intf, const struct usb_device_id *id);">
<font BOLD="true" NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510126178533" ID="ID_956474543" MODIFIED="1510126274501" TEXT="void (*disconnect) (struct usb_interface *intf);">
<font BOLD="true" NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510126185717" ID="ID_1483595248" MODIFIED="1510126186234" TEXT="int (*ioctl) (struct usb_interface *intf, unsigned int code, void *buf);"/>
<node COLOR="#111111" CREATED="1510126197118" ID="ID_328224000" MODIFIED="1510126197603" TEXT="int (*suspend) (struct usb_interface *intf, pm_message_t message);"/>
<node COLOR="#111111" CREATED="1510126201743" ID="ID_831390356" MODIFIED="1510126202091" TEXT="int (*resume) (struct usb_interface *intf);"/>
<node COLOR="#111111" CREATED="1510126206039" ID="ID_1363148164" MODIFIED="1510126206627" TEXT="int (*reset_resume)(struct usb_interface *intf);"/>
<node COLOR="#111111" CREATED="1510126214761" ID="ID_1824139998" MODIFIED="1510126215284" TEXT="int (*pre_reset)(struct usb_interface *intf);"/>
<node COLOR="#111111" CREATED="1510126220608" ID="ID_862734409" MODIFIED="1510126221252" TEXT="int (*post_reset)(struct usb_interface *intf);"/>
<node COLOR="#111111" CREATED="1510126237073" ID="ID_1656060048" MODIFIED="1510126243446" TEXT="# for hot plug"/>
<node COLOR="#111111" CREATED="1510126235185" ID="ID_1617940811" MODIFIED="1510126235853" TEXT="const struct usb_device_id *id_table;"/>
</node>
<node COLOR="#990000" CREATED="1510125518628" FOLDED="true" ID="ID_1211518284" MODIFIED="1510296288677" TEXT="struct usb_bus">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510126293341" ID="ID_275819936" MODIFIED="1510126429344" TEXT="# Represent and manage host controller information">
<font BOLD="true" NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510126343601" ID="ID_947266743" MODIFIED="1510126372001" TEXT="struct device *controller; /* host/master side hardware */"/>
<node COLOR="#111111" CREATED="1510126372014" ID="ID_1212040607" MODIFIED="1510126372014" TEXT="int busnum; /* Bus number (in order of reg) */"/>
<node COLOR="#111111" CREATED="1510126372013" ID="ID_472779110" MODIFIED="1510126372014" TEXT="const char *bus_name; /* stable id (PCI slot_name etc) */"/>
<node COLOR="#111111" CREATED="1510126372013" ID="ID_975338424" MODIFIED="1510126372013" TEXT="u8 uses_dma; /* Does the host controller use DMA? */"/>
<node COLOR="#111111" CREATED="1510126372013" ID="ID_703518770" MODIFIED="1510126372013" TEXT="u8 otg_port; /* 0, or number of OTG/HNP port */"/>
<node COLOR="#111111" CREATED="1510126372012" ID="ID_808722084" MODIFIED="1510126372013" TEXT="unsigned is_b_host:1; /* true during some HNP role switches */"/>
<node COLOR="#111111" CREATED="1510126372012" ID="ID_197148491" MODIFIED="1510126372012" TEXT="unsigned b_hnp_enable:1; /* OTG: did A-Host enable HNP? */"/>
<node COLOR="#111111" CREATED="1510126372012" ID="ID_1437840527" MODIFIED="1510126372012" TEXT="unsignedsg_tablesize; /*0orlargestnumberofsglistentries*/"/>
<node COLOR="#111111" CREATED="1510126372011" ID="ID_311976586" MODIFIED="1510126384064" TEXT="int devnum_next; /* Next open device number in * round-robin allocation */"/>
<node COLOR="#111111" CREATED="1510126372010" ID="ID_1133704815" MODIFIED="1510126372011" TEXT="struct usb_devmap devmap; /* device address allocation map */"/>
<node COLOR="#111111" CREATED="1510126372010" ID="ID_1939492597" MODIFIED="1510126372010" TEXT="struct usb_device *root_hub; /* Root hub */"/>
<node COLOR="#111111" CREATED="1510126372010" ID="ID_733279622" MODIFIED="1510126372010" TEXT="struct usb_bus *hs_companion; /* Companion EHCI bus, if any */"/>
<node COLOR="#111111" CREATED="1510126372009" ID="ID_556758629" MODIFIED="1510126372010" TEXT="struct list_head bus_list; /* list of busses */"/>
<node COLOR="#111111" CREATED="1510126372005" ID="ID_1090455030" MODIFIED="1510126408700" TEXT="int bandwidth_allocated; /* on this bus: how much of the time reserved for periodic (intr/iso) * requests is used, on average? * Units: microseconds/frame. * Limits: Full/low speed reserve 90%, * while high speed reserves 80%. */"/>
<node COLOR="#111111" CREATED="1510126372005" ID="ID_1820108030" MODIFIED="1510126372005" TEXT="int bandwidth_int_reqs; /* number of Interrupt requests */"/>
<node COLOR="#111111" CREATED="1510126372004" ID="ID_1071805816" MODIFIED="1510126372005" TEXT="int bandwidth_isoc_reqs; /* number of Isoc. requests */"/>
<node COLOR="#111111" CREATED="1510126372004" ID="ID_880863226" MODIFIED="1510126372004" TEXT="#ifdef CONFIG_USB_DEVICEFS"/>
<node COLOR="#111111" CREATED="1510126372003" ID="ID_404019108" MODIFIED="1510126372004" TEXT="struct dentry *usbfs_dentry; /* usbfs dentry entry for the bus */"/>
<node COLOR="#111111" CREATED="1510126372003" ID="ID_1078443170" MODIFIED="1510126372003" TEXT="#endif"/>
<node COLOR="#111111" CREATED="1510126372002" ID="ID_108510143" MODIFIED="1510126372003" TEXT="#if defined(CONFIG_USB_MON) || defined(CONFIG_USB_MON_MODULE)"/>
<node COLOR="#111111" CREATED="1510126372002" ID="ID_326255777" MODIFIED="1510126372002" TEXT="struct mon_bus *mon_bus; /* non-null when associated */"/>
<node COLOR="#111111" CREATED="1510126372002" ID="ID_679357294" MODIFIED="1510126372002" TEXT="int monitored; /* non-zero when monitored */"/>
<node COLOR="#111111" CREATED="1510126372001" ID="ID_1750705084" MODIFIED="1510126372002" TEXT="#endif"/>
</node>
<node COLOR="#990000" CREATED="1510125525317" FOLDED="true" ID="ID_889823366" MODIFIED="1510296288678" TEXT="struct usb_device">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510126442912" ID="ID_445757863" MODIFIED="1510126486120" TEXT="# represent a USB device, descriptor and endpoint details">
<font BOLD="true" NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510126487692" ID="ID_180874736" MODIFIED="1510126502673" TEXT="int devnum; # assigned device number"/>
<node COLOR="#111111" CREATED="1510126505221" ID="ID_487473648" MODIFIED="1510126528003" TEXT="char devpath[16]; #string value that represents a device ID"/>
<node COLOR="#111111" CREATED="1510126825933" FOLDED="true" ID="ID_935569377" MODIFIED="1510296288533" TEXT="enum usb_device_state">
<node COLOR="#111111" CREATED="1510126833461" ID="ID_1061922524" MODIFIED="1510126854715" TEXT="USB_STATE_NOTATTACHED"/>
<node COLOR="#111111" CREATED="1510126860415" ID="ID_1813213146" MODIFIED="1510126861011" TEXT="USB_STATE_ATTACHED"/>
<node COLOR="#111111" CREATED="1510126867712" ID="ID_789005548" MODIFIED="1510126868084" TEXT="USB_ STATE_POWERED"/>
<node COLOR="#111111" CREATED="1510126873064" ID="ID_1281494275" MODIFIED="1510126873460" TEXT="USB_STATE_ADDRESS"/>
<node COLOR="#111111" CREATED="1510126878304" ID="ID_296026599" MODIFIED="1510126878877" TEXT="USB_STATE_CONFIGURED"/>
</node>
<node COLOR="#111111" CREATED="1510126895298" FOLDED="true" ID="ID_1943361486" MODIFIED="1510296288534" TEXT="enum usb_device_speed speed">
<node COLOR="#111111" CREATED="1510126901618" ID="ID_1943726854" MODIFIED="1510126937039">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      USB_SPEED_LOW
    </p>
  </body>
</html></richcontent>
</node>
<node COLOR="#111111" CREATED="1510126937044" ID="ID_1202270166" MODIFIED="1510126937046">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      USB_SPEED_FULL
    </p>
  </body>
</html></richcontent>
</node>
<node COLOR="#111111" CREATED="1510126937042" ID="ID_1862406270" MODIFIED="1510126937043">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      USB_SPEED_HIGH
    </p>
  </body>
</html></richcontent>
</node>
<node COLOR="#111111" CREATED="1510126937040" ID="ID_121582840" MODIFIED="1510126937041">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      USB_SPEED_UNKNOWN
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node COLOR="#111111" CREATED="1510127022771" ID="ID_30941177" MODIFIED="1510127033682">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct usb_device_descriptor descriptor;
    </p>
  </body>
</html></richcontent>
</node>
<node COLOR="#111111" CREATED="1510127033692" ID="ID_1303149157" MODIFIED="1510127033694">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct usb_host_config *config;
    </p>
  </body>
</html></richcontent>
</node>
<node COLOR="#111111" CREATED="1510127033690" ID="ID_551700711" MODIFIED="1510127033691">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct usb_host_config *actconfig;
    </p>
  </body>
</html></richcontent>
</node>
<node COLOR="#111111" CREATED="1510127033688" ID="ID_793668707" MODIFIED="1510127033689">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct usb_host_endpoint *ep_in[16];
    </p>
  </body>
</html></richcontent>
</node>
<node COLOR="#111111" CREATED="1510127033682" ID="ID_1344941133" MODIFIED="1510127033686">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct usb_host_endpoint *ep_out[16];
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node COLOR="#990000" CREATED="1510127067702" ID="ID_1003936538" MODIFIED="1510284357648">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#00cccc"># register </font><font color="#ff0000"><b>USB interface driver</b></font></i>
    </p>
    <p>
      int usb_register_driver(struct usb_driver *, struct module *,const char *);
    </p>
    <p>
      void usb_deregister(struct usb_driver *);
    </p>
  </body>
</html>
</richcontent>
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510284045028" ID="ID_729546963" MODIFIED="1510284345552">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#00cccc"><i># register a </i></font><i><font color="#ff0000">USB device driver</font></i><br />int usb_register_device_driver(struct usb_device_driver *,struct<br />module *);
    </p>
    <p>
      void usb_deregister_device_driver(struct usb_device_driver *);
    </p>
  </body>
</html>
</richcontent>
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510284252401" ID="ID_1772346855" MODIFIED="1510284429822">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#00cccc"># regiser a </font><font color="#ff0000">USB interface driver, USB major number</font></i>
    </p>
    <p>
      int usb_register_dev(struct usb_interface *intf, struct usb_class_ driver *class_driver);
    </p>
    <p>
      void usb_deregister_dev(struct usb_interface *intf,struct usb_class_
    </p>
    <p>
      driver *class_driver);
    </p>
  </body>
</html>
</richcontent>
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510284434103" FOLDED="true" ID="ID_1601468188" MODIFIED="1510299516945" TEXT="struct urb">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510284443384" ID="ID_1458258876" MODIFIED="1510284447956" TEXT="# USB Request Block"/>
<node COLOR="#111111" CREATED="1510284448664" ID="ID_677613029" MODIFIED="1510284455333" TEXT="struct usb_device *dev"/>
<node COLOR="#111111" CREATED="1510284487267" ID="ID_1564814553" MODIFIED="1510284487799" TEXT="struct usb_host_endpoint *ep;"/>
<node COLOR="#111111" CREATED="1510284500740" FOLDED="true" ID="ID_1073402844" MODIFIED="1510303348563" TEXT="unsigned int pipe;">
<node COLOR="#111111" CREATED="1510284507940" ID="ID_1868077939" MODIFIED="1510293096911" STYLE="fork" TEXT="infomation of EP">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510284515949" ID="ID_1370813585" MODIFIED="1510293096901" STYLE="fork" TEXT="direction">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510284517749" ID="ID_709393391" MODIFIED="1510293096901" STYLE="fork" TEXT="type">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510284532718" ID="ID_1654740443" MODIFIED="1510284533266" TEXT="int status;"/>
<node COLOR="#111111" CREATED="1510297981670" ID="ID_74411833" MODIFIED="1510297982195" TEXT="dma_addr_t transfer_dma;"/>
<node COLOR="#111111" CREATED="1510297991214" ID="ID_1500349555" MODIFIED="1510297999446">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct usb_sg_request *sg;
    </p>
    <p>
      int num_sgs;
    </p>
  </body>
</html>
</richcontent>
</node>
<node COLOR="#111111" CREATED="1510293118475" ID="ID_1381356858" MODIFIED="1510296037121">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      unsigned int transfer_flags;
    </p>
    <p>
      <i><font color="#00cccc">// points out data that is part of the transaction</font></i>
    </p>
    <p>
      void *transfer_buffer;
    </p>
    <p>
      <i><font color="#00cccc">// indicates the size of the transfer buffer</font></i>
    </p>
    <p>
      u32 transfer_buffer_length;
    </p>
    <p>
      <i><font color="#00cccc">// actual bytes transferred</font></i>
    </p>
    <p>
      u32 actual_length;
    </p>
  </body>
</html>
</richcontent>
</node>
<node COLOR="#111111" CREATED="1510298024800" ID="ID_1779242326" MODIFIED="1510298283909">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#00cccc">//This method initializes a URB so that the USB subsystem can use it</font></i>
    </p>
    <p>
      void usb_init_urb(struct urb *urb);
    </p>
    <p>
      <i><font color="#00cccc">//creates a new URB for a USB driver to use, call usb_init_urb()</font></i>
    </p>
    <p>
      struct urb *usb_alloc_urb(int iso_packets, gfp_t mem_flags);
    </p>
    <p>
      <i><font color="#00cccc">//frees the memory allocated after a transaction.</font></i>
    </p>
    <p>
      void usb_free_urb(struct urb *urb)
    </p>
    <p>
      <i><font color="#00cccc">//increments the reference count of URB whenever the URB </font></i>
    </p>
    <p>
      <i><font color="#00cccc">is transferred from a device driver to a host controller driver</font></i>
    </p>
    <p>
      struct urb *usb_get_urb(struct urb *urb);
    </p>
    <p>
      <i><font color="#00cccc">//submits an asynchronous transfer request for an endpoint</font></i>
    </p>
    <p>
      int usb_submit_urb(struct urb *urb, gfp_t mem_flags);
    </p>
    <p>
      <i><font color="#00cccc">//aborts or cancels a previously submitted URB for an endpoint</font></i>
    </p>
    <p>
      int usb_unlink_urb(struct urb *urb);
    </p>
    <p>
      <i><font color="#00cccc">//cancels a transfer request, and the method waits for it to finish</font></i>
    </p>
    <p>
      void usb_kill_urb(struct urb *urb);
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node COLOR="#00b439" CREATED="1510299529382" FOLDED="true" ID="ID_538254845" MODIFIED="1510303348569" TEXT="USBCore Generic Detail">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510299596275" FOLDED="true" ID="ID_1019542566" MODIFIED="1510303348567" TEXT="Framework">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510299599723" ID="ID_46377381" MODIFIED="1510299606536" TEXT="URB Management"/>
<node COLOR="#111111" CREATED="1510299607499" ID="ID_1430580213" MODIFIED="1510299612552" TEXT="Interface Driver Management"/>
<node COLOR="#111111" CREATED="1510299612924" ID="ID_326528845" MODIFIED="1510299617232" TEXT="USB Device Management"/>
</node>
<node COLOR="#990000" CREATED="1510299671040" FOLDED="true" ID="ID_1132306977" MODIFIED="1510303348567" TEXT="USB driver registration">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510299720540" ID="ID_1196724725" MODIFIED="1510299723265" TEXT="usb_register()"/>
<node COLOR="#111111" CREATED="1510299731669" ID="ID_912191127" MODIFIED="1510299738834" TEXT="usb_register_driver()"/>
<node COLOR="#111111" CREATED="1510299742565" ID="ID_1851886860" MODIFIED="1510299745498" TEXT="driver_register()"/>
<node COLOR="#111111" CREATED="1510299745928" ID="ID_839455511" MODIFIED="1510299751562" TEXT="usb_create_newid_file()"/>
<node COLOR="#111111" CREATED="1510299752654" ID="ID_1829859387" MODIFIED="1510299755811" TEXT="driver_create_file()"/>
<node COLOR="#111111" CREATED="1510299761223" ID="ID_614795049" MODIFIED="1510299770140" TEXT="usb_create_removeid_file()"/>
<node COLOR="#111111" CREATED="1510299771439" ID="ID_72151002" MODIFIED="1510299775156" TEXT="driver_create_file()"/>
</node>
<node COLOR="#990000" CREATED="1510300307711" FOLDED="true" ID="ID_198176132" MODIFIED="1510303348567" TEXT="Probe of interface driver">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510300314271" ID="ID_375591349" MODIFIED="1510300323325" TEXT="when probe of device matches"/>
<node COLOR="#111111" CREATED="1510300323608" ID="ID_656789155" MODIFIED="1510300327965" TEXT="usb_probe_interface"/>
<node COLOR="#111111" CREATED="1510300329657" ID="ID_886998713" MODIFIED="1510300336150" TEXT="(driver-&gt;probe)()"/>
<node COLOR="#111111" CREATED="1510300336553" ID="ID_160134928" MODIFIED="1510300343622" TEXT="initialize and prepart device driver"/>
<node COLOR="#111111" CREATED="1510300344274" ID="ID_1289632452" MODIFIED="1510300350334" TEXT="usb_setinfdata()"/>
</node>
<node COLOR="#990000" CREATED="1510300368252" FOLDED="true" ID="ID_1573347671" MODIFIED="1510303348568" TEXT="Disconnect of device">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510300388749" ID="ID_105673117" MODIFIED="1510300400258" TEXT="When device driver unbounds"/>
<node COLOR="#111111" CREATED="1510300400862" ID="ID_1227575399" MODIFIED="1510300408163" TEXT="usb_unbind_interface()"/>
<node COLOR="#111111" CREATED="1510300410719" ID="ID_844188082" MODIFIED="1510300415732" TEXT="(driver-&gt;disconnect)"/>
<node COLOR="#111111" CREATED="1510300416383" ID="ID_430583839" MODIFIED="1510300419828" TEXT="Clean interface"/>
<node COLOR="#111111" CREATED="1510300420183" ID="ID_1493952489" MODIFIED="1510300430525" TEXT="usb_cancel_queued_reset()"/>
<node COLOR="#111111" CREATED="1510300431936" ID="ID_759494674" MODIFIED="1510300445229" TEXT="usb_set_intfdata()"/>
</node>
<node COLOR="#990000" CREATED="1510299679225" FOLDED="true" ID="ID_1549986193" MODIFIED="1510303348568" TEXT="Life cycle of URB">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510300472419" ID="ID_1592602505" MODIFIED="1510300477904" TEXT="App data transfer"/>
<node COLOR="#111111" CREATED="1510300480764" ID="ID_1222130871" MODIFIED="1510300492401" TEXT="ioctl(USBDEVFS_BULK,...)"/>
<node COLOR="#111111" CREATED="1510300492796" ID="ID_455285237" MODIFIED="1510300502010" TEXT="proc_bulk()"/>
<node COLOR="#111111" CREATED="1510300496957" ID="ID_117891515" MODIFIED="1510300511683" TEXT="usb_bulk_msg()"/>
<node COLOR="#111111" CREATED="1510300507030" ID="ID_718309422" MODIFIED="1510300510322" TEXT="usb_alloc_urb()"/>
<node COLOR="#111111" CREATED="1510300513190" ID="ID_1534696900" MODIFIED="1510300519003" TEXT="usb_fill_bulk_urb()"/>
<node COLOR="#111111" CREATED="1510300519311" ID="ID_1621300465" MODIFIED="1510300526700" TEXT="usb_start_wait_urb()"/>
<node COLOR="#111111" CREATED="1510300527231" ID="ID_769996173" MODIFIED="1510300533372" TEXT="usb_submit_urb()"/>
<node COLOR="#111111" CREATED="1510300534760" ID="ID_1737079332" MODIFIED="1510300538885" TEXT="usb_hcd_submit_urb()"/>
<node COLOR="#111111" CREATED="1510300539120" ID="ID_1929942779" MODIFIED="1510300544917" TEXT="-- complete(xxx)"/>
<node COLOR="#111111" CREATED="1510300546857" ID="ID_1918498985" MODIFIED="1510300550133" TEXT="copy_to_user()"/>
<node COLOR="#111111" CREATED="1510300550385" ID="ID_1648414267" MODIFIED="1510300554438" TEXT="usb_free_urb()"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510300591372" FOLDED="true" ID="ID_1813595529" MODIFIED="1510303348572" TEXT="Developing Device Driver">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510300611126" ID="ID_871498908" MODIFIED="1510300614850" TEXT="usb_skeleton.c">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510300631879" FOLDED="true" ID="ID_623003887" MODIFIED="1510303348571" TEXT="struct usb_driver skel_driver">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510300672770" ID="ID_389787832" MODIFIED="1510300677335" TEXT=".name = &quot;skeleton&quot;"/>
<node COLOR="#111111" CREATED="1510300660913" ID="ID_1939380228" MODIFIED="1510300670374" TEXT=".probe = skel_probe"/>
<node COLOR="#111111" CREATED="1510300682291" ID="ID_719643437" MODIFIED="1510300693528" TEXT=".disconect = skel_disconnect"/>
<node COLOR="#111111" CREATED="1510300647432" FOLDED="true" ID="ID_438372928" MODIFIED="1510303348571" TEXT=".id_table = skel_table">
<node COLOR="#111111" CREATED="1510300701516" ID="ID_665381949" MODIFIED="1510300792025">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#00cccc">//holds information to match the device of interest to the device</font></i><br />driver, generally the vendor ID and the product ID.<br />static struct usb_device_id skel_table [] = {<br />{USB_DEVICE(USB_SKEL_VENDOR_ID, USB_SKEL_PRODUCT_ID) },<br />{ } };<br />MODULE_DEVICE_TABLE(usb, skel_table);
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node COLOR="#990000" CREATED="1510300818165" FOLDED="true" ID="ID_55746226" MODIFIED="1510303348571" TEXT="usb_skel_init(void)">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510300843639" ID="ID_768118248" MODIFIED="1510300844235" TEXT="usb_register(&amp;skel_driver);"/>
</node>
<node COLOR="#990000" CREATED="1510300848727" FOLDED="true" ID="ID_1439782537" MODIFIED="1510303348571" TEXT="usb_skel_exit(void)">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510300854983" ID="ID_1677426373" MODIFIED="1510300855388" TEXT="usb_deregister(&amp;skel_driver)"/>
</node>
<node COLOR="#990000" CREATED="1510300886234" FOLDED="true" ID="ID_403780805" MODIFIED="1510303348571" TEXT="skel_probe()">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510300900315" ID="ID_262444119" MODIFIED="1510301055619" TEXT="struct usb_skel *dev = kzalloc(sizeof(*dev), GFP_KERNEL);"/>
<node COLOR="#111111" CREATED="1510300907155" ID="ID_1652461020" MODIFIED="1510300907544" TEXT="dev-&gt;udev = usb_get_dev(interface_to_usbdev(interface));"/>
<node COLOR="#111111" CREATED="1510300917084" ID="ID_736618940" MODIFIED="1510300917416" TEXT="dev-&gt;interface = interface;"/>
<node COLOR="#111111" CREATED="1510300925605" ID="ID_1147063992" MODIFIED="1510301318633">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font face="Courier New">iface_desc = interface-&gt;cur_altsetting;<br face="Courier New" />for (i = 0; i &lt; iface_desc-&gt;desc.bNumEndpoints; ++i)<br face="Courier New" />&#160;&#160;&#160;&#160;endpoint = &amp;iface_desc-&gt;endpoint[i].desc;</font>
    </p>
  </body>
</html>
</richcontent>
</node>
<node COLOR="#111111" CREATED="1510300959319" ID="ID_855639127" MODIFIED="1510300959788" TEXT="usb_set_intfdata(interface, dev);"/>
<node COLOR="#111111" CREATED="1510300965688" ID="ID_1006666607" MODIFIED="1510300966092" TEXT=" usb_register_dev(interface, &amp;skel_class);"/>
</node>
<node COLOR="#990000" CREATED="1510301344987" FOLDED="true" ID="ID_1344774626" MODIFIED="1510303348572" TEXT="void skel_disconnect()">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510301355164" ID="ID_1334422866" MODIFIED="1510301439243" TEXT="struct usb_skel *dev = usb_get_intfdata(interface)"/>
<node COLOR="#111111" CREATED="1510301373230" ID="ID_969421306" MODIFIED="1510301439243" TEXT="usb_set_intfdata(interface, NULL);"/>
<node COLOR="#111111" CREATED="1510301378590" ID="ID_1608193465" MODIFIED="1510301439243" TEXT="usb_deregister_dev(interface, &amp;skel_class);"/>
</node>
<node COLOR="#990000" CREATED="1510301070927" ID="ID_1999009071" MODIFIED="1510301276275" TEXT="struct usb_skel {&#xa;struct usb_device *udev;&#xa;struct usb_interface *interface;&#xa;...&#xa;}">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510301425169" FOLDED="true" ID="ID_1526566109" MODIFIED="1510303345300" POSITION="right" TEXT="Host Driver">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-1"/>
<icon BUILTIN="full-0"/>
<node COLOR="#00b439" CREATED="1510302615073" FOLDED="true" ID="ID_1064937159" MODIFIED="1510303348574" TEXT="Data Structures">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510301506568" FOLDED="true" ID="ID_615621942" MODIFIED="1510303348573" TEXT="struct hc_driver">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510301524657" ID="ID_927089696" MODIFIED="1510302623057" TEXT="# serve as an interface between usbcore and HCD">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510301555507" ID="ID_56812328" MODIFIED="1510302623057">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      const char *description;
    </p>
    <p>
      const char *product_desc;
    </p>
    <p>
      size_t hcd_priv_size;
    </p>
  </body>
</html></richcontent>
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510301581037" ID="ID_1593404984" MODIFIED="1510302623057">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      //interrupt handler
    </p>
    <p>
      irqreturn_t (*irq) (struct usb_hcd *hcd);
    </p>
  </body>
</html></richcontent>
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510301602590" ID="ID_1289281015" MODIFIED="1510302623057">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      //version of USB that HCD supports
    </p>
    <p>
      int flags;
    </p>
  </body>
</html></richcontent>
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510301633241" ID="ID_1416413479" MODIFIED="1510302623058">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int (*reset) (struct usb_hcd *hcd);
    </p>
    <p>
      int (*start) (struct usb_hcd *hcd);
    </p>
    <p>
      void (*stop) (struct usb_hcd *hcd);
    </p>
    <p>
      void (*shutdown) (struct usb_hcd *hcd);
    </p>
  </body>
</html></richcontent>
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510301684628" ID="ID_1036719889" MODIFIED="1510302623058">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      //for ISO transactions
    </p>
    <p>
      int (*get_frame_number) (struct usb_hcd *hcd);
    </p>
  </body>
</html></richcontent>
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510301714431" ID="ID_1069172778" MODIFIED="1510302623063">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      //called by usb_hcd_submit_urb()
    </p>
    <p>
      int (*urb_enqueue)(struct usb_hcd *hcd, struct urb *urb, gfp_t mem_flags);
    </p>
    <p>
      //called by usb_hcd_unlink_urb()
    </p>
    <p>
      int (*urb_dequeue)(struct usb_hcd *hcd, struct urb *urb, int status);
    </p>
  </body>
</html></richcontent>
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510301770971" ID="ID_1060725833" MODIFIED="1510302623063">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void (*endpoint_disable)(struct usb_hcd *hcd, struct usb_host_endpoint *ep);
    </p>
    <p>
      void (*endpoint_reset)(struct usb_hcd *hcd,struct usb_host_endpoint *ep);
    </p>
  </body>
</html></richcontent>
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510301806102" ID="ID_468850265" MODIFIED="1510302623063" TEXT="//root hub support&#xa;//called by usb_hcd_poll_rh_status()&#xa;int (*hub_status_data) (struct usb_hcd *hcd, char *buf); &#xa;//called by rh_call_control()&#xa;int (*hub_control) (struct usb_hcd *hcd,u16 typeReq, u16 wValue, u16 wIndex,char *buf, u16 wLength);">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510301877099" ID="ID_1231069913" MODIFIED="1510302623064">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int (*bus_suspend)(struct usb_hcd *);
    </p>
    <p>
      int (*bus_resume)(struct usb_hcd *);
    </p>
  </body>
</html></richcontent>
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510301899868" ID="ID_171252927" MODIFIED="1510302623064">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      //for OTG
    </p>
    <p>
      int (*start_port_reset)(struct usb_hcd *, unsigned port_num);
    </p>
  </body>
</html></richcontent>
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510301945736" ID="ID_1784930749" MODIFIED="1510302623064" TEXT="//called by hub_port_con nect_change()&#xa;void (*relinquish_port)(struct usb_hcd *, int);&#xa;int (*port_handed_over)(struct usb_hcd *, int);">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510301991491" ID="ID_1324088830" MODIFIED="1510302623065" TEXT="//manage USB device allocation and release&#xa;int (*alloc_dev)(struct usb_hcd *, struct usb_device *);&#xa;void (*free_dev)(struct usb_hcd *, struct usb_device *);">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510301514680" ID="ID_1470526278" MODIFIED="1510302623088" TEXT="struct usb_hcd">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510302576053" FOLDED="true" ID="ID_305166609" MODIFIED="1510303348575" TEXT="APIs">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510302133125" ID="ID_1379223804" MODIFIED="1510302638634">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      usb_hcd_submit_urb() - transfer USB data
    </p>
  </body>
</html></richcontent>
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510302326196" ID="ID_382960488" MODIFIED="1510302638634" TEXT="usb_hcd_unlink_urb() - cancel a URB submission and unlink it from the URB queue">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510302333172" ID="ID_584879366" MODIFIED="1510302638634" TEXT="usb_hcd_giveback_urb() - returns the information collected for the URB request to the driver">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510302245318" ID="ID_1048883815" MODIFIED="1510302638635" TEXT="usb_create_hcd() - allocates and initializes a struct usb_hcd data structure">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510302250767" ID="ID_1063139343" MODIFIED="1510302638635" TEXT="int usb_add_hcd() - initializes struct usb_hcd with necessary resources such as memory and interrupts and registers the bus">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510302344949" ID="ID_558774420" MODIFIED="1510302638635" TEXT="usb_remove_hcd() - releases resources allocated during the usb_add_hcd function and then invokes the HCD driver&#x2019;s stop function">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510302491888" ID="ID_1098991868" MODIFIED="1510302638635" TEXT="usb_hcd_link_urb_to_ep() - add a URB to the endpoint queue">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510302527571" ID="ID_988294385" MODIFIED="1510302638635" TEXT="usb_hcd_unlink_urb_from_ep() -  remove a URB from an endpoint queue">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510302686063" FOLDED="true" ID="ID_812015179" MODIFIED="1510303348576" TEXT="Host Controller Driver">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510302694839" ID="ID_1505091766" MODIFIED="1510302704068" TEXT="Platform Driver Routines">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510302705128" ID="ID_507293942" MODIFIED="1510302709301" TEXT="Host Controller Driver">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510302709544" FOLDED="true" ID="ID_618028909" MODIFIED="1510303348576" TEXT="Host Controller Driver Interface">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510302716481" ID="ID_1581709293" MODIFIED="1510302723454" TEXT="Root Hub Management Routines"/>
<node COLOR="#111111" CREATED="1510302724705" ID="ID_1798113898" MODIFIED="1510302728894" TEXT="Host Management Routines"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510302829065" FOLDED="true" ID="ID_1412694034" MODIFIED="1510303348576" TEXT="HCD loads Sequence">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510302841074" ID="ID_138651664" MODIFIED="1510302859208" TEXT="platform_driver_register()">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510302850810" ID="ID_1406766561" MODIFIED="1510302860464" TEXT="platform_probe()">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510302862507" ID="ID_946269" MODIFIED="1510302865544" TEXT="usb_create_hcd()">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510302866660" ID="ID_265621206" MODIFIED="1510302869872" TEXT="usb_add_hcd()">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510302871484" ID="ID_143016590" MODIFIED="1510302874833" TEXT="(*reset)()">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510302876501" ID="ID_1467760" MODIFIED="1510302881529" TEXT="(*start)()">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510302899358" FOLDED="true" ID="ID_408142472" MODIFIED="1510303348577" TEXT="Host Framework Transfer Sequence">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510302916696" ID="ID_440359862" MODIFIED="1510302922652" TEXT="usb_submit_urb()">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510302923032" ID="ID_499542740" MODIFIED="1510302930293" TEXT="usb_hcd_submit_urb()">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510302931545" ID="ID_1003483778" MODIFIED="1510302945558" TEXT="(*urb_enqueue)()">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510302948329" ID="ID_387323384" MODIFIED="1510302953895" TEXT="usb_hcd_giveback_urb()">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510302955066" ID="ID_831777840" MODIFIED="1510302958735" TEXT="usb_complate()">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510303005758" FOLDED="true" ID="ID_1049473150" MODIFIED="1510303348577" TEXT="Sample Implementation">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510303051026" FOLDED="true" ID="ID_417374981" MODIFIED="1510303348577" TEXT="struct platform_driver dummy_hcd_driver">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510303098293" ID="ID_667528123" MODIFIED="1510303197349">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font face="Serif">.probe = dummy_hcd_probe,</font>
    </p>
  </body>
</html>
</richcontent>
<arrowlink DESTINATION="ID_1132413438" ENDARROW="Default" ENDINCLINATION="186;0;" ID="Arrow_ID_1365052004" STARTARROW="None" STARTINCLINATION="186;0;"/>
</node>
<node COLOR="#111111" CREATED="1510303160860" ID="ID_410714584" MODIFIED="1510303160865">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font face="Serif">.remove = dummy_hcd_remove,</font>
    </p>
  </body>
</html>
</richcontent>
</node>
<node COLOR="#111111" CREATED="1510303160855" ID="ID_762902293" MODIFIED="1510303160858">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font face="Serif">.suspend = dummy_hcd_suspend,</font>
    </p>
  </body>
</html>
</richcontent>
</node>
<node COLOR="#111111" CREATED="1510303160848" ID="ID_293120786" MODIFIED="1510303160850">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font face="Serif">.resume = dummy_hcd_resume,&#160;</font>
    </p>
  </body>
</html></richcontent>
</node>
<node COLOR="#111111" CREATED="1510303160829" ID="ID_1304571772" MODIFIED="1510303170898">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font face="Serif">.driver = { .name = (char *) driver_name,&#160;</font>
    </p>
    <p>
      <font face="Serif">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.owner = THIS_MODULE,</font>
    </p>
    <p>
      <font face="Serif">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}</font>
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
<node COLOR="#990000" CREATED="1510303193140" FOLDED="true" ID="ID_1132413438" MODIFIED="1510303348577" TEXT="int dummy_hcd_probe(struct platform_device *pdev)">
<linktarget COLOR="#b0b0b0" DESTINATION="ID_1132413438" ENDARROW="Default" ENDINCLINATION="186;0;" ID="Arrow_ID_1365052004" SOURCE="ID_667528123" STARTARROW="None" STARTINCLINATION="186;0;"/>
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510303214214" ID="ID_1003831605" MODIFIED="1510303220306" TEXT="usb_create_hcd(&amp;dummy_hcd, &amp;pdev-&gt;dev, dev_name(&amp;pdev-&gt;dev))"/>
<node COLOR="#111111" CREATED="1510303228318" ID="ID_1936423553" MODIFIED="1510303228899" TEXT="the_controller = hcd_to_dummy (hcd);"/>
<node COLOR="#111111" CREATED="1510303233583" ID="ID_196656522" MODIFIED="1510303233931" TEXT="retval = usb_add_hcd(hcd, 0, 0);"/>
</node>
<node COLOR="#990000" CREATED="1510303257536" ID="ID_209567268" MODIFIED="1510303262693" TEXT="struct hc_driver dummy_hcd">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510303351104" ID="ID_1607296752" MODIFIED="1510303880860" POSITION="right" TEXT="USB Gadget Driver">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-1"/>
<icon BUILTIN="full-1"/>
</node>
<node COLOR="#0033ff" CREATED="1510303410684" ID="ID_1598523843" MODIFIED="1510303880861" POSITION="right" TEXT="Peripheral Device Controller Driver">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-1"/>
<icon BUILTIN="full-2"/>
</node>
<node COLOR="#0033ff" CREATED="1510303431846" ID="ID_1020962229" MODIFIED="1510303880861" POSITION="right" TEXT="Gadget Driver">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-1"/>
<icon BUILTIN="full-3"/>
</node>
<node COLOR="#0033ff" CREATED="1510303483225" ID="ID_1986848189" MODIFIED="1510303880861" POSITION="right" TEXT="Class Driver">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-1"/>
<icon BUILTIN="full-4"/>
</node>
<node COLOR="#0033ff" CREATED="1510303510755" ID="ID_422793116" MODIFIED="1510303880861" POSITION="right" TEXT="Linux USB OTG Driver">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-1"/>
<icon BUILTIN="full-5"/>
</node>
<node COLOR="#0033ff" CREATED="1510303531037" ID="ID_592065235" MODIFIED="1510303880861" POSITION="right" TEXT="Miscellaneous Linux USB Subsystems">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-1"/>
<icon BUILTIN="full-6"/>
</node>
<node COLOR="#0033ff" CREATED="1510303574304" ID="ID_273731323" MODIFIED="1510303880861" POSITION="right" TEXT="User Space USB Drivers">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-1"/>
<icon BUILTIN="full-7"/>
</node>
<node COLOR="#0033ff" CREATED="1510303635676" FOLDED="true" ID="ID_103032671" MODIFIED="1510303957345" POSITION="right" TEXT="Debugging Using Linux USB">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-1"/>
<icon BUILTIN="full-8"/>
<node COLOR="#00b439" CREATED="1510303854365" ID="ID_1035098843" MODIFIED="1510303856994" TEXT="usbmon">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
</node>
<node COLOR="#00b439" CREATED="1510303936355" ID="ID_19346538" MODIFIED="1510303936735" TEXT="usbfs_snoop">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510303957916" ID="ID_1665589397" MODIFIED="1510303960712" POSITION="right" TEXT="Test Using Linux USB">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-1"/>
<icon BUILTIN="full-9"/>
</node>
</node>
</map>
