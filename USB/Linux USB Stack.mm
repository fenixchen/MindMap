<map version="1.0.1">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node COLOR="#000000" CREATED="1510037727647" ID="ID_1035049656" MODIFIED="1510060293472" TEXT="Linux USB Stack">
<font NAME="SimHei" SIZE="20"/>
<hook NAME="accessories/plugins/AutomaticLayout.properties"/>
<node COLOR="#0033ff" CREATED="1510037847877" FOLDED="true" ID="ID_721586480" MODIFIED="1510038900752" POSITION="right" TEXT="USB and Linux: Introduction">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-1"/>
<node COLOR="#00b439" CREATED="1510037917520" ID="ID_205354524" MODIFIED="1510037921075" TEXT="1996">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
</node>
<node COLOR="#00b439" CREATED="1510037944340" ID="ID_1355173394" MODIFIED="1510037950920" TEXT="Allow port expansion">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
</node>
<node COLOR="#00b439" CREATED="1510037977336" FOLDED="true" ID="ID_729273125" MODIFIED="1510043364271" TEXT="Speed">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510037979328" ID="ID_844809964" MODIFIED="1510038030494" TEXT="Low Speed(10-100Kbps)">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510037983807" ID="ID_1020126737" MODIFIED="1510038037581" TEXT="Full Speed(500k-10Mbps)">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510037987190" ID="ID_710556989" MODIFIED="1510038051331" TEXT="High Speed(25M-400Mbps)">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510038056647" ID="ID_1669991219" MODIFIED="1510038062530" TEXT="OTG(On-The-Go)">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
</node>
<node COLOR="#00b439" CREATED="1510038085122" FOLDED="true" ID="ID_1571441433" MODIFIED="1510043364272" TEXT="Hardware Layer">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510038092113" FOLDED="true" ID="ID_1235387387" MODIFIED="1510043364272" TEXT="Physical Layer">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510038112191" ID="ID_1463640451" MODIFIED="1510060280320" TEXT="Electrical characteristics">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510038127078" ID="ID_1952297206" MODIFIED="1510060280335" TEXT="Speed detection">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510038134780" ID="ID_452154248" MODIFIED="1510060280335" TEXT="Timing">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510038136875" ID="ID_145179626" MODIFIED="1510060280335" TEXT="Power">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510038096409" ID="ID_1202242282" MODIFIED="1510038100589" TEXT="Link Layer">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038101016" FOLDED="true" ID="ID_372079460" MODIFIED="1510043364272" TEXT="USB Protocol">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510038181326" ID="ID_1218026695" MODIFIED="1510060280335" TEXT="Bandwith management">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510038187885" ID="ID_1643625013" MODIFIED="1510060280335" TEXT="Error Handling">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510038190580" ID="ID_1053162116" MODIFIED="1510060280335" TEXT="Packet Management">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510038238470" ID="ID_504092569" LINK="USB%20Hardware%20configuration.png" MODIFIED="1510038252468" TEXT="Configuration">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510038294743" FOLDED="true" ID="ID_987326164" LINK="USB%20Transcceiver.png" MODIFIED="1510043364272" TEXT="Transceiver">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510038302102" ID="ID_1398812007" MODIFIED="1510038310362" TEXT="TX/RX sginals">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038321980" ID="ID_609009873" MODIFIED="1510038324856" TEXT="Connection Detection">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038332914" ID="ID_1311929844" MODIFIED="1510038353295" TEXT="Provide analog electrical signalling requirement">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038437725" ID="ID_1023079355" MODIFIED="1510038443449" TEXT="Convert voltage">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510038491726" FOLDED="true" ID="ID_639155994" MODIFIED="1510043364273" TEXT="Standalone USB Controller">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510038503621" ID="ID_1146231808" MODIFIED="1510038525943" TEXT="integrated curcuit of USB hardware">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038526410" ID="ID_1417794936" MODIFIED="1510038539093" TEXT="Transceiver">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038530850" ID="ID_537009779" MODIFIED="1510038536389" TEXT="Digital portion">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510038599953" ID="ID_629358687" MODIFIED="1510038606501" TEXT="Integrated USB Controller">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
</node>
<node COLOR="#00b439" CREATED="1510038673559" FOLDED="true" ID="ID_570772506" MODIFIED="1510043364273" TEXT="Linux USB">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510038683062" ID="ID_1368298960" MODIFIED="1510038684715" TEXT="Host stack">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038685190" ID="ID_1653207495" MODIFIED="1510038690978" TEXT="Device drivers">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038692045" ID="ID_405610118" MODIFIED="1510038700345" TEXT="Gadget">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510038902899" FOLDED="true" ID="ID_225358213" MODIFIED="1510043364316" POSITION="right" TEXT="USB: An Overview">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-2"/>
<node COLOR="#00b439" CREATED="1510038920216" FOLDED="true" ID="ID_532387835" MODIFIED="1510043364273" TEXT="Master-Slave communication model">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510038934743" ID="ID_1227309693" MODIFIED="1510038941043" TEXT="Host - Master">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038941310" ID="ID_1174327281" MODIFIED="1510038944069" TEXT="Device - Slave">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510038949101" ID="ID_1162530495" MODIFIED="1510038954793" TEXT="Max 127 devices">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510038986992" FOLDED="true" ID="ID_1891689557" LINK="USB%20bus%20topology.png" MODIFIED="1510043364273" TEXT="Topology">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510039009246" ID="ID_394290990" MODIFIED="1510039010458" TEXT="Host">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510039010853" ID="ID_1498751469" MODIFIED="1510039016249" TEXT="Hub - Root hub">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510039016508" ID="ID_269471682" MODIFIED="1510039017905" TEXT="Funcs">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510039024787" ID="ID_626485772" MODIFIED="1510039031135" TEXT="Invisible for end user">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510039083140" FOLDED="true" ID="ID_368956274" LINK="Internal%20of%20USB%20host%20and%20USB%20device.png" MODIFIED="1510043364306" TEXT="USB System Architecture">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510039128542" FOLDED="true" ID="ID_1074511359" MODIFIED="1510043364274" TEXT="USB System">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510039144548" ID="ID_1220596435" MODIFIED="1510060280335" TEXT="USB Host">
<arrowlink DESTINATION="ID_488089565" ENDARROW="Default" ENDINCLINATION="160;0;" ID="Arrow_ID_1474326634" STARTARROW="None" STARTINCLINATION="160;0;"/>
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039145564" ID="ID_1905798900" MODIFIED="1510060280335" TEXT="USB Device">
<arrowlink DESTINATION="ID_1444894166" ENDARROW="Default" ENDINCLINATION="461;0;" ID="Arrow_ID_166585303" STARTARROW="None" STARTINCLINATION="461;0;"/>
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039146764" ID="ID_1808335309" MODIFIED="1510060280335" TEXT="USB Interconnect">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510039187655" FOLDED="true" ID="ID_834431713" MODIFIED="1510043364274" TEXT="Layers">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510039194574" ID="ID_1157480675" MODIFIED="1510060280335" TEXT="USB Functional Layer">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039210788" ID="ID_381113724" MODIFIED="1510060280351" TEXT="USB Device Layer">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039203557" ID="ID_560721030" MODIFIED="1510060280351" TEXT="USB Bus Layer">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510039264581" FOLDED="true" ID="ID_488089565" LINK="USB%20host%20layers.png" MODIFIED="1510043364277" TEXT="USB Host">
<linktarget COLOR="#b0b0b0" DESTINATION="ID_488089565" ENDARROW="Default" ENDINCLINATION="160;0;" ID="Arrow_ID_1474326634" SOURCE="ID_1220596435" STARTARROW="None" STARTINCLINATION="160;0;"/>
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510039275404" ID="ID_16988072" MODIFIED="1510060280352" TEXT="Host driven">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039287098" FOLDED="true" ID="ID_1241271560" MODIFIED="1510060280352" TEXT="Layers">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510039289282" ID="ID_1486525367" MODIFIED="1510060280353" TEXT="Client software - Application">
<arrowlink COLOR="#b0b0b0" DESTINATION="ID_1932616800" ENDARROW="Default" ENDINCLINATION="215;0;" ID="Arrow_ID_1498312983" STARTARROW="None" STARTINCLINATION="215;0;"/>
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039295650" FOLDED="true" ID="ID_1767453039" MODIFIED="1510060280353" TEXT="USB system software">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510039561983" ID="ID_1689036716" MODIFIED="1510060280353" TEXT="Implemented above host controller">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039576270" ID="ID_1909098084" MODIFIED="1510060280353" TEXT="Interface between client software and host controller">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039602634" FOLDED="true" ID="ID_1322527178" MODIFIED="1510060280353" TEXT="Two major blocks">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510039624399" FOLDED="true" ID="ID_1932616800" MODIFIED="1510060280353" TEXT="USBD - USB Driver">
<arrowlink DESTINATION="ID_503369349" ENDARROW="Default" ENDINCLINATION="78;0;" ID="Arrow_ID_1747792677" STARTARROW="None" STARTINCLINATION="78;0;"/>
<linktarget COLOR="#b0b0b0" DESTINATION="ID_1932616800" ENDARROW="Default" ENDINCLINATION="215;0;" ID="Arrow_ID_1498312983" SOURCE="ID_1486525367" STARTARROW="None" STARTINCLINATION="215;0;"/>
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510039800225" ID="ID_1457016312" MODIFIED="1510060280353" TEXT="Handler device enumeration">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039808985" ID="ID_51478477" MODIFIED="1510060280353" TEXT="Manage IRP(Input/Output Request Packets) to and from host">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510039613233" FOLDED="true" ID="ID_503369349" MODIFIED="1510060280353" TEXT="HCD - Host Controller Driver">
<arrowlink DESTINATION="ID_1001616408" ENDARROW="Default" ENDINCLINATION="329;0;" ID="Arrow_ID_1190257825" STARTARROW="None" STARTINCLINATION="329;0;"/>
<linktarget COLOR="#b0b0b0" DESTINATION="ID_503369349" ENDARROW="Default" ENDINCLINATION="78;0;" ID="Arrow_ID_1747792677" SOURCE="ID_1932616800" STARTARROW="None" STARTINCLINATION="78;0;"/>
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510039694799" ID="ID_616588595" MODIFIED="1510060280353" TEXT="HAL of host controller">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039717068" ID="ID_239219988" MODIFIED="1510060280353" TEXT="Allow USBD support different host controller">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
</node>
<node COLOR="#111111" CREATED="1510039300968" FOLDED="true" ID="ID_1001616408" MODIFIED="1510060280353" TEXT="USB Host controller">
<linktarget COLOR="#b0b0b0" DESTINATION="ID_1001616408" ENDARROW="Default" ENDINCLINATION="329;0;" ID="Arrow_ID_1190257825" SOURCE="ID_503369349" STARTARROW="None" STARTINCLINATION="329;0;"/>
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510039916155" ID="ID_1504174434" MODIFIED="1510060280353" TEXT="Hardware Implementation">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039947127" ID="ID_1693108726" MODIFIED="1510060280353" TEXT="Translate the USB bus activeites to transactions and vice versa">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039985674" FOLDED="true" ID="ID_658888642" MODIFIED="1510060280353" TEXT="Report status of transaction to System Software">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510039997000" ID="ID_1850590782" MODIFIED="1510060280353" TEXT="Done">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039998312" ID="ID_1960341575" MODIFIED="1510060280353" TEXT="Pending">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040000797" ID="ID_1865254261" MODIFIED="1510060280353" TEXT="Halted">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510040034996" ID="ID_1005895003" MODIFIED="1510060280353" TEXT="Bus management">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
<node COLOR="#111111" CREATED="1510039322054" FOLDED="true" ID="ID_1027965519" MODIFIED="1510060280368" TEXT="Functions">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510039324021" ID="ID_2562071" MODIFIED="1510060280368" TEXT="Detection and removal of device">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510039338716" ID="ID_1716926109" MODIFIED="1510060280368" TEXT="Control and Data Flow">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
<node COLOR="#990000" CREATED="1510040051290" FOLDED="true" ID="ID_1444894166" MODIFIED="1510043364278" TEXT="USB Device">
<linktarget COLOR="#b0b0b0" DESTINATION="ID_1444894166" ENDARROW="Default" ENDINCLINATION="461;0;" ID="Arrow_ID_166585303" SOURCE="ID_1905798900" STARTARROW="None" STARTINCLINATION="461;0;"/>
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510040100211" ID="ID_488657339" MODIFIED="1510060280368" TEXT="To end user provided addtional capability">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040135911" ID="ID_1338075331" MODIFIED="1510060280368" TEXT="USB hub is a device to provides additional usb attachment point">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040167891" ID="ID_1509199323" MODIFIED="1510060280368" TEXT="Self powered or bus powered">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040251800" FOLDED="true" ID="ID_10876517" LINK="USB%20Device%20Layers.png" MODIFIED="1510060280368" TEXT="Layers">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510040269399" ID="ID_1736289585" MODIFIED="1510060280368" TEXT="Function">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040308873" FOLDED="true" ID="ID_1533755322" MODIFIED="1510060280368" TEXT="USB Logical device">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510040330118" ID="ID_1118462007" MODIFIED="1510060280368" TEXT="Collection of endpointes">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040331862" ID="ID_254482286" MODIFIED="1510060280368" TEXT="default Endpoint Zero">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510040348956" FOLDED="true" ID="ID_1582236036" MODIFIED="1510060280368" TEXT="USB Bus Interface">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510040357899" ID="ID_368335650" MODIFIED="1510060280368" TEXT="Hardware Implementation">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040373009" ID="ID_602728836" MODIFIED="1510060280368" TEXT="USB Device Controller">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040380672" ID="ID_1434597869" MODIFIED="1510060280368" TEXT="Phy Layer + Link Layer + Protocol Layer">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
</node>
<node COLOR="#990000" CREATED="1510040741794" FOLDED="true" ID="ID_445803802" MODIFIED="1510043364286" TEXT="Communication Flow">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510040776926" ID="ID_341428338" MODIFIED="1510060280368" TEXT="Logical interconnects">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040781973" FOLDED="true" ID="ID_181827047" MODIFIED="1510060280384" TEXT="Endpoints">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510040789348" ID="ID_472653290" MODIFIED="1510060280384" TEXT="Uniquely ID of a USB Device">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040829911" ID="ID_258044185" MODIFIED="1510060280384" TEXT="Host assign it a unique address as DEVICE ADDRESS">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040873794" ID="ID_46276915" MODIFIED="1510060280384" TEXT="Endpoint number">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040887272" ID="ID_503389352" MODIFIED="1510060280384" TEXT="Unique by (Device Address, Endpoint Address, Endpoint Direction)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040929539" FOLDED="true" ID="ID_1477911996" MODIFIED="1510060280384" TEXT="EP0 is special and must implement">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510040950880" ID="ID_844830064" MODIFIED="1510060280384" TEXT="Initialize">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510040954680" ID="ID_1763836827" MODIFIED="1510060280384" TEXT="gather information">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510040985940" FOLDED="true" ID="ID_367924482" MODIFIED="1510060280384" TEXT="Description">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510040999714" ID="ID_278305784" MODIFIED="1510060280384" TEXT="Bus access freq">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041010089" ID="ID_1924036124" MODIFIED="1510060280400" TEXT="Bandwidth">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041013808" ID="ID_1510640216" MODIFIED="1510060280400" TEXT="Endpoint number">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041021311" ID="ID_416887628" MODIFIED="1510060280400" TEXT="Error-handling behavior">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041033446" ID="ID_859521955" MODIFIED="1510060280400" TEXT="Maximum packet size for TX/RX">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041050547" ID="ID_1594276776" MODIFIED="1510060280400" TEXT="Transfer type">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041059658" ID="ID_149223942" MODIFIED="1510060280400" TEXT="Direction">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
<node COLOR="#111111" CREATED="1510041069153" FOLDED="true" ID="ID_230247961" MODIFIED="1510060280400" TEXT="Pipes">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510041092670" ID="ID_1473971695" MODIFIED="1510060280400" TEXT="Logical representation between endpoint and host SW">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041113875" FOLDED="true" ID="ID_507996513" MODIFIED="1510060280400" TEXT="Two types">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510041117659" ID="ID_1306702191" MODIFIED="1510060280400" TEXT="Stream Pipe - no USB-defined format">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041123738" ID="ID_726271398" MODIFIED="1510060280400" TEXT="Message Pipe - some USB-defined structure">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510041210015" FOLDED="true" ID="ID_1515222390" MODIFIED="1510060280400" TEXT="Default Control Pipe">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510041241883" ID="ID_1787332483" MODIFIED="1510060280400" TEXT="Associated with EP0">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041253554" ID="ID_1424109542" MODIFIED="1510060280400" TEXT="Available once powered and reset">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041267528" ID="ID_1276103287" MODIFIED="1510060280400" TEXT="Host SW use it to identify and configure device">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
</node>
<node COLOR="#990000" CREATED="1510041354933" FOLDED="true" ID="ID_828089558" MODIFIED="1510043364290" TEXT="Enumeration">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510041376154" FOLDED="true" ID="ID_1919211108" MODIFIED="1510060280415" TEXT="Process of">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510041379291" ID="ID_243317546" MODIFIED="1510060280416" TEXT="Identifying the device">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041383945" ID="ID_1375740223" MODIFIED="1510060280416" TEXT="Setting a unique address">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510041398112" FOLDED="true" ID="ID_1962596189" MODIFIED="1510060280416" TEXT="Handled by">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510041418333" ID="ID_307881374" MODIFIED="1510060280416" TEXT="System software on host">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041428460" ID="ID_1962725740" MODIFIED="1510060280416" TEXT="USB logical layer on device">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510041459688" ID="ID_1155988643" MODIFIED="1510060280416" TEXT="Starts when device is attached to host and gets power">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041483469" FOLDED="true" ID="ID_1754236276" MODIFIED="1510060280416" TEXT="Steps">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510041486996" ID="ID_218670649" MODIFIED="1510060280416" TEXT="Attach device to host, receive an event indicating a change in pipe&apos;s status">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041522360" ID="ID_441593514" MODIFIED="1510060280416" TEXT="Device is in POWERED state, attached port is disabled">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041545989" ID="ID_1413074261" MODIFIED="1510060280416" TEXT="Host query about the change in bus">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041556884" ID="ID_922941754" MODIFIED="1510060280416" TEXT="Determine new device is attached, Wait for 100ms for device become stable">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041727582" ID="ID_1934387527" MODIFIED="1510041912632" TEXT="Device gets reset and in a DEFAULT state, get 100mA power from VBUS pin">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041752603" ID="ID_722241795" MODIFIED="1510060280416" TEXT="Host assign a unique address to the USB device">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041770976" ID="ID_1007685486" MODIFIED="1510060280416" TEXT="Device move to ADDRESS state">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041803948" ID="ID_889845597" MODIFIED="1510060280416" TEXT="Host communicate with device in the default control pipe and read DESC">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041827905" ID="ID_661313859" MODIFIED="1510060280416" TEXT="Host reads device configuration information">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041845967" ID="ID_1839792525" MODIFIED="1510060280416" TEXT="Host selects configuration">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041860325" ID="ID_464401241" MODIFIED="1510060280416" TEXT="Device move to CONFIGURED state and ready for use">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510041941027" FOLDED="true" ID="ID_973491513" LINK="USB%20Device%20States%20Transition.png" MODIFIED="1510060280416" TEXT="State transition">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510041946195" ID="ID_1487441497" MODIFIED="1510060280416" TEXT="Attached">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041950706" ID="ID_1548470770" MODIFIED="1510060280416" TEXT="Powered">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041952698" ID="ID_1811126410" MODIFIED="1510060280416" TEXT="Default">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041955025" ID="ID_1549958646" MODIFIED="1510060280432" TEXT="Addressed">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510041958017" ID="ID_794250314" MODIFIED="1510060280432" TEXT="Configured">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510042028856" FOLDED="true" ID="ID_398653197" LINK="USB%20Descriptor.png" MODIFIED="1510060280432" TEXT="Descriptors">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042044014" ID="ID_48141203" MODIFIED="1510060280432" TEXT="Structured data">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042048029" ID="ID_1382461335" MODIFIED="1510060280432" TEXT="Describes attributes">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042067819" ID="ID_1724723293" MODIFIED="1510060280432" TEXT="Provides information about Device to Host">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042113989" FOLDED="true" ID="ID_208321827" MODIFIED="1510060280432" TEXT="Types">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042117509" FOLDED="true" ID="ID_1217106896" MODIFIED="1510060280432" TEXT="Device Descriptor">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042150538" ID="ID_1159282413" MODIFIED="1510060280432" TEXT="Information about Device">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042164855" ID="ID_163133627" MODIFIED="1510060280432" TEXT="Device Speed">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042171822" ID="ID_1427000670" MODIFIED="1510060280432" TEXT="USB Version">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042174597" ID="ID_933946671" MODIFIED="1510060280432" TEXT="Vendor details">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042179901" ID="ID_1189938927" MODIFIED="1510060280432" TEXT="Number of configurations">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510042130163" FOLDED="true" ID="ID_1843976447" MODIFIED="1510060280432" TEXT="Configuration  Descriptor">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042194547" ID="ID_1172880059" MODIFIED="1510060280432" TEXT="A particular configution">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042217584" ID="ID_1121210383" MODIFIED="1510060280432" TEXT="Powering mechanism">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042225247" ID="ID_1077905575" MODIFIED="1510060280432" TEXT="Power requirements">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042231662" ID="ID_1550763812" MODIFIED="1510060280432" TEXT="Interface requirements">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510042134779" FOLDED="true" ID="ID_1651110175" MODIFIED="1510060280432" TEXT="Interface Descriptor">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042242445" ID="ID_221275253" MODIFIED="1510060280432" TEXT="A configuration&apos;s particular interface">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042258427" ID="ID_1651016546" MODIFIED="1510060280432" TEXT="Class of device and protocol">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510042137362" FOLDED="true" ID="ID_366844910" MODIFIED="1510060280432" TEXT="EP Descriptor">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042279408" ID="ID_367539419" MODIFIED="1510060280432" TEXT="Information about a particular endpoint">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042289999" ID="ID_1156388125" MODIFIED="1510060280432" TEXT="Transfer type supported">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042311764" ID="ID_971162847" MODIFIED="1510060280432" TEXT="Timing ">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042314300" ID="ID_534094015" MODIFIED="1510060280447" TEXT="Address">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
</node>
</node>
<node COLOR="#990000" CREATED="1510042325490" FOLDED="true" ID="ID_655094812" MODIFIED="1510043364304" TEXT="USB Transfers">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510042348032" FOLDED="true" ID="ID_891847595" MODIFIED="1510060280447" TEXT="Definies">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042351599" ID="ID_1840491184" MODIFIED="1510060280447" TEXT="Direction of Communication Flow">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042359998" ID="ID_1131025951" MODIFIED="1510060280447" TEXT="Constraints in the Packet Size">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042370261" ID="ID_1272066957" MODIFIED="1510060280447" TEXT="Bus Access Constraints">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042379276" ID="ID_543224816" MODIFIED="1510060280447" TEXT="Latency Constraints">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042394602" ID="ID_1393838044" MODIFIED="1510060280447" TEXT="Required data sequence">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042403001" ID="ID_791805088" MODIFIED="1510060280447" TEXT="Error Handling">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510042410984" FOLDED="true" ID="ID_585357242" MODIFIED="1510060280447" TEXT="Types">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042413375" FOLDED="true" ID="ID_42693867" MODIFIED="1510060280447" TEXT="Control Transfer">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042422622" ID="ID_1676642588" MODIFIED="1510060280447" TEXT="MAX: 64B">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042440460" ID="ID_503493956" MODIFIED="1510060280447" TEXT="Retrieve information and configure device">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042433645" ID="ID_1756949111" MODIFIED="1510060280447" TEXT="Nonperiodic">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042467025" ID="ID_1044144842" MODIFIED="1510060280447" TEXT="Best effort to deliver">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042478751" FOLDED="true" ID="ID_1821859313" MODIFIED="1510060280447" TEXT="Occurs">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042488054" ID="ID_541160163" MODIFIED="1510060280447" TEXT="Seup transaction">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042497989" ID="ID_887859984" MODIFIED="1510060280447" TEXT="Optional data transaction">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042508363" ID="ID_1125400950" MODIFIED="1510060280447" TEXT="Status transaction">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510042522074" ID="ID_32971667" MODIFIED="1510060280463" TEXT="In Message Pipes">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510042534040" FOLDED="true" ID="ID_263918437" MODIFIED="1510060280464" TEXT="Bulk Transfer">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042578482" ID="ID_875710843" MODIFIED="1510060280464" TEXT="Max: 512B">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042586698" ID="ID_1701696040" MODIFIED="1510060280465" TEXT="Non-Periodic">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042549614" ID="ID_616213540" MODIFIED="1510060280465" TEXT="Transfer large data">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042558597" ID="ID_1581935195" MODIFIED="1510060280465" TEXT="No strict time requirement">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042605296" ID="ID_561336624" MODIFIED="1510060280465" TEXT="In stream PIPE">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042625333" ID="ID_1607373054" MODIFIED="1510060280465" TEXT="Guaranteed data transfer">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042639067" ID="ID_360906254" MODIFIED="1510060280465" TEXT="No guaranteed delivery time">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042654737" ID="ID_699721192" MODIFIED="1510060280465" TEXT="Retry data">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042669351" ID="ID_1900289350" MODIFIED="1510060280465" TEXT="Format is not defied">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510042676854" FOLDED="true" ID="ID_1714156120" MODIFIED="1510060280465" TEXT="Interrupt Transfer">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042684205" ID="ID_1041999732" MODIFIED="1510060280465" TEXT="Small data">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042687085" ID="ID_1072121273" MODIFIED="1510060280465" TEXT="Non-Periodic">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042692756" ID="ID_1880587689" MODIFIED="1510060280465" TEXT="Max: 1024B">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042704371" ID="ID_1864130233" MODIFIED="1510060280465" TEXT="Limited latency">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042714473" ID="ID_427195544" MODIFIED="1510060280465" TEXT="Stream PIPE">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042724976" ID="ID_844703695" MODIFIED="1510060280465" TEXT="Guanteed delivery of data">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042736878" ID="ID_1545149705" MODIFIED="1510060280465" TEXT="Retry data">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510042741398" FOLDED="true" ID="ID_479048485" MODIFIED="1510060280465" TEXT="Isochronous Transfet">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510042753364" ID="ID_1410869870" MODIFIED="1510060280465" TEXT="Web camera or audio transfer">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042767659" ID="ID_852992304" MODIFIED="1510060280465" TEXT="Periodic transfer">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042780593" ID="ID_1846071187" MODIFIED="1510060280465" TEXT="On-time delivery">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042787544" ID="ID_1665432939" MODIFIED="1510060280465" TEXT="Max: 1024B">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042796847" ID="ID_299134873" MODIFIED="1510060280465" TEXT="Allcating dedicated portion of USB bandwidth">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042834850" ID="ID_176947042" MODIFIED="1510060280465" TEXT="Potential data losses">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042845921" ID="ID_426371880" MODIFIED="1510060280465" TEXT="Stream PIPE">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042854080" ID="ID_933137251" MODIFIED="1510060280465" TEXT="No Retry">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
</node>
</node>
<node COLOR="#00b439" CREATED="1510042883854" FOLDED="true" ID="ID_545047374" MODIFIED="1510043364315" TEXT="TERMS">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510042891315" FOLDED="true" ID="ID_782806338" MODIFIED="1510043364314" TEXT="Short Packet">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510042910713" ID="ID_7655963" MODIFIED="1510060280481" TEXT="Packet whose payload is shorter than maximum size or ZLP(zero length Packet)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042939677" ID="ID_1390548525" MODIFIED="1510060280481" TEXT="Could indicate the end of a transfet">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510042954195" FOLDED="true" ID="ID_1221947691" MODIFIED="1510043364315" TEXT="ZLP">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510042960338" ID="ID_1441011224" MODIFIED="1510060280481" TEXT="Zero Length Packet">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510042967113" ID="ID_1624614633" MODIFIED="1510060280481" TEXT="Does not contain data">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510043001157" ID="ID_1439794710" MODIFIED="1510060280481" TEXT="Indicate the end of transfer">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510042994558" FOLDED="true" ID="ID_644205377" MODIFIED="1510043364315" TEXT="STALL">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510043012116" ID="ID_1853479191" MODIFIED="1510060280481" TEXT="Indicate a function is unable to transmit or receive data or control pipe is not supported">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510043381710" FOLDED="true" ID="ID_1147014145" MODIFIED="1510044458106" POSITION="right" TEXT="Overview of the Linux USB Subsystem">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-3"/>
<node COLOR="#00b439" CREATED="1510043436926" ID="ID_551144035" MODIFIED="1510043445449" TEXT="Directories">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510043446061" ID="ID_1890790403" MODIFIED="1510043447121" TEXT="core">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043453964" ID="ID_1916017475" MODIFIED="1510043459056" TEXT="host">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510043462563" ID="ID_726410579" MODIFIED="1510060280481" TEXT="ohci">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510043464403" ID="ID_249137090" MODIFIED="1510060280481" TEXT="ehci">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510043475209" ID="ID_1525772979" MODIFIED="1510043477365" TEXT="gadget">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043484752" ID="ID_360803733" MODIFIED="1510043487236" TEXT="otg">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043490175" ID="ID_1477258950" MODIFIED="1510043492260" TEXT="class">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043499238" ID="ID_1560678884" MODIFIED="1510043501546" TEXT="storage">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043506037" ID="ID_1903798690" MODIFIED="1510043507178" TEXT="image">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043510971" ID="ID_341640280" MODIFIED="1510043512017" TEXT="atm">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043515116" ID="ID_1750222050" MODIFIED="1510043516164" TEXT="serial">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043517572" ID="ID_1067750073" MODIFIED="1510043519800" TEXT="misc">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510043520276" ID="ID_439368794" MODIFIED="1510043523432" TEXT="mon">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510043554767" ID="ID_1584057240" MODIFIED="1510043565650" TEXT="Host Subsystem">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510044017933" ID="ID_480646216" MODIFIED="1510044022497" TEXT="Functions">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510043943422" ID="ID_1596746258" MODIFIED="1510044025632" TEXT="Drivers for host controller">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510043952573" ID="ID_435365339" MODIFIED="1510044025633" TEXT="Driver modules that implement USB protocol">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510043971955" ID="ID_1148339148" MODIFIED="1510044025634" TEXT="Functional Drivers">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510043987721" ID="ID_1237443799" MODIFIED="1510044025634" TEXT="Fil System">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510043989705" ID="ID_1999070667" MODIFIED="1510044025634" TEXT="Debugging">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510044028787" ID="ID_1801387081" MODIFIED="1510044032479" TEXT="USB HCD Driver">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510044043434" ID="ID_1626198932" MODIFIED="1510060280481" TEXT="EHCI - USB 2.0 High Speed">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510044044737" ID="ID_1392512256" MODIFIED="1510060280481" TEXT="OHCI - USB 2.0 Low Speed">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510044046529" ID="ID_79054311" MODIFIED="1510060280481" TEXT="UHCI - Intel full and low speed">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510044154012" ID="ID_1702110941" MODIFIED="1510044156800" TEXT="USB Class Driver">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510044173969" ID="ID_1801123495" MODIFIED="1510060280481" TEXT="Mass Storage Class">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510044211732" ID="ID_986119830" MODIFIED="1510060280481" TEXT="SCSI drivers">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510044246416" ID="ID_1113578657" MODIFIED="1510060280481" TEXT="Serial Class">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510044258446" ID="ID_1827979648" MODIFIED="1510060280481" TEXT="CDC Ethernet">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510044284011" ID="ID_1794495628" MODIFIED="1510044292182" TEXT="Debug Infrastucture">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044292642" ID="ID_1392381988" MODIFIED="1510044295246" TEXT="File Systems">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510044295650" ID="ID_1396760278" MODIFIED="1510060280481" TEXT="extends internal to user space">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510044318687" ID="ID_1771145980" MODIFIED="1510044320963" TEXT="Power Management">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044326526" ID="ID_1906808169" MODIFIED="1510044327450" TEXT="Test">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510044332349" ID="ID_1618219128" MODIFIED="1510044449995" TEXT="Gadget Subsystem">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510044358074" ID="ID_252316897" MODIFIED="1510044366885" TEXT="Device Driver Layer">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044367177" ID="ID_377907808" MODIFIED="1510044372412" TEXT="Class Driver Layer">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510044466052" FOLDED="true" ID="ID_823420524" MODIFIED="1510046983180" POSITION="right" TEXT="Linux USB Host Driver">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-4"/>
<node COLOR="#00b439" CREATED="1510044513014" ID="ID_291149248" MODIFIED="1510044515562" TEXT="Layers">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510044516102" ID="ID_444408327" MODIFIED="1510044520986" TEXT="USB Interface">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044521357" ID="ID_1933721477" MODIFIED="1510044535080" TEXT="System Software">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044536203" ID="ID_160265299" MODIFIED="1510044538527" TEXT="Client Software">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510044576942" ID="ID_1879628444" LINK="Typical%20USB%20Host%20Stack.png" MODIFIED="1510044836858" TEXT="Generic Host Stack">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510044637063" ID="ID_1549054620" MODIFIED="1510044662081" TEXT="Host Software">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044663795" ID="ID_459297658" MODIFIED="1510044673566" TEXT="USB Driver(USBD)">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044684505" ID="ID_1104969871" MODIFIED="1510044693964" TEXT="USBDI(USB Driver Interface)">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510044716053" ID="ID_406823158" MODIFIED="1510044728968" TEXT="HCDI(Host Controller Driver Interface)">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510044736962" ID="ID_628313525" MODIFIED="1510060280481" TEXT="Interface btween HCD and System Software">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510044783892" ID="ID_1223323306" MODIFIED="1510044785160" TEXT="HCD">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510044790091" ID="ID_1828607296" MODIFIED="1510060280481" TEXT="EHCI">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510044793395" ID="ID_1319623803" MODIFIED="1510060280481" TEXT="OHCI">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510044797818" ID="ID_1300763678" MODIFIED="1510060280481" TEXT="Custom USB host controller">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
<node COLOR="#00b439" CREATED="1510044825207" ID="ID_931457303" LINK="Linux%20USB%20Host%20Stack.png" MODIFIED="1510045081845" TEXT="Linux Host Stack">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510044853299" ID="ID_1134181084" MODIFIED="1510044856423" TEXT="usbcore">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510044911316" ID="ID_1531282248" MODIFIED="1510060280481" TEXT="Device Management">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510044996697" ID="ID_1046177639" MODIFIED="1510060280481" TEXT="manage devices connected to host">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045015823" ID="ID_1230397352" MODIFIED="1510060280481" TEXT="share information via VFS">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045029917" ID="ID_349535059" MODIFIED="1510060280481" TEXT="device notification">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510044921467" ID="ID_801756167" MODIFIED="1510060280481" TEXT="Power Management">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510045109275" ID="ID_1273009374" MODIFIED="1510060280481" TEXT="save power">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045113251" ID="ID_299874769" MODIFIED="1510060280481" TEXT="remote wakeup">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510044929378" ID="ID_1700751824" MODIFIED="1510060280481" TEXT="USB hub driver">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510045131888" ID="ID_1289161233" MODIFIED="1510060280481" TEXT="reset the device">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045136991" ID="ID_37016400" MODIFIED="1510060280481" TEXT="announcing new devices to other modules">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510044934057" ID="ID_1008932777" MODIFIED="1510060280481" TEXT="USB host driver">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510045155821" ID="ID_608901665" MODIFIED="1510060280481" TEXT="USB transfers">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045165996" ID="ID_1335038222" MODIFIED="1510060280481" TEXT="Manage URB(USB Request Block) transfer from class drivers to HCDs">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510044969253" ID="ID_416803998" MODIFIED="1510060280481" TEXT="HCD interfaces">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510045229804" ID="ID_1014368170" MODIFIED="1510060280496" TEXT="URB transfer to HCD">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
<node COLOR="#990000" CREATED="1510044856827" ID="ID_700687871" MODIFIED="1510045257805" TEXT="Linux USB HCD">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510045260976" ID="ID_912078825" MODIFIED="1510060280496" TEXT="driver for USB host controllers">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045273414" ID="ID_498871024" MODIFIED="1510060280496" TEXT="based on EHCI or OHCI">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045287884" ID="ID_692953076" MODIFIED="1510060280496" TEXT="Implements abstraction between HW and usbcore">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510045372370" ID="ID_424876503" MODIFIED="1510047077464" POSITION="right" TEXT="USB Device Notification">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-5"/>
<node COLOR="#00b439" CREATED="1510045749914" ID="ID_1002504153" MODIFIED="1510045872503" TEXT="Communication method">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510045763976" ID="ID_660966088" MODIFIED="1510045780419" TEXT="Synchronous">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510045787573" ID="ID_1235782171" MODIFIED="1510060280496" TEXT="Request-reply/Polling">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045798060" ID="ID_1062314891" MODIFIED="1510060280496" TEXT="Reduce the performance">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045809219" ID="ID_1586030005" MODIFIED="1510060280496" TEXT="Waste cycles">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510045774703" ID="ID_40981050" MODIFIED="1510045786178" TEXT="Asynchronous">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510045823985" ID="ID_139797178" MODIFIED="1510060280496" TEXT="Publish-subscribe methods">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045840991" ID="ID_1334011408" MODIFIED="1510060280496" TEXT="Effective alternatives">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510045860860" ID="ID_1878563420" MODIFIED="1510045880340" TEXT="Linux USE">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
<node COLOR="#00b439" CREATED="1510045890425" ID="ID_154658185" MODIFIED="1510045897580" TEXT="Publish-Subscribe">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510045915101" ID="ID_1613555926" MODIFIED="1510045928312" TEXT="Client register a callback function">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510045928684" ID="ID_1082336429" MODIFIED="1510045951069" TEXT="Server inform client whenever an event of interest occurs through callbacks">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510045964663" ID="ID_296876870" MODIFIED="1510046186401" TEXT="Notifier chain">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510046010713" ID="ID_1778911775" MODIFIED="1510046016901" TEXT="Provided by Linux Kernel">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510046033862" ID="ID_1373805322" MODIFIED="1510046045361" TEXT="Indication addition or removal of a device">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510046089055" ID="ID_1125093604" MODIFIED="1510046098858" TEXT="Callbacks are invoked">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046099574" ID="ID_665936154" MODIFIED="1510060280496" TEXT="Process context">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046101398" ID="ID_1186380974" MODIFIED="1510060280496" TEXT="interrupt context">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510046128266" ID="ID_1903667786" MODIFIED="1510046142493" TEXT="Classified">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046143057" ID="ID_701014335" MODIFIED="1510060280496" TEXT="Atomic">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046145144" ID="ID_178289877" MODIFIED="1510060280496" TEXT="Blocking - Linux-USB uses">
<arrowlink DESTINATION="ID_1459532765" ENDARROW="Default" ENDINCLINATION="221;0;" ID="Arrow_ID_1596668683" STARTARROW="None" STARTINCLINATION="221;0;"/>
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046147320" ID="ID_400246955" MODIFIED="1510060280496" TEXT="Raw">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046148928" ID="ID_925252011" MODIFIED="1510060280496" TEXT="Sleepable Read-Copy Update(SRCU)">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
<node COLOR="#00b439" CREATED="1510046192563" ID="ID_1459532765" MODIFIED="1510046201145" TEXT="Blocking Notifier Chain">
<edge STYLE="bezier" WIDTH="thin"/>
<linktarget COLOR="#b0b0b0" DESTINATION="ID_1459532765" ENDARROW="Default" ENDINCLINATION="221;0;" ID="Arrow_ID_1596668683" SOURCE="ID_178289877" STARTARROW="None" STARTINCLINATION="221;0;"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510046206833" ID="ID_1297037660" MODIFIED="1510046216140" TEXT="Runs in the process context">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510046225326" ID="ID_1259531809" MODIFIED="1510046227490" TEXT="Can be blocked">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510046242956" ID="ID_1691061888" MODIFIED="1510046250167" TEXT="NOT highly time critical">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510046272504" ID="ID_1804384355" MODIFIED="1510046286019" TEXT="struct notifier_block">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046289046" ID="ID_75769720" MODIFIED="1510060280496" TEXT="int (*nofifier_call)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046300781" ID="ID_9834966" MODIFIED="1510060280496" TEXT="next">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046302285" ID="ID_1411618435" MODIFIED="1510060280496" TEXT="proority">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510046309292" ID="ID_604773099" MODIFIED="1510046316263" TEXT="struct blocking_notifier_head">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046317738" ID="ID_721924383" MODIFIED="1510060280496" TEXT="rwsem">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046330497" ID="ID_628723225" MODIFIED="1510060280496" TEXT="struct notifier_block *head">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510046347887" ID="ID_220616623" MODIFIED="1510046349619" TEXT="block_notifier_chain_register()">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510046359861" ID="ID_628667924" MODIFIED="1510046363185" TEXT="blocking_notifier_chain_unregister()">
<font NAME="SimHei" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1510046414742" ID="ID_283889690" LINK="Linux%20USB%20Notification.png" MODIFIED="1510046464390" TEXT="Linux USB Notification">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510046585377" ID="ID_704969317" MODIFIED="1510046586589" TEXT="APIs">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046553541" ID="ID_1171965047" MODIFIED="1510046590036" TEXT="usb_register_notify()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046559044" ID="ID_1644352942" MODIFIED="1510046590037" TEXT="usb_unregister_notify()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046565587" ID="ID_1649158333" MODIFIED="1510046590037" TEXT="usb_notify_add_device()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046570946" ID="ID_813740312" MODIFIED="1510046590038" TEXT="usb_notify_remove_device()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046577274" ID="ID_886831411" MODIFIED="1510046590038" TEXT="usb_notify_add_bus()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046582689" ID="ID_704121747" MODIFIED="1510046590039" TEXT="usb_notify_remove_bus()">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510046599183" ID="ID_304064830" MODIFIED="1510046601259" TEXT="Events">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046615005" ID="ID_794156476" MODIFIED="1510060280512" TEXT="USB_DEVICE_ADD">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046616157" ID="ID_292143750" MODIFIED="1510060280512" TEXT="USB_DEVICE_REMOVE">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046619252" ID="ID_1445111473" MODIFIED="1510060280512" TEXT="USB_BUS_ADD">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046622372" ID="ID_46103952" MODIFIED="1510060280512" TEXT="USB_BUS_REMOVE">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510046767754" ID="ID_912665829" MODIFIED="1510046769326" TEXT="Steps">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510046771761" ID="ID_1047209668" MODIFIED="1510060280512" TEXT="usb_register_notify() called by subscribers">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046798630" ID="ID_1303659069" MODIFIED="1510060280512" TEXT="device is added to system">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046807933" ID="ID_688257660" MODIFIED="1510060280512" TEXT="usb_notify_add_device() called by usb-generic framework">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510046854047" ID="ID_1030470395" MODIFIED="1510060280512" TEXT="traverses the usb_notification_list to pass information">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1510046984702" ID="ID_1350733588" MODIFIED="1510061079046" POSITION="right" TEXT="Device File System">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SimHei" SIZE="18"/>
<icon BUILTIN="full-6"/>
<node COLOR="#00b439" CREATED="1510047012235" FOLDED="true" ID="ID_92763633" LINK="VFS.png" MODIFIED="1510061079853" TEXT="VFS">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510047014843" ID="ID_1028087486" MODIFIED="1510047018838" TEXT="Virtual File System">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510047019538" ID="ID_403201433" MODIFIED="1510047030117" TEXT="Provide file system interface to user space app">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510047035184" ID="ID_1341453079" MODIFIED="1510047044171" TEXT="Allow app to access kernel internals">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510047171119" ID="ID_1316534966" MODIFIED="1510047181674" TEXT="Data structures">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510047182133" ID="ID_483777711" MODIFIED="1510060280512" TEXT="Dentries">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510047187133" ID="ID_1748190359" MODIFIED="1510060280512" TEXT="Files">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510047188604" ID="ID_780771007" MODIFIED="1510060463502" TEXT="Inodes - Index Node">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510047190716" ID="ID_760318767" MODIFIED="1510060546175" TEXT="Super blocks">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510060352165" ID="ID_906914934" MODIFIED="1510060590725" TEXT="Super Block">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510060557530" ID="ID_500474350" MODIFIED="1510060558367" TEXT="root of file system">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060579266" ID="ID_1496032148" MODIFIED="1510060580031" TEXT="struct super_block">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510060197459" ID="ID_1359016476" MODIFIED="1510060577369" TEXT="struct super_operations">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510060388954" ID="ID_225567499" MODIFIED="1510060400816" TEXT="# methods to manage an inode">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060371810" ID="ID_1460007326" MODIFIED="1510060426999" TEXT="(*alloc_inode)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060376258" ID="ID_192000299" MODIFIED="1510060435168" TEXT="(*destroy_inode)(..)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060406842" ID="ID_1320654337" MODIFIED="1510060420976" TEXT="(*dirty_inode)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060404602" ID="ID_1479057083" MODIFIED="1510060442303" TEXT="(*write_inode)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
</node>
<node COLOR="#990000" CREATED="1510060472450" ID="ID_646826890" MODIFIED="1510060476286" TEXT="Inode">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510060532018" ID="ID_289939970" MODIFIED="1510060536503" TEXT="struct inode_operations">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510060600394" ID="ID_367492804" MODIFIED="1510060606126" TEXT="(*create)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060608841" ID="ID_1647870713" MODIFIED="1510060620864" TEXT="(*loopup)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060658665" ID="ID_1647507373" MODIFIED="1510060665326" TEXT="(*link)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060665570" ID="ID_1117602703" MODIFIED="1510060667623" TEXT="(*unlink)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510060480722" ID="ID_1242403636" MODIFIED="1510060485111" TEXT="file or directory object">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060487570" ID="ID_1577731754" MODIFIED="1510060491519" TEXT="file metadata ">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060495786" ID="ID_528026830" MODIFIED="1510060496887" TEXT="length">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060497130" ID="ID_1207312437" MODIFIED="1510060497711" TEXT="time">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060499690" ID="ID_1876627668" MODIFIED="1510060503663" TEXT="ownership">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060508428" ID="ID_974256001" MODIFIED="1510060520584" TEXT="allocated by slab allocator from inode cache">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510060682138" ID="ID_505359490" MODIFIED="1510060684119" TEXT="File">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510060684498" ID="ID_684682683" MODIFIED="1510060688903" TEXT="struct file_operations">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510060710426" ID="ID_683800585" MODIFIED="1510060715743" TEXT="(*open)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060715986" ID="ID_336031703" MODIFIED="1510060725567" TEXT="(*read)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060720514" ID="ID_881866770" MODIFIED="1510060730151" TEXT="(*write)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510060721778" ID="ID_1630727695" MODIFIED="1510060733231" TEXT="(*close)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510060742458" ID="ID_957830144" MODIFIED="1510060748824" TEXT="How to manage informat in a file">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510060814298" ID="ID_1110115173" MODIFIED="1510060963135" TEXT="int register_filesystem(struct file_system_type*)">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510060824850" ID="ID_1034916061" MODIFIED="1510060965600" TEXT="int unregister_filesystem(struct file_system_type*)">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510061045842" ID="ID_412243127" MODIFIED="1510061050015" TEXT="stuct file_system_type">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510061050595" ID="ID_1385555106" MODIFIED="1510061052239" TEXT="name">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510061052466" ID="ID_1593789878" MODIFIED="1510061064632" TEXT="int (*get_sb)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510061065026" ID="ID_1081727240" MODIFIED="1510061069832" TEXT="int (*kill_sb)(...)">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
<node COLOR="#00b439" CREATED="1510061081706" ID="ID_963577582" MODIFIED="1510061169670" TEXT="USB Device File System">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510061133562" ID="ID_1692838294" MODIFIED="1510061134784" TEXT="usbfs">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510061172690" ID="ID_1270050026" MODIFIED="1510061176030" TEXT="Implement files">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510061176562" ID="ID_296413784" MODIFIED="1510061205046" TEXT="inode.c - VFS framework">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510061179930" ID="ID_514041099" MODIFIED="1510061216912" TEXT="devices.c - file operations">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510061185674" ID="ID_1855311708" MODIFIED="1510061218719" TEXT="devio.c -file operations">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510061243434" ID="ID_183785754" MODIFIED="1510061280335" TEXT="USB VFS Framework - Device File System">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510061251986" ID="ID_1090300471" MODIFIED="1510061282935" TEXT="VFS">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510061293818" ID="ID_408941058" MODIFIED="1510061296047" TEXT="File Operations">
<font NAME="SimHei" SIZE="12"/>
<node COLOR="#111111" CREATED="1510061305874" ID="ID_1879002968" MODIFIED="1510061309982" TEXT="Device File Operations">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510061310266" ID="ID_610872553" MODIFIED="1510061315007" TEXT="Device/Bus File Operations">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510061296466" ID="ID_1120765890" MODIFIED="1510061302846" TEXT="SUper Block/Inode Operations">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#111111" CREATED="1510061283346" ID="ID_31935775" MODIFIED="1510061290415" TEXT="Linux USB Device File Management">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510061383562" ID="ID_632555716" MODIFIED="1510061410015" TEXT="usbfs_init()">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510061431962" ID="ID_288103088" MODIFIED="1510061452695" TEXT="register USB notification usbfs_nb">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510061444690" ID="ID_1236571663" MODIFIED="1510061772886" TEXT="usbfs_notify receive events for device/usb bus addition and removal">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510061780274" ID="ID_1936431199" MODIFIED="1510061793887" TEXT="USB file creation">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510061403362" ID="ID_1194205168" MODIFIED="1510061403886" TEXT="usbfs_cleanup">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510061858010" ID="ID_351316051" MODIFIED="1510061882519" TEXT="Init Flow of USB VFS">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510061883618" ID="ID_335756743" MODIFIED="1510061905001" TEXT="usbfs_init() called by usbcore">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510061908403" ID="ID_1538717648" MODIFIED="1510061920023" TEXT="register USB File System and notifier callback">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510061949682" ID="ID_28490143" MODIFIED="1510061978744" TEXT="triggers creation of super block objects - usb_get_sb()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510061978979" ID="ID_1308879656" MODIFIED="1510061985127" TEXT="usbfs_fill_super()">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510062024154" ID="ID_219910643" MODIFIED="1510062034879" TEXT="devices file life cycle">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510062052498" ID="ID_1157716795" MODIFIED="1510062056031" TEXT="Add bus">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062056274" ID="ID_662486971" MODIFIED="1510062079007" TEXT="usbfs_notify()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062062338" ID="ID_49218638" MODIFIED="1510062076647" TEXT="usbfs_add_bus()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062067482" ID="ID_1222063352" MODIFIED="1510062074614" TEXT="create_spedical_files()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062081731" ID="ID_1772792254" MODIFIED="1510062092919" TEXT="fs_create_file() - usbfs_device_fops">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062093179" ID="ID_158612766" MODIFIED="1510062100815" TEXT="new_inode">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062103369" ID="ID_438416353" MODIFIED="1510062116192" TEXT="inode-&gt;i_fop = &amp;usbfs_devices_fops">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062120778" ID="ID_616894613" MODIFIED="1510062124526" TEXT="--&gt;read">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062124843" ID="ID_1815843405" MODIFIED="1510062140415" TEXT="usb_device_read()">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062131697" ID="ID_285692483" MODIFIED="1510062139047" TEXT="usb_device_dump()">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
<node COLOR="#00b439" CREATED="1510062174738" ID="ID_1130954871" MODIFIED="1510062181726" TEXT="Creating USB File System">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SimHei" SIZE="16"/>
<node COLOR="#990000" CREATED="1510062193834" ID="ID_1535248698" MODIFIED="1510062310623" TEXT="struct file_system_type usb_fs_type">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510062219642" ID="ID_1121551095" MODIFIED="1510062223318" TEXT="&quot;usbfs&quot;">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062208274" ID="ID_882595627" MODIFIED="1510062212384" TEXT="usb_get_sb">
<font NAME="SimHei" SIZE="12"/>
</node>
<node COLOR="#111111" CREATED="1510062212642" ID="ID_39241913" MODIFIED="1510062363087" TEXT="kill_litter_super() - clean data structure when file is unmounted">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
<node COLOR="#990000" CREATED="1510062296674" ID="ID_182414936" MODIFIED="1510062321823" TEXT="registe_file_system(&amp;usb_fs_type) - # called by usb_init()-&gt;usbfs_init() ">
<font NAME="SimHei" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1510062381738" ID="ID_1047829574" MODIFIED="1510062388783" TEXT="usb_get_sb() is triggered">
<font NAME="SimHei" SIZE="14"/>
<node COLOR="#111111" CREATED="1510062390698" ID="ID_1006392849" MODIFIED="1510062404522" TEXT="get_sb_single() is called">
<font NAME="SimHei" SIZE="12"/>
</node>
</node>
</node>
</node>
</node>
</map>
